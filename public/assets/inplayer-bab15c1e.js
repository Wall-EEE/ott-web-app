import{g as vr}from"./index-63fc1275.js";var Ae={exports:{}};(function(Oe,br){(function(w,I){Oe.exports=I()})(window,function(){return function(w){var I={};function n(o){if(I[o])return I[o].exports;var a=I[o]={i:o,l:!1,exports:{}};return w[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=w,n.c=I,n.d=function(o,a,f){n.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:f})},n.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,a){if(1&a&&(o=n(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var f=Object.create(null);if(n.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)n.d(f,c,function(e){return o[e]}.bind(null,c));return f},n.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(a,"a",a),a},n.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},n.p="",n(n.s=206)}([function(w,I,n){w.exports=n(83)},function(w,I){function n(o,a,f,c,e,s,i){try{var t=o[s](i),g=t.value}catch(l){return void f(l)}t.done?a(g):Promise.resolve(g).then(c,e)}w.exports=function(o){return function(){var a=this,f=arguments;return new Promise(function(c,e){var s=o.apply(a,f);function i(g){n(s,c,e,i,t,"next",g)}function t(g){n(s,c,e,i,t,"throw",g)}i(void 0)})}}},function(w,I){w.exports=function(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}},function(w,I,n){var o=n(86),a=n(87),f=n(46);w.exports={formats:f,parse:a,stringify:o}},function(w,I){w.exports=function(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}},function(w,I){function n(o){return w.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},n(o)}w.exports=n},function(w,I){function n(o,a){for(var f=0;f<a.length;f++){var c=a[f];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}w.exports=function(o,a,f){return a&&n(o.prototype,a),f&&n(o,f),o}},function(w,I,n){var o=n(84);w.exports=function(a,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),f&&o(a,f)}},function(w,I,n){var o=n(85),a=n(17);w.exports=function(f,c){return!c||o(c)!=="object"&&typeof c!="function"?a(f):c}},function(w,I){var n,o,a=w.exports={};function f(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function e(S){if(n===setTimeout)return setTimeout(S,0);if((n===f||!n)&&setTimeout)return n=setTimeout,setTimeout(S,0);try{return n(S,0)}catch{try{return n.call(null,S,0)}catch{return n.call(this,S,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:f}catch{n=f}try{o=typeof clearTimeout=="function"?clearTimeout:c}catch{o=c}})();var s,i=[],t=!1,g=-1;function l(){t&&s&&(t=!1,s.length?i=s.concat(i):g=-1,i.length&&p())}function p(){if(!t){var S=e(l);t=!0;for(var k=i.length;k;){for(s=i,i=[];++g<k;)s&&s[g].run();g=-1,k=i.length}s=null,t=!1,function(b){if(o===clearTimeout)return clearTimeout(b);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(b);try{o(b)}catch{try{return o.call(null,b)}catch{return o.call(this,b)}}}(S)}}function d(S,k){this.fun=S,this.array=k}function E(){}a.nextTick=function(S){var k=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)k[b-1]=arguments[b];i.push(new d(S,k)),i.length!==1||t||e(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=E,a.addListener=E,a.once=E,a.off=E,a.removeListener=E,a.removeAllListeners=E,a.emit=E,a.prependListener=E,a.prependOnceListener=E,a.listeners=function(S){return[]},a.binding=function(S){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(S){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(w,I,n){var o=n(73),a=Object.prototype.toString;function f(t){return a.call(t)==="[object Array]"}function c(t){return t===void 0}function e(t){return t!==null&&typeof t=="object"}function s(t){return a.call(t)==="[object Function]"}function i(t,g){if(t!=null)if(typeof t!="object"&&(t=[t]),f(t))for(var l=0,p=t.length;l<p;l++)g.call(null,t[l],l,t);else for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&g.call(null,t[d],d,t)}w.exports={isArray:f,isArrayBuffer:function(t){return a.call(t)==="[object ArrayBuffer]"},isBuffer:function(t){return t!==null&&!c(t)&&t.constructor!==null&&!c(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},isFormData:function(t){return typeof FormData<"u"&&t instanceof FormData},isArrayBufferView:function(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return typeof t=="string"},isNumber:function(t){return typeof t=="number"},isObject:e,isUndefined:c,isDate:function(t){return a.call(t)==="[object Date]"},isFile:function(t){return a.call(t)==="[object File]"},isBlob:function(t){return a.call(t)==="[object Blob]"},isFunction:s,isStream:function(t){return e(t)&&s(t.pipe)},isURLSearchParams:function(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:i,merge:function t(){var g={};function l(E,S){typeof g[S]=="object"&&typeof E=="object"?g[S]=t(g[S],E):g[S]=E}for(var p=0,d=arguments.length;p<d;p++)i(arguments[p],l);return g},deepMerge:function t(){var g={};function l(E,S){typeof g[S]=="object"&&typeof E=="object"?g[S]=t(g[S],E):g[S]=typeof E=="object"?t({},E):E}for(var p=0,d=arguments.length;p<d;p++)i(arguments[p],l);return g},extend:function(t,g,l){return i(g,function(p,d){t[d]=l&&typeof p=="function"?o(p,l):p}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(w,I,n){var o=n(22),a=n(59),f=n(39),c=n(60),e=n(61);(w.exports=function(s,i){var t,g,l,p,d;return arguments.length<2||typeof s!="string"?(p=i,i=s,s=null):p=arguments[2],o(s)?(t=e.call(s,"c"),g=e.call(s,"e"),l=e.call(s,"w")):(t=l=!0,g=!1),d={value:i,configurable:t,enumerable:g,writable:l},p?f(c(p),d):d}).gs=function(s,i,t){var g,l,p,d;return typeof s!="string"?(p=t,t=i,i=s,s=null):p=arguments[3],o(i)?a(i)?o(t)?a(t)||(p=t,t=void 0):t=void 0:(p=i,i=t=void 0):i=void 0,o(s)?(g=e.call(s,"c"),l=e.call(s,"e")):(g=!0,l=!1),d={get:i,set:t,configurable:g,enumerable:l},p?f(c(p),d):d}},function(w,I){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}w.exports=n},function(w,I){typeof Object.create=="function"?w.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:w.exports=function(n,o){if(o){n.super_=o;var a=function(){};a.prototype=o.prototype,n.prototype=new a,n.prototype.constructor=n}}},function(w,I,n){var o=n(21);w.exports=function(a){if(!o(a))throw new TypeError("Cannot use null or undefined");return a}},function(w,I,n){var o,a=typeof Reflect=="object"?Reflect:null,f=a&&typeof a.apply=="function"?a.apply:function(k,b,v){return Function.prototype.apply.call(k,b,v)};o=a&&typeof a.ownKeys=="function"?a.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var c=Number.isNaN||function(k){return k!=k};function e(){e.init.call(this)}w.exports=e,w.exports.once=function(k,b){return new Promise(function(v,u){function x(){y!==void 0&&k.removeListener("error",y),v([].slice.call(arguments))}var y;b!=="error"&&(y=function(B){k.removeListener(b,x),u(B)},k.once("error",y)),k.once(b,x)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var s=10;function i(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}function t(k){return k._maxListeners===void 0?e.defaultMaxListeners:k._maxListeners}function g(k,b,v,u){var x,y,B,M;if(i(v),(y=k._events)===void 0?(y=k._events=Object.create(null),k._eventsCount=0):(y.newListener!==void 0&&(k.emit("newListener",b,v.listener?v.listener:v),y=k._events),B=y[b]),B===void 0)B=y[b]=v,++k._eventsCount;else if(typeof B=="function"?B=y[b]=u?[v,B]:[B,v]:u?B.unshift(v):B.push(v),(x=t(k))>0&&B.length>x&&!B.warned){B.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=k,D.type=b,D.count=B.length,M=D,console&&console.warn&&console.warn(M)}return k}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(k,b,v){var u={fired:!1,wrapFn:void 0,target:k,type:b,listener:v},x=l.bind(u);return x.listener=v,u.wrapFn=x,x}function d(k,b,v){var u=k._events;if(u===void 0)return[];var x=u[b];return x===void 0?[]:typeof x=="function"?v?[x.listener||x]:[x]:v?function(y){for(var B=new Array(y.length),M=0;M<B.length;++M)B[M]=y[M].listener||y[M];return B}(x):S(x,x.length)}function E(k){var b=this._events;if(b!==void 0){var v=b[k];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}function S(k,b){for(var v=new Array(b),u=0;u<b;++u)v[u]=k[u];return v}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(k){if(typeof k!="number"||k<0||c(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");s=k}}),e.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||c(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this},e.prototype.getMaxListeners=function(){return t(this)},e.prototype.emit=function(k){for(var b=[],v=1;v<arguments.length;v++)b.push(arguments[v]);var u=k==="error",x=this._events;if(x!==void 0)u=u&&x.error===void 0;else if(!u)return!1;if(u){var y;if(b.length>0&&(y=b[0]),y instanceof Error)throw y;var B=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw B.context=y,B}var M=x[k];if(M===void 0)return!1;if(typeof M=="function")f(M,this,b);else{var D=M.length,A=S(M,D);for(v=0;v<D;++v)f(A[v],this,b)}return!0},e.prototype.addListener=function(k,b){return g(this,k,b,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(k,b){return g(this,k,b,!0)},e.prototype.once=function(k,b){return i(b),this.on(k,p(this,k,b)),this},e.prototype.prependOnceListener=function(k,b){return i(b),this.prependListener(k,p(this,k,b)),this},e.prototype.removeListener=function(k,b){var v,u,x,y,B;if(i(b),(u=this._events)===void 0)return this;if((v=u[k])===void 0)return this;if(v===b||v.listener===b)--this._eventsCount==0?this._events=Object.create(null):(delete u[k],u.removeListener&&this.emit("removeListener",k,v.listener||b));else if(typeof v!="function"){for(x=-1,y=v.length-1;y>=0;y--)if(v[y]===b||v[y].listener===b){B=v[y].listener,x=y;break}if(x<0)return this;x===0?v.shift():function(M,D){for(;D+1<M.length;D++)M[D]=M[D+1];M.pop()}(v,x),v.length===1&&(u[k]=v[0]),u.removeListener!==void 0&&this.emit("removeListener",k,B||b)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(k){var b,v,u;if((v=this._events)===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[k]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete v[k]),this;if(arguments.length===0){var x,y=Object.keys(v);for(u=0;u<y.length;++u)(x=y[u])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(b=v[k])=="function")this.removeListener(k,b);else if(b!==void 0)for(u=b.length-1;u>=0;u--)this.removeListener(k,b[u]);return this},e.prototype.listeners=function(k){return d(this,k,!0)},e.prototype.rawListeners=function(k){return d(this,k,!1)},e.listenerCount=function(k,b){return typeof k.listenerCount=="function"?k.listenerCount(b):E.call(k,b)},e.prototype.listenerCount=E,e.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(w,I,n){w.exports=n(126)()?n(30).Symbol:n(129)},function(w,I){w.exports=function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}},function(w,I,n){var o=n(23),a=Object.keys||function(d){var E=[];for(var S in d)E.push(S);return E};w.exports=g;var f=Object.create(n(25));f.inherits=n(13);var c=n(48),e=n(52);f.inherits(g,c);for(var s=a(e.prototype),i=0;i<s.length;i++){var t=s[i];g.prototype[t]||(g.prototype[t]=e.prototype[t])}function g(d){if(!(this instanceof g))return new g(d);c.call(this,d),e.call(this,d),d&&d.readable===!1&&(this.readable=!1),d&&d.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,d&&d.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||o.nextTick(p,this)}function p(d){d.end()}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),g.prototype._destroy=function(d,E){this.push(null),this.end(),o.nextTick(E,d)}},function(w,I,n){var o=n(24),a=o.Buffer;function f(e,s){for(var i in e)s[i]=e[i]}function c(e,s,i){return a(e,s,i)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?w.exports=o:(f(o,I),I.Buffer=c),c.prototype=Object.create(a.prototype),f(a,c),c.from=function(e,s,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return a(e,s,i)},c.alloc=function(e,s,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var t=a(e);return s!==void 0?typeof i=="string"?t.fill(s,i):t.fill(s):t.fill(0),t},c.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return a(e)},c.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(w,I,n){w.exports=function(o){if(typeof o!="function")throw new TypeError(o+" is not a function");return o}},function(w,I,n){var o=n(105)();w.exports=function(a){return a!==o&&a!==null}},function(w,I,n){w.exports=function(o){return o!=null}},function(w,I,n){(function(o){o===void 0||!o.version||o.version.indexOf("v0.")===0||o.version.indexOf("v1.")===0&&o.version.indexOf("v1.8.")!==0?w.exports={nextTick:function(a,f,c,e){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var s,i,t=arguments.length;switch(t){case 0:case 1:return o.nextTick(a);case 2:return o.nextTick(function(){a.call(null,f)});case 3:return o.nextTick(function(){a.call(null,f,c)});case 4:return o.nextTick(function(){a.call(null,f,c,e)});default:for(s=new Array(t-1),i=0;i<s.length;)s[i++]=arguments[i];return o.nextTick(function(){a.apply(null,s)})}}}:w.exports=o}).call(this,n(9))},function(w,I,n){(function(o){var a=n(93),f=n(94),c=n(49);function e(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(h,m){if(e()<m)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(h=new Uint8Array(m)).__proto__=i.prototype:(h===null&&(h=new i(m)),h.length=m),h}function i(h,m,r){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(h,m,r);if(typeof h=="number"){if(typeof m=="string")throw new Error("If encoding is specified then the first argument must be a string");return l(this,h)}return t(this,h,m,r)}function t(h,m,r,_){if(typeof m=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&m instanceof ArrayBuffer?function(T,N,W,V){if(N.byteLength,W<0||N.byteLength<W)throw new RangeError("'offset' is out of bounds");if(N.byteLength<W+(V||0))throw new RangeError("'length' is out of bounds");return N=W===void 0&&V===void 0?new Uint8Array(N):V===void 0?new Uint8Array(N,W):new Uint8Array(N,W,V),i.TYPED_ARRAY_SUPPORT?(T=N).__proto__=i.prototype:T=p(T,N),T}(h,m,r,_):typeof m=="string"?function(T,N,W){if(typeof W=="string"&&W!==""||(W="utf8"),!i.isEncoding(W))throw new TypeError('"encoding" must be a valid string encoding');var V=0|E(N,W),ot=(T=s(T,V)).write(N,W);return ot!==V&&(T=T.slice(0,ot)),T}(h,m,r):function(T,N){if(i.isBuffer(N)){var W=0|d(N.length);return(T=s(T,W)).length===0||N.copy(T,0,0,W),T}if(N){if(typeof ArrayBuffer<"u"&&N.buffer instanceof ArrayBuffer||"length"in N)return typeof N.length!="number"||(V=N.length)!=V?s(T,0):p(T,N);if(N.type==="Buffer"&&c(N.data))return p(T,N.data)}var V;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(h,m)}function g(h){if(typeof h!="number")throw new TypeError('"size" argument must be a number');if(h<0)throw new RangeError('"size" argument must not be negative')}function l(h,m){if(g(m),h=s(h,m<0?0:0|d(m)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<m;++r)h[r]=0;return h}function p(h,m){var r=m.length<0?0:0|d(m.length);h=s(h,r);for(var _=0;_<r;_+=1)h[_]=255&m[_];return h}function d(h){if(h>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|h}function E(h,m){if(i.isBuffer(h))return h.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(h)||h instanceof ArrayBuffer))return h.byteLength;typeof h!="string"&&(h=""+h);var r=h.length;if(r===0)return 0;for(var _=!1;;)switch(m){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return ut(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return vt(h).length;default:if(_)return ut(h).length;m=(""+m).toLowerCase(),_=!0}}function S(h,m,r){var _=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(m>>>=0))return"";for(h||(h="utf8");;)switch(h){case"hex":return G(this,m,r);case"utf8":case"utf-8":return P(this,m,r);case"ascii":return H(this,m,r);case"latin1":case"binary":return K(this,m,r);case"base64":return A(this,m,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,m,r);default:if(_)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),_=!0}}function k(h,m,r){var _=h[m];h[m]=h[r],h[r]=_}function b(h,m,r,_,T){if(h.length===0)return-1;if(typeof r=="string"?(_=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=T?0:h.length-1),r<0&&(r=h.length+r),r>=h.length){if(T)return-1;r=h.length-1}else if(r<0){if(!T)return-1;r=0}if(typeof m=="string"&&(m=i.from(m,_)),i.isBuffer(m))return m.length===0?-1:v(h,m,r,_,T);if(typeof m=="number")return m&=255,i.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(h,m,r):Uint8Array.prototype.lastIndexOf.call(h,m,r):v(h,[m],r,_,T);throw new TypeError("val must be string, number or Buffer")}function v(h,m,r,_,T){var N,W=1,V=h.length,ot=m.length;if(_!==void 0&&((_=String(_).toLowerCase())==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(h.length<2||m.length<2)return-1;W=2,V/=2,ot/=2,r/=2}function mt(Wt,Kt){return W===1?Wt[Kt]:Wt.readUInt16BE(Kt*W)}if(T){var tt=-1;for(N=r;N<V;N++)if(mt(h,N)===mt(m,tt===-1?0:N-tt)){if(tt===-1&&(tt=N),N-tt+1===ot)return tt*W}else tt!==-1&&(N-=N-tt),tt=-1}else for(r+ot>V&&(r=V-ot),N=r;N>=0;N--){for(var dt=!0,ht=0;ht<ot;ht++)if(mt(h,N+ht)!==mt(m,ht)){dt=!1;break}if(dt)return N}return-1}function u(h,m,r,_){r=Number(r)||0;var T=h.length-r;_?(_=Number(_))>T&&(_=T):_=T;var N=m.length;if(N%2!=0)throw new TypeError("Invalid hex string");_>N/2&&(_=N/2);for(var W=0;W<_;++W){var V=parseInt(m.substr(2*W,2),16);if(isNaN(V))return W;h[r+W]=V}return W}function x(h,m,r,_){return rt(ut(m,h.length-r),h,r,_)}function y(h,m,r,_){return rt(function(T){for(var N=[],W=0;W<T.length;++W)N.push(255&T.charCodeAt(W));return N}(m),h,r,_)}function B(h,m,r,_){return y(h,m,r,_)}function M(h,m,r,_){return rt(vt(m),h,r,_)}function D(h,m,r,_){return rt(function(T,N){for(var W,V,ot,mt=[],tt=0;tt<T.length&&!((N-=2)<0);++tt)V=(W=T.charCodeAt(tt))>>8,ot=W%256,mt.push(ot),mt.push(V);return mt}(m,h.length-r),h,r,_)}function A(h,m,r){return m===0&&r===h.length?a.fromByteArray(h):a.fromByteArray(h.slice(m,r))}function P(h,m,r){r=Math.min(h.length,r);for(var _=[],T=m;T<r;){var N,W,V,ot,mt=h[T],tt=null,dt=mt>239?4:mt>223?3:mt>191?2:1;if(T+dt<=r)switch(dt){case 1:mt<128&&(tt=mt);break;case 2:(192&(N=h[T+1]))==128&&(ot=(31&mt)<<6|63&N)>127&&(tt=ot);break;case 3:N=h[T+1],W=h[T+2],(192&N)==128&&(192&W)==128&&(ot=(15&mt)<<12|(63&N)<<6|63&W)>2047&&(ot<55296||ot>57343)&&(tt=ot);break;case 4:N=h[T+1],W=h[T+2],V=h[T+3],(192&N)==128&&(192&W)==128&&(192&V)==128&&(ot=(15&mt)<<18|(63&N)<<12|(63&W)<<6|63&V)>65535&&ot<1114112&&(tt=ot)}tt===null?(tt=65533,dt=1):tt>65535&&(tt-=65536,_.push(tt>>>10&1023|55296),tt=56320|1023&tt),_.push(tt),T+=dt}return function(ht){var Wt=ht.length;if(Wt<=j)return String.fromCharCode.apply(String,ht);for(var Kt="",Qt=0;Qt<Wt;)Kt+=String.fromCharCode.apply(String,ht.slice(Qt,Qt+=j));return Kt}(_)}I.Buffer=i,I.SlowBuffer=function(h){return+h!=h&&(h=0),i.alloc(+h)},I.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=o.TYPED_ARRAY_SUPPORT!==void 0?o.TYPED_ARRAY_SUPPORT:function(){try{var h=new Uint8Array(1);return h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},h.foo()===42&&typeof h.subarray=="function"&&h.subarray(1,1).byteLength===0}catch{return!1}}(),I.kMaxLength=e(),i.poolSize=8192,i._augment=function(h){return h.__proto__=i.prototype,h},i.from=function(h,m,r){return t(null,h,m,r)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(h,m,r){return function(_,T,N,W){return g(T),T<=0?s(_,T):N!==void 0?typeof W=="string"?s(_,T).fill(N,W):s(_,T).fill(N):s(_,T)}(null,h,m,r)},i.allocUnsafe=function(h){return l(null,h)},i.allocUnsafeSlow=function(h){return l(null,h)},i.isBuffer=function(h){return!(h==null||!h._isBuffer)},i.compare=function(h,m){if(!i.isBuffer(h)||!i.isBuffer(m))throw new TypeError("Arguments must be Buffers");if(h===m)return 0;for(var r=h.length,_=m.length,T=0,N=Math.min(r,_);T<N;++T)if(h[T]!==m[T]){r=h[T],_=m[T];break}return r<_?-1:_<r?1:0},i.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(h,m){if(!c(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return i.alloc(0);var r;if(m===void 0)for(m=0,r=0;r<h.length;++r)m+=h[r].length;var _=i.allocUnsafe(m),T=0;for(r=0;r<h.length;++r){var N=h[r];if(!i.isBuffer(N))throw new TypeError('"list" argument must be an Array of Buffers');N.copy(_,T),T+=N.length}return _},i.byteLength=E,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var h=this.length;if(h%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<h;m+=2)k(this,m,m+1);return this},i.prototype.swap32=function(){var h=this.length;if(h%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<h;m+=4)k(this,m,m+3),k(this,m+1,m+2);return this},i.prototype.swap64=function(){var h=this.length;if(h%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<h;m+=8)k(this,m,m+7),k(this,m+1,m+6),k(this,m+2,m+5),k(this,m+3,m+4);return this},i.prototype.toString=function(){var h=0|this.length;return h===0?"":arguments.length===0?P(this,0,h):S.apply(this,arguments)},i.prototype.equals=function(h){if(!i.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h||i.compare(this,h)===0},i.prototype.inspect=function(){var h="",m=I.INSPECT_MAX_BYTES;return this.length>0&&(h=this.toString("hex",0,m).match(/.{2}/g).join(" "),this.length>m&&(h+=" ... ")),"<Buffer "+h+">"},i.prototype.compare=function(h,m,r,_,T){if(!i.isBuffer(h))throw new TypeError("Argument must be a Buffer");if(m===void 0&&(m=0),r===void 0&&(r=h?h.length:0),_===void 0&&(_=0),T===void 0&&(T=this.length),m<0||r>h.length||_<0||T>this.length)throw new RangeError("out of range index");if(_>=T&&m>=r)return 0;if(_>=T)return-1;if(m>=r)return 1;if(this===h)return 0;for(var N=(T>>>=0)-(_>>>=0),W=(r>>>=0)-(m>>>=0),V=Math.min(N,W),ot=this.slice(_,T),mt=h.slice(m,r),tt=0;tt<V;++tt)if(ot[tt]!==mt[tt]){N=ot[tt],W=mt[tt];break}return N<W?-1:W<N?1:0},i.prototype.includes=function(h,m,r){return this.indexOf(h,m,r)!==-1},i.prototype.indexOf=function(h,m,r){return b(this,h,m,r,!0)},i.prototype.lastIndexOf=function(h,m,r){return b(this,h,m,r,!1)},i.prototype.write=function(h,m,r,_){if(m===void 0)_="utf8",r=this.length,m=0;else if(r===void 0&&typeof m=="string")_=m,r=this.length,m=0;else{if(!isFinite(m))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");m|=0,isFinite(r)?(r|=0,_===void 0&&(_="utf8")):(_=r,r=void 0)}var T=this.length-m;if((r===void 0||r>T)&&(r=T),h.length>0&&(r<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");for(var N=!1;;)switch(_){case"hex":return u(this,h,m,r);case"utf8":case"utf-8":return x(this,h,m,r);case"ascii":return y(this,h,m,r);case"latin1":case"binary":return B(this,h,m,r);case"base64":return M(this,h,m,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,h,m,r);default:if(N)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),N=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function H(h,m,r){var _="";r=Math.min(h.length,r);for(var T=m;T<r;++T)_+=String.fromCharCode(127&h[T]);return _}function K(h,m,r){var _="";r=Math.min(h.length,r);for(var T=m;T<r;++T)_+=String.fromCharCode(h[T]);return _}function G(h,m,r){var _=h.length;(!m||m<0)&&(m=0),(!r||r<0||r>_)&&(r=_);for(var T="",N=m;N<r;++N)T+=ft(h[N]);return T}function R(h,m,r){for(var _=h.slice(m,r),T="",N=0;N<_.length;N+=2)T+=String.fromCharCode(_[N]+256*_[N+1]);return T}function q(h,m,r){if(h%1!=0||h<0)throw new RangeError("offset is not uint");if(h+m>r)throw new RangeError("Trying to access beyond buffer length")}function F(h,m,r,_,T,N){if(!i.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>T||m<N)throw new RangeError('"value" argument is out of bounds');if(r+_>h.length)throw new RangeError("Index out of range")}function z(h,m,r,_){m<0&&(m=65535+m+1);for(var T=0,N=Math.min(h.length-r,2);T<N;++T)h[r+T]=(m&255<<8*(_?T:1-T))>>>8*(_?T:1-T)}function O(h,m,r,_){m<0&&(m=4294967295+m+1);for(var T=0,N=Math.min(h.length-r,4);T<N;++T)h[r+T]=m>>>8*(_?T:3-T)&255}function C(h,m,r,_,T,N){if(r+_>h.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(h,m,r,_,T){return T||C(h,0,r,4),f.write(h,m,r,_,23,4),r+4}function L(h,m,r,_,T){return T||C(h,0,r,8),f.write(h,m,r,_,52,8),r+8}i.prototype.slice=function(h,m){var r,_=this.length;if((h=~~h)<0?(h+=_)<0&&(h=0):h>_&&(h=_),(m=m===void 0?_:~~m)<0?(m+=_)<0&&(m=0):m>_&&(m=_),m<h&&(m=h),i.TYPED_ARRAY_SUPPORT)(r=this.subarray(h,m)).__proto__=i.prototype;else{var T=m-h;r=new i(T,void 0);for(var N=0;N<T;++N)r[N]=this[N+h]}return r},i.prototype.readUIntLE=function(h,m,r){h|=0,m|=0,r||q(h,m,this.length);for(var _=this[h],T=1,N=0;++N<m&&(T*=256);)_+=this[h+N]*T;return _},i.prototype.readUIntBE=function(h,m,r){h|=0,m|=0,r||q(h,m,this.length);for(var _=this[h+--m],T=1;m>0&&(T*=256);)_+=this[h+--m]*T;return _},i.prototype.readUInt8=function(h,m){return m||q(h,1,this.length),this[h]},i.prototype.readUInt16LE=function(h,m){return m||q(h,2,this.length),this[h]|this[h+1]<<8},i.prototype.readUInt16BE=function(h,m){return m||q(h,2,this.length),this[h]<<8|this[h+1]},i.prototype.readUInt32LE=function(h,m){return m||q(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+16777216*this[h+3]},i.prototype.readUInt32BE=function(h,m){return m||q(h,4,this.length),16777216*this[h]+(this[h+1]<<16|this[h+2]<<8|this[h+3])},i.prototype.readIntLE=function(h,m,r){h|=0,m|=0,r||q(h,m,this.length);for(var _=this[h],T=1,N=0;++N<m&&(T*=256);)_+=this[h+N]*T;return _>=(T*=128)&&(_-=Math.pow(2,8*m)),_},i.prototype.readIntBE=function(h,m,r){h|=0,m|=0,r||q(h,m,this.length);for(var _=m,T=1,N=this[h+--_];_>0&&(T*=256);)N+=this[h+--_]*T;return N>=(T*=128)&&(N-=Math.pow(2,8*m)),N},i.prototype.readInt8=function(h,m){return m||q(h,1,this.length),128&this[h]?-1*(255-this[h]+1):this[h]},i.prototype.readInt16LE=function(h,m){m||q(h,2,this.length);var r=this[h]|this[h+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(h,m){m||q(h,2,this.length);var r=this[h+1]|this[h]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(h,m){return m||q(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},i.prototype.readInt32BE=function(h,m){return m||q(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},i.prototype.readFloatLE=function(h,m){return m||q(h,4,this.length),f.read(this,h,!0,23,4)},i.prototype.readFloatBE=function(h,m){return m||q(h,4,this.length),f.read(this,h,!1,23,4)},i.prototype.readDoubleLE=function(h,m){return m||q(h,8,this.length),f.read(this,h,!0,52,8)},i.prototype.readDoubleBE=function(h,m){return m||q(h,8,this.length),f.read(this,h,!1,52,8)},i.prototype.writeUIntLE=function(h,m,r,_){h=+h,m|=0,r|=0,_||F(this,h,m,r,Math.pow(2,8*r)-1,0);var T=1,N=0;for(this[m]=255&h;++N<r&&(T*=256);)this[m+N]=h/T&255;return m+r},i.prototype.writeUIntBE=function(h,m,r,_){h=+h,m|=0,r|=0,_||F(this,h,m,r,Math.pow(2,8*r)-1,0);var T=r-1,N=1;for(this[m+T]=255&h;--T>=0&&(N*=256);)this[m+T]=h/N&255;return m+r},i.prototype.writeUInt8=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,1,255,0),i.TYPED_ARRAY_SUPPORT||(h=Math.floor(h)),this[m]=255&h,m+1},i.prototype.writeUInt16LE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[m]=255&h,this[m+1]=h>>>8):z(this,h,m,!0),m+2},i.prototype.writeUInt16BE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[m]=h>>>8,this[m+1]=255&h):z(this,h,m,!1),m+2},i.prototype.writeUInt32LE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[m+3]=h>>>24,this[m+2]=h>>>16,this[m+1]=h>>>8,this[m]=255&h):O(this,h,m,!0),m+4},i.prototype.writeUInt32BE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=255&h):O(this,h,m,!1),m+4},i.prototype.writeIntLE=function(h,m,r,_){if(h=+h,m|=0,!_){var T=Math.pow(2,8*r-1);F(this,h,m,r,T-1,-T)}var N=0,W=1,V=0;for(this[m]=255&h;++N<r&&(W*=256);)h<0&&V===0&&this[m+N-1]!==0&&(V=1),this[m+N]=(h/W>>0)-V&255;return m+r},i.prototype.writeIntBE=function(h,m,r,_){if(h=+h,m|=0,!_){var T=Math.pow(2,8*r-1);F(this,h,m,r,T-1,-T)}var N=r-1,W=1,V=0;for(this[m+N]=255&h;--N>=0&&(W*=256);)h<0&&V===0&&this[m+N+1]!==0&&(V=1),this[m+N]=(h/W>>0)-V&255;return m+r},i.prototype.writeInt8=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,1,127,-128),i.TYPED_ARRAY_SUPPORT||(h=Math.floor(h)),h<0&&(h=255+h+1),this[m]=255&h,m+1},i.prototype.writeInt16LE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[m]=255&h,this[m+1]=h>>>8):z(this,h,m,!0),m+2},i.prototype.writeInt16BE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[m]=h>>>8,this[m+1]=255&h):z(this,h,m,!1),m+2},i.prototype.writeInt32LE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[m]=255&h,this[m+1]=h>>>8,this[m+2]=h>>>16,this[m+3]=h>>>24):O(this,h,m,!0),m+4},i.prototype.writeInt32BE=function(h,m,r){return h=+h,m|=0,r||F(this,h,m,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),i.TYPED_ARRAY_SUPPORT?(this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=255&h):O(this,h,m,!1),m+4},i.prototype.writeFloatLE=function(h,m,r){return U(this,h,m,!0,r)},i.prototype.writeFloatBE=function(h,m,r){return U(this,h,m,!1,r)},i.prototype.writeDoubleLE=function(h,m,r){return L(this,h,m,!0,r)},i.prototype.writeDoubleBE=function(h,m,r){return L(this,h,m,!1,r)},i.prototype.copy=function(h,m,r,_){if(r||(r=0),_||_===0||(_=this.length),m>=h.length&&(m=h.length),m||(m=0),_>0&&_<r&&(_=r),_===r||h.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),h.length-m<_-r&&(_=h.length-m+r);var T,N=_-r;if(this===h&&r<m&&m<_)for(T=N-1;T>=0;--T)h[T+m]=this[T+r];else if(N<1e3||!i.TYPED_ARRAY_SUPPORT)for(T=0;T<N;++T)h[T+m]=this[T+r];else Uint8Array.prototype.set.call(h,this.subarray(r,r+N),m);return N},i.prototype.fill=function(h,m,r,_){if(typeof h=="string"){if(typeof m=="string"?(_=m,m=0,r=this.length):typeof r=="string"&&(_=r,r=this.length),h.length===1){var T=h.charCodeAt(0);T<256&&(h=T)}if(_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!i.isEncoding(_))throw new TypeError("Unknown encoding: "+_)}else typeof h=="number"&&(h&=255);if(m<0||this.length<m||this.length<r)throw new RangeError("Out of range index");if(r<=m)return this;var N;if(m>>>=0,r=r===void 0?this.length:r>>>0,h||(h=0),typeof h=="number")for(N=m;N<r;++N)this[N]=h;else{var W=i.isBuffer(h)?h:ut(new i(h,_).toString()),V=W.length;for(N=0;N<r-m;++N)this[N+m]=W[N%V]}return this};var Z=/[^+\/0-9A-Za-z-_]/g;function ft(h){return h<16?"0"+h.toString(16):h.toString(16)}function ut(h,m){var r;m=m||1/0;for(var _=h.length,T=null,N=[],W=0;W<_;++W){if((r=h.charCodeAt(W))>55295&&r<57344){if(!T){if(r>56319){(m-=3)>-1&&N.push(239,191,189);continue}if(W+1===_){(m-=3)>-1&&N.push(239,191,189);continue}T=r;continue}if(r<56320){(m-=3)>-1&&N.push(239,191,189),T=r;continue}r=65536+(T-55296<<10|r-56320)}else T&&(m-=3)>-1&&N.push(239,191,189);if(T=null,r<128){if((m-=1)<0)break;N.push(r)}else if(r<2048){if((m-=2)<0)break;N.push(r>>6|192,63&r|128)}else if(r<65536){if((m-=3)<0)break;N.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((m-=4)<0)break;N.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return N}function vt(h){return a.toByteArray(function(m){if((m=function(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}(m).replace(Z,"")).length<2)return"";for(;m.length%4!=0;)m+="=";return m}(h))}function rt(h,m,r,_){for(var T=0;T<_&&!(T+r>=m.length||T>=h.length);++T)m[T+r]=h[T];return T}}).call(this,n(12))},function(w,I,n){(function(o){function a(f){return Object.prototype.toString.call(f)}I.isArray=function(f){return Array.isArray?Array.isArray(f):a(f)==="[object Array]"},I.isBoolean=function(f){return typeof f=="boolean"},I.isNull=function(f){return f===null},I.isNullOrUndefined=function(f){return f==null},I.isNumber=function(f){return typeof f=="number"},I.isString=function(f){return typeof f=="string"},I.isSymbol=function(f){return typeof f=="symbol"},I.isUndefined=function(f){return f===void 0},I.isRegExp=function(f){return a(f)==="[object RegExp]"},I.isObject=function(f){return typeof f=="object"&&f!==null},I.isDate=function(f){return a(f)==="[object Date]"},I.isError=function(f){return a(f)==="[object Error]"||f instanceof Error},I.isFunction=function(f){return typeof f=="function"},I.isPrimitive=function(f){return f===null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||typeof f=="symbol"||f===void 0},I.isBuffer=o.isBuffer}).call(this,n(24).Buffer)},function(w,I,n){w.exports=n(190)},function(w,I,n){(function(o){var a=Object.getOwnPropertyDescriptors||function(R){for(var q=Object.keys(R),F={},z=0;z<q.length;z++)F[q[z]]=Object.getOwnPropertyDescriptor(R,q[z]);return F},f=/%[sdj%]/g;I.format=function(R){if(!b(R)){for(var q=[],F=0;F<arguments.length;F++)q.push(s(arguments[F]));return q.join(" ")}F=1;for(var z=arguments,O=z.length,C=String(R).replace(f,function(L){if(L==="%%")return"%";if(F>=O)return L;switch(L){case"%s":return String(z[F++]);case"%d":return Number(z[F++]);case"%j":try{return JSON.stringify(z[F++])}catch{return"[Circular]"}default:return L}}),U=z[F];F<O;U=z[++F])S(U)||!x(U)?C+=" "+U:C+=" "+s(U);return C},I.deprecate=function(R,q){if(o!==void 0&&o.noDeprecation===!0)return R;if(o===void 0)return function(){return I.deprecate(R,q).apply(this,arguments)};var F=!1;return function(){if(!F){if(o.throwDeprecation)throw new Error(q);o.traceDeprecation?console.trace(q):console.error(q),F=!0}return R.apply(this,arguments)}};var c,e={};function s(R,q){var F={seen:[],stylize:t};return arguments.length>=3&&(F.depth=arguments[2]),arguments.length>=4&&(F.colors=arguments[3]),E(q)?F.showHidden=q:q&&I._extend(F,q),v(F.showHidden)&&(F.showHidden=!1),v(F.depth)&&(F.depth=2),v(F.colors)&&(F.colors=!1),v(F.customInspect)&&(F.customInspect=!0),F.colors&&(F.stylize=i),g(F,R,F.depth)}function i(R,q){var F=s.styles[q];return F?"\x1B["+s.colors[F][0]+"m"+R+"\x1B["+s.colors[F][1]+"m":R}function t(R,q){return R}function g(R,q,F){if(R.customInspect&&q&&M(q.inspect)&&q.inspect!==I.inspect&&(!q.constructor||q.constructor.prototype!==q)){var z=q.inspect(F,R);return b(z)||(z=g(R,z,F)),z}var O=function(rt,h){if(v(h))return rt.stylize("undefined","undefined");if(b(h)){var m="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return rt.stylize(m,"string")}if(k(h))return rt.stylize(""+h,"number");if(E(h))return rt.stylize(""+h,"boolean");if(S(h))return rt.stylize("null","null")}(R,q);if(O)return O;var C=Object.keys(q),U=function(rt){var h={};return rt.forEach(function(m,r){h[m]=!0}),h}(C);if(R.showHidden&&(C=Object.getOwnPropertyNames(q)),B(q)&&(C.indexOf("message")>=0||C.indexOf("description")>=0))return l(q);if(C.length===0){if(M(q)){var L=q.name?": "+q.name:"";return R.stylize("[Function"+L+"]","special")}if(u(q))return R.stylize(RegExp.prototype.toString.call(q),"regexp");if(y(q))return R.stylize(Date.prototype.toString.call(q),"date");if(B(q))return l(q)}var Z,ft="",ut=!1,vt=["{","}"];return d(q)&&(ut=!0,vt=["[","]"]),M(q)&&(ft=" [Function"+(q.name?": "+q.name:"")+"]"),u(q)&&(ft=" "+RegExp.prototype.toString.call(q)),y(q)&&(ft=" "+Date.prototype.toUTCString.call(q)),B(q)&&(ft=" "+l(q)),C.length!==0||ut&&q.length!=0?F<0?u(q)?R.stylize(RegExp.prototype.toString.call(q),"regexp"):R.stylize("[Object]","special"):(R.seen.push(q),Z=ut?function(rt,h,m,r,_){for(var T=[],N=0,W=h.length;N<W;++N)H(h,String(N))?T.push(p(rt,h,m,r,String(N),!0)):T.push("");return _.forEach(function(V){V.match(/^\d+$/)||T.push(p(rt,h,m,r,V,!0))}),T}(R,q,F,U,C):C.map(function(rt){return p(R,q,F,U,rt,ut)}),R.seen.pop(),function(rt,h,m){return rt.reduce(function(r,_){return _.indexOf(`
`)>=0,r+_.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?m[0]+(h===""?"":h+`
 `)+" "+rt.join(`,
  `)+" "+m[1]:m[0]+h+" "+rt.join(", ")+" "+m[1]}(Z,ft,vt)):vt[0]+ft+vt[1]}function l(R){return"["+Error.prototype.toString.call(R)+"]"}function p(R,q,F,z,O,C){var U,L,Z;if((Z=Object.getOwnPropertyDescriptor(q,O)||{value:q[O]}).get?L=Z.set?R.stylize("[Getter/Setter]","special"):R.stylize("[Getter]","special"):Z.set&&(L=R.stylize("[Setter]","special")),H(z,O)||(U="["+O+"]"),L||(R.seen.indexOf(Z.value)<0?(L=S(F)?g(R,Z.value,null):g(R,Z.value,F-1)).indexOf(`
`)>-1&&(L=C?L.split(`
`).map(function(ft){return"  "+ft}).join(`
`).substr(2):`
`+L.split(`
`).map(function(ft){return"   "+ft}).join(`
`)):L=R.stylize("[Circular]","special")),v(U)){if(C&&O.match(/^\d+$/))return L;(U=JSON.stringify(""+O)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(U=U.substr(1,U.length-2),U=R.stylize(U,"name")):(U=U.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),U=R.stylize(U,"string"))}return U+": "+L}function d(R){return Array.isArray(R)}function E(R){return typeof R=="boolean"}function S(R){return R===null}function k(R){return typeof R=="number"}function b(R){return typeof R=="string"}function v(R){return R===void 0}function u(R){return x(R)&&D(R)==="[object RegExp]"}function x(R){return typeof R=="object"&&R!==null}function y(R){return x(R)&&D(R)==="[object Date]"}function B(R){return x(R)&&(D(R)==="[object Error]"||R instanceof Error)}function M(R){return typeof R=="function"}function D(R){return Object.prototype.toString.call(R)}function A(R){return R<10?"0"+R.toString(10):R.toString(10)}I.debuglog=function(R){if(v(c)&&(c=o.env.NODE_DEBUG||""),R=R.toUpperCase(),!e[R])if(new RegExp("\\b"+R+"\\b","i").test(c)){var q=o.pid;e[R]=function(){var F=I.format.apply(I,arguments);console.error("%s %d: %s",R,q,F)}}else e[R]=function(){};return e[R]},I.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},I.isArray=d,I.isBoolean=E,I.isNull=S,I.isNullOrUndefined=function(R){return R==null},I.isNumber=k,I.isString=b,I.isSymbol=function(R){return typeof R=="symbol"},I.isUndefined=v,I.isRegExp=u,I.isObject=x,I.isDate=y,I.isError=B,I.isFunction=M,I.isPrimitive=function(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||R===void 0},I.isBuffer=n(89);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var R=new Date,q=[A(R.getHours()),A(R.getMinutes()),A(R.getSeconds())].join(":");return[R.getDate(),P[R.getMonth()],q].join(" ")}function H(R,q){return Object.prototype.hasOwnProperty.call(R,q)}I.log=function(){console.log("%s - %s",j(),I.format.apply(I,arguments))},I.inherits=n(90),I._extend=function(R,q){if(!q||!x(q))return R;for(var F=Object.keys(q),z=F.length;z--;)R[F[z]]=q[F[z]];return R};var K=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function G(R,q){if(!R){var F=new Error("Promise was rejected with a falsy value");F.reason=R,R=F}return q(R)}I.promisify=function(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');if(K&&R[K]){var q;if(typeof(q=R[K])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(q,K,{value:q,enumerable:!1,writable:!1,configurable:!0}),q}function q(){for(var F,z,O=new Promise(function(L,Z){F=L,z=Z}),C=[],U=0;U<arguments.length;U++)C.push(arguments[U]);C.push(function(L,Z){L?z(L):F(Z)});try{R.apply(this,C)}catch(L){z(L)}return O}return Object.setPrototypeOf(q,Object.getPrototypeOf(R)),K&&Object.defineProperty(q,K,{value:q,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(q,a(R))},I.promisify.custom=K,I.callbackify=function(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function q(){for(var F=[],z=0;z<arguments.length;z++)F.push(arguments[z]);var O=F.pop();if(typeof O!="function")throw new TypeError("The last argument must be of type Function");var C=this,U=function(){return O.apply(C,arguments)};R.apply(this,F).then(function(L){o.nextTick(U,null,L)},function(L){o.nextTick(G,L,U)})}return Object.setPrototypeOf(q,Object.getPrototypeOf(R)),Object.defineProperties(q,a(R)),q}}).call(this,n(9))},function(w,I,n){(I=w.exports=n(48)).Stream=I,I.Readable=I,I.Writable=n(52),I.Duplex=n(18),I.Transform=n(54),I.PassThrough=n(101)},function(w,I,n){w.exports=n(57)()?Object.setPrototypeOf:n(58)},function(w,I,n){w.exports=n(127)()?globalThis:n(128)},function(w,I,n){var o=Object.prototype.toString,a=o.call(function(){return arguments}());w.exports=function(f){return o.call(f)===a}},function(w,I,n){var o=Object.prototype.toString,a=o.call("");w.exports=function(f){return typeof f=="string"||f&&typeof f=="object"&&(f instanceof String||o.call(f)===a)||!1}},function(w,I){w.exports=function(n){return n==null}},function(w,I,n){var o=Object.prototype.hasOwnProperty,a=Array.isArray,f=function(){for(var e=[],s=0;s<256;++s)e.push("%"+((s<16?"0":"")+s.toString(16)).toUpperCase());return e}(),c=function(e,s){for(var i=s&&s.plainObjects?Object.create(null):{},t=0;t<e.length;++t)e[t]!==void 0&&(i[t]=e[t]);return i};w.exports={arrayToObject:c,assign:function(e,s){return Object.keys(s).reduce(function(i,t){return i[t]=s[t],i},e)},combine:function(e,s){return[].concat(e,s)},compact:function(e){for(var s=[{obj:{o:e},prop:"o"}],i=[],t=0;t<s.length;++t)for(var g=s[t],l=g.obj[g.prop],p=Object.keys(l),d=0;d<p.length;++d){var E=p[d],S=l[E];typeof S=="object"&&S!==null&&i.indexOf(S)===-1&&(s.push({obj:l,prop:E}),i.push(S))}return function(k){for(;k.length>1;){var b=k.pop(),v=b.obj[b.prop];if(a(v)){for(var u=[],x=0;x<v.length;++x)v[x]!==void 0&&u.push(v[x]);b.obj[b.prop]=u}}}(s),e},decode:function(e,s,i){var t=e.replace(/\+/g," ");if(i==="iso-8859-1")return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch{return t}},encode:function(e,s,i){if(e.length===0)return e;var t=e;if(typeof e=="symbol"?t=Symbol.prototype.toString.call(e):typeof e!="string"&&(t=String(e)),i==="iso-8859-1")return escape(t).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var g="",l=0;l<t.length;++l){var p=t.charCodeAt(l);p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122?g+=t.charAt(l):p<128?g+=f[p]:p<2048?g+=f[192|p>>6]+f[128|63&p]:p<55296||p>=57344?g+=f[224|p>>12]+f[128|p>>6&63]+f[128|63&p]:(l+=1,p=65536+((1023&p)<<10|1023&t.charCodeAt(l)),g+=f[240|p>>18]+f[128|p>>12&63]+f[128|p>>6&63]+f[128|63&p])}return g},isBuffer:function(e){return!(!e||typeof e!="object")&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},maybeMap:function(e,s){if(a(e)){for(var i=[],t=0;t<e.length;t+=1)i.push(s(e[t]));return i}return s(e)},merge:function e(s,i,t){if(!i)return s;if(typeof i!="object"){if(a(s))s.push(i);else{if(!s||typeof s!="object")return[s,i];(t&&(t.plainObjects||t.allowPrototypes)||!o.call(Object.prototype,i))&&(s[i]=!0)}return s}if(!s||typeof s!="object")return[s].concat(i);var g=s;return a(s)&&!a(i)&&(g=c(s,t)),a(s)&&a(i)?(i.forEach(function(l,p){if(o.call(s,p)){var d=s[p];d&&typeof d=="object"&&l&&typeof l=="object"?s[p]=e(d,l,t):s.push(l)}else s[p]=l}),s):Object.keys(i).reduce(function(l,p){var d=i[p];return o.call(l,p)?l[p]=e(l[p],d,t):l[p]=d,l},g)}}},function(w,I,n){(function(o){var a=n(15),f=n(27).inherits,c=n(91),e=n(179),s=n(72),i=n(181),t=n(33),g=n(182),l=n(184),p=n(44);function d(u){return u>9?u:"0"+u}function E(u,x,y,B,M,D,A,P,j,H,K,G,R,q){var F=u+`
`+B+`
`+M+`
`+("host:"+y.toLowerCase()+`
`)+`
host
`+s(H,{asBytes:!0});R===!0&&console.log("canonical request: "+F+`
`);var z=s(F,{asBytes:!0});R===!0&&console.log("hashed canonical request: "+z+`
`);var O=`AWS4-HMAC-SHA256
`+G+`
`+K+"/"+P+"/"+j+`/aws4_request
`+z;R===!0&&console.log("string to sign: "+O+`
`);var C=function(ft,ut,vt,rt){var h=e(ut,"AWS4"+ft,{asBytes:!0}),m=e(vt,h,{asBytes:!0}),r=e(rt,m,{asBytes:!0});return e("aws4_request",r,{asBytes:!0})}(A,K,P,j);R===!0&&console.log("signing key: "+C+`
`);var U=e(O,C,{asBytes:!0});R===!0&&console.log("signature: "+U+`
`);var L=M+"&X-Amz-Signature="+U;t(q)||(L+="&X-Amz-Security-Token="+encodeURIComponent(q));var Z=x+y+B+"?"+L;return R===!0&&console.log("url: "+Z+`
`),Z}function S(u,x,y,B){var M,D,A=(M=new Date).getUTCFullYear()+""+d(M.getUTCMonth()+1)+d(M.getUTCDate())+"T"+d(M.getUTCHours())+d(M.getUTCMinutes())+d(M.getUTCSeconds())+"Z",P=(D=A).substring(0,D.indexOf("T")),j="iotdevicegateway",H="X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential="+x+"%2F"+P+"%2F"+u.region+"%2F"+j+"%2Faws4_request&X-Amz-Date="+A+"&X-Amz-SignedHeaders=host",K=u.host;return t(u.port)||u.port===443||(K=u.host+":"+u.port),E("GET","wss://",K,"/mqtt",H,0,y,u.region,j,"",P,A,u.debug,B)}function k(u){var x=u.host;return t(u.port)||u.port===443||(x=u.host+":"+u.port),"wss://"+x+"/mqtt"}function b(u){var x={},y={};return function(B,M){for(var D in B)Object.prototype.hasOwnProperty.call(B,D)&&M.call(this,B[D],parseInt(D,10))}(u.split(/\r?\n/),function(B){var M=(B=B.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)\]\s*$/);if(M)y=M[1];else if(y){var D=B.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);D&&(x[y]=x[y]||{},x[y][D[1]]=D[2])}}),x}function v(u){if(!(this instanceof v))return new v(u);var x=this,y=[],B=!0,M=0,D="oldest";y.length=0;var A=[];A.length=0;var P=[],j=!0;P.length=0;var H=[];H.length=0;var K,G,R,q,F,z="inactive",O=null,C=250,U=1e3,L=2e4,Z=128e3,ft=null,ut="?SDK=JavaScript&Version="+n(185).version;if(t(u)||Object.keys(u).length===0)throw new Error(i.INVALID_CONNECT_OPTIONS);if(t(u.keepalive)&&(u.keepalive=300),(t(u.enableMetrics)||u.enableMetrics===!0)&&(t(u.username)?u.username=ut:u.username+=ut),t(u.baseReconnectTimeMs)||(U=u.baseReconnectTimeMs),t(u.minimumConnectionTimeMs)||(L=u.minimumConnectionTimeMs),t(u.maximumReconnectTimeMs)||(Z=u.maximumReconnectTimeMs),t(u.drainTimeMs)||(C=u.drainTimeMs),t(u.autoResubscribe)||(j=u.autoResubscribe),t(u.offlineQueueing)||(B=u.offlineQueueing),t(u.offlineQueueMaxSize)||(M=u.offlineQueueMaxSize),t(u.offlineQueueDropBehavior)||(D=u.offlineQueueDropBehavior),K=U,u.reconnectPeriod=K,u.fastDisconnectDetection=!0,u.resubscribe=!1,u.baseReconnectTimeMs<=0)throw new Error(i.INVALID_RECONNECT_TIMING);if(Z<U)throw new Error(i.INVALID_RECONNECT_TIMING);if(L<U)throw new Error(i.INVALID_RECONNECT_TIMING);if(D!=="newest"&&D!=="oldest")throw new Error(i.INVALID_OFFLINE_QUEUEING_PARAMETERS);if(M<0)throw new Error(i.INVALID_OFFLINE_QUEUEING_PARAMETERS);if(t(u.protocol)&&(u.protocol="mqtts"),t(u.host))throw new Error(i.INVALID_CONNECT_OPTIONS);if(u.protocol==="mqtts")t(u.port)&&(u.port=8883),g(u);else if(u.protocol==="wss"||u.protocol==="wss-custom-auth"){if(u.protocol==="wss"){var vt;if(G=t(u.accessKeyId)?o.env.AWS_ACCESS_KEY_ID:u.accessKeyId,R=t(u.secretKey)?o.env.AWS_SECRET_ACCESS_KEY:u.secretKey,q=t(u.sessionToken)?o.env.AWS_SESSION_TOKEN:u.sessionToken,t(G)||t(R))try{t(u.filename)?(F=o.env.HOME||o.env.USERPROFILE||(o.env.HOMEPATH?(o.env.HOMEDRIVE||"C:/")+o.env.HOMEPATH:null),vt=l.join(F,".aws","credentials")):vt=u.filename;var rt=u.profile||o.env.AWS_PROFILE||"default",h=b(p.readFileSync(vt,"utf-8"))[rt];G=h.aws_access_key_id,R=h.aws_secret_access_key,q=h.aws_session_token}catch(tt){console.log(tt),console.log("Failed to read credentials from "+vt)}if(t(G)||t(R))throw console.log("To connect via WebSocket/SigV4, AWS Access Key ID and AWS Secret Key must be passed either in options or as environment variables; see README.md"),new Error(i.INVALID_CONNECT_OPTIONS)}else if(t(u.customAuthHeaders))throw console.log("To authenticate with a custom authorizer, you must provide the required HTTP headers; see README.md"),new Error(i.INVALID_CONNECT_OPTIONS);if(!t(u.host)&&t(u.region)){var m=/[a-zA-Z0-9]+\.iot\.([a-z]+-[a-z]+-[0-9]+)\.amazonaws\..+/.exec(u.host);if(m===null)throw console.log("Host endpoint is not valid"),new Error(i.INVALID_CONNECT_OPTIONS);u.region=m[1]}t(u.port)&&(u.port=443),t(u.websocketOptions)?u.websocketOptions={protocol:"mqttv3.1"}:u.websocketOptions.protocol="mqttv3.1",u.protocol==="wss-custom-auth"&&(u.websocketOptions.headers=u.customAuthHeaders)}t(u)||u.debug!==!0||(console.log(u),console.log("attempting new mqtt connection..."));var r={};function _(tt,dt){P.filter(function(ht){return ht.topic===tt}).length===0&&P.push({topic:tt,options:dt})}function T(tt,dt){var ht=P.filter(function(Wt){return Wt.topic!==tt});P=ht}function N(tt,dt,ht){var Wt=null;j!==!1&&(tt==="subscribe"?Wt=_:tt==="unsubscribe"&&(Wt=T),Object.prototype.toString.call(dt)==="[object Array]"?dt.forEach(function(Kt,Qt,ie){Wt(Kt,ht)}):Wt(dt,ht))}function W(){return z==="inactive"}r.mqtts=n(186),r.wss=n(187);var V=new c.MqttClient(function(tt){var dt,ht=u.protocol;return ht==="wss"?(dt=G===""||R===""?"wss://no-credentials-available":S(u,G,R,q),u.debug===!0&&console.log("using websockets, will connect to '"+dt+"'..."),u.url=dt):ht==="wss-custom-auth"&&(u.url=k(u),u.debug===!0&&console.log("using websockets custom auth, will connect to '"+u.url+"'..."),ht="wss"),r[ht](tt,u)},u);function ot(){K=U,V.options.reconnectPeriod=K,ft=null,z="stable"}function mt(){var tt=H.shift();if(t(tt)){var dt=A.shift();if(t(dt)){var ht=y.shift();t(ht)||V.publish(ht.topic,ht.message,ht.options,ht.callback),y.length===0&&(clearInterval(O),O=null)}else N(dt.type,dt.topics,dt.options),dt.type==="subscribe"?t(dt.callback)?V.subscribe(dt.topics,dt.options):V.subscribe(dt.topics,dt.options,dt.callback):dt.type==="unsubscribe"&&V.unsubscribe(dt.topics,dt.callback)}else t(tt.callback)?V.subscribe(tt.topic,tt.options):V.subscribe(tt.topic,tt.options,tt.callback)}V.on("connect",function(tt){ft===null&&(ft=setTimeout(ot,L)),z="established",O===null&&(H=P.slice(0),O=setInterval(mt,C)),x.emit("connect",tt)}),V.on("close",function(tt){t(tt)||x.emit("error",tt),t(u)||u.debug!==!0||console.log("connection lost - will attempt reconnection in "+V.options.reconnectPeriod/1e3+" seconds..."),clearTimeout(ft),ft=null,clearInterval(O),O=null,z="inactive",x.emit("close")}),V.on("reconnect",function(){K*=2,K=Math.min(Z,K),V.options.reconnectPeriod=K,x.emit("reconnect")}),V.on("offline",function(){x.emit("offline")}),V.on("error",function(tt){x.emit("error",tt)}),V.on("packetsend",function(tt){x.emit("packetsend",tt)}),V.on("packetreceive",function(tt){x.emit("packetreceive",tt)}),V.on("message",function(tt,dt,ht){x.emit("message",tt,dt,ht)}),this.publish=function(tt,dt,ht,Wt){var Kt;B!==!0||!W()&&O===null?B!==!0&&W()||V.publish(tt,dt,ht,Wt):(Kt=!0,M>0&&y.length>=M&&(D==="oldest"?y.shift():Kt=!1),Kt&&y.push({topic:tt,message:dt,options:ht,callback:Wt}))},this.subscribe=function(tt,dt,ht){W()&&j!==!1?A.length<50?A.push({type:"subscribe",topics:tt,options:dt,callback:ht}):x.emit("error",new Error("Maximum queued offline subscription reached")):(N("subscribe",tt,dt),t(ht)?V.subscribe(tt,dt):V.subscribe(tt,dt,ht))},this.unsubscribe=function(tt,dt){W()&&j!==!1?A.length<50&&A.push({type:"unsubscribe",topics:tt,options:u,callback:dt}):(N("unsubscribe",tt),V.unsubscribe(tt,dt))},this.end=function(tt,dt){V.end(tt,dt)},this.handleMessage=V.handleMessage.bind(V),V.handleMessage=function(tt,dt){x.handleMessage(tt,dt)},this.updateWebSocketCredentials=function(tt,dt,ht,Wt){G=tt,R=dt,q=ht},this.getWebsocketHeaders=function(){return u.websocketOptions.headers},this.updateCustomAuthHeaders=function(tt){u.websocketOptions.headers=tt},this.simulateNetworkFailure=function(){V.stream.emit("error",new Error("simulated connection error")),V.stream.end()}}f(v,a.EventEmitter),w.exports=v,w.exports.DeviceClient=v,w.exports.prepareWebSocketUrl=S,w.exports.prepareWebSocketCustomAuthUrl=k}).call(this,n(9))},function(w,I){w.exports=function(){for(var o={},a=0;a<arguments.length;a++){var f=arguments[a];for(var c in f)n.call(f,c)&&(o[c]=f[c])}return o};var n=Object.prototype.hasOwnProperty},function(w,I,n){var o=n(24),a=o.Buffer;function f(e,s){for(var i in e)s[i]=e[i]}function c(e,s,i){return a(e,s,i)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?w.exports=o:(f(o,I),I.Buffer=c),f(a,c),c.from=function(e,s,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return a(e,s,i)},c.alloc=function(e,s,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var t=a(e);return s!==void 0?typeof i=="string"?t.fill(s,i):t.fill(s):t.fill(0),t},c.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return a(e)},c.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(w,I,n){var o=n(22),a={object:!0,function:!0,undefined:!0};w.exports=function(f){return!!o(f)&&hasOwnProperty.call(a,typeof f)}},function(w,I,n){w.exports=n(118)()?Object.assign:n(119)},function(w,I,n){var o,a=n(55),f=n(39),c=n(20),e=n(14),s=n(11),i=n(138),t=n(16),g=Object.defineProperty,l=Object.defineProperties;w.exports=o=function(p,d){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");l(this,{__list__:s("w",e(p)),__context__:s("w",d),__nextIndex__:s("w",0)}),d&&(c(d.on),d.on("_add",this._onAdd),d.on("_delete",this._onDelete),d.on("_clear",this._onClear))},delete o.prototype.constructor,l(o.prototype,f({_next:s(function(){var p;if(this.__list__)return this.__redo__&&(p=this.__redo__.shift())!==void 0?p:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:s(function(){return this._createResult(this._next())}),_createResult:s(function(p){return p===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(p)}}),_resolve:s(function(p){return this.__list__[p]}),_unBind:s(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:s(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},i({_onAdd:s(function(p){p>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(d,E){d>=p&&(this.__redo__[E]=++d)},this),this.__redo__.push(p)):g(this,"__redo__",s("c",[p])))}),_onDelete:s(function(p){var d;p>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((d=this.__redo__.indexOf(p))!==-1&&this.__redo__.splice(d,1),this.__redo__.forEach(function(E,S){E>p&&(this.__redo__[S]=--E)},this)))}),_onClear:s(function(){this.__redo__&&a.call(this.__redo__),this.__nextIndex__=0})}))),g(o.prototype,t.iterator,s(function(){return this}))},function(w,I,n){var o=n(175);w.exports=function(a,f){var c;function e(s){f.rejectUnauthorized&&a.emit("error",s),c.end()}return f.port=f.port||8883,f.host=f.hostname||f.host||"localhost",f.rejectUnauthorized=f.rejectUnauthorized!==!1,delete f.path,(c=o.connect(f)).on("secureConnect",function(){f.rejectUnauthorized&&!c.authorized?c.emit("error",new Error("TLS not authorized")):c.removeListener("error",e)}),c.on("error",e),c}},function(w,I,n){(function(o,a){var f=n(28).Transform,c=n(176),e=n(178),s=n(19).Buffer;w.exports=function(i,t,g){var l,p,d=o.title==="browser",E=!!a.WebSocket,S=d?function P(j,H,K){if(p.bufferedAmount>b)return void setTimeout(P,v,j,H,K);x&&typeof j=="string"&&(j=s.from(j,"utf8"));try{p.send(j)}catch(G){return K(G)}K()}:function(P,j,H){if(p.readyState!==p.OPEN)return void H();x&&typeof P=="string"&&(P=s.from(P,"utf8")),p.send(P,H)};t&&!Array.isArray(t)&&typeof t=="object"&&(g=t,t=null,(typeof g.protocol=="string"||Array.isArray(g.protocol))&&(t=g.protocol)),g||(g={}),g.objectMode===void 0&&(g.objectMode=!(g.binary===!0||g.binary===void 0));var k=function(P,j,H){var K=new f({objectMode:P.objectMode});return K._write=j,K._flush=H,K}(g,S,function(P){p.close(),P()});g.objectMode||(k._writev=A);var b=g.browserBufferSize||524288,v=g.browserBufferTimeout||1e3;typeof i=="object"?p=i:(p=E&&d?new e(i,t):new e(i,t,g)).binaryType="arraybuffer";var u=p.addEventListener===void 0;p.readyState===p.OPEN?l=k:(l=l=c(void 0,void 0,g),g.objectMode||(l._writev=A),u?p.addEventListener("open",y):p.onopen=y),l.socket=p,u?(p.addEventListener("close",B),p.addEventListener("error",M),p.addEventListener("message",D)):(p.onclose=B,p.onerror=M,p.onmessage=D),k.on("close",function(){p.close()});var x=!g.objectMode;function y(){l.setReadable(k),l.setWritable(k),l.emit("connect")}function B(){l.end(),l.destroy()}function M(P){l.destroy(P)}function D(P){var j=P.data;j=j instanceof ArrayBuffer?s.from(j):s.from(j,"utf8"),k.push(j)}function A(P,j){for(var H=new Array(P.length),K=0;K<P.length;K++)typeof P[K].chunk=="string"?H[K]=s.from(P[K],"utf8"):H[K]=P[K].chunk;this._write(s.concat(H),"binary",j)}return l}}).call(this,n(9),n(12))},function(w,I,n){var o;w.exports=(o=o||function(a,f){var c={},e=c.lib={},s=e.Base=function(){function S(){}return{extend:function(k){S.prototype=this;var b=new S;return k&&b.mixIn(k),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var k=this.extend();return k.init.apply(k,arguments),k},init:function(){},mixIn:function(k){for(var b in k)k.hasOwnProperty(b)&&(this[b]=k[b]);k.hasOwnProperty("toString")&&(this.toString=k.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=e.WordArray=s.extend({init:function(S,k){S=this.words=S||[],this.sigBytes=k!=f?k:4*S.length},toString:function(S){return(S||g).stringify(this)},concat:function(S){var k=this.words,b=S.words,v=this.sigBytes,u=S.sigBytes;if(this.clamp(),v%4)for(var x=0;x<u;x++){var y=b[x>>>2]>>>24-x%4*8&255;k[v+x>>>2]|=y<<24-(v+x)%4*8}else for(x=0;x<u;x+=4)k[v+x>>>2]=b[x>>>2];return this.sigBytes+=u,this},clamp:function(){var S=this.words,k=this.sigBytes;S[k>>>2]&=4294967295<<32-k%4*8,S.length=a.ceil(k/4)},clone:function(){var S=s.clone.call(this);return S.words=this.words.slice(0),S},random:function(S){for(var k,b=[],v=function(y){y=y;var B=987654321,M=4294967295;return function(){var D=((B=36969*(65535&B)+(B>>16)&M)<<16)+(y=18e3*(65535&y)+(y>>16)&M)&M;return D/=4294967296,(D+=.5)*(a.random()>.5?1:-1)}},u=0;u<S;u+=4){var x=v(4294967296*(k||a.random()));k=987654071*x(),b.push(4294967296*x()|0)}return new i.init(b,S)}}),t=c.enc={},g=t.Hex={stringify:function(S){for(var k=S.words,b=S.sigBytes,v=[],u=0;u<b;u++){var x=k[u>>>2]>>>24-u%4*8&255;v.push((x>>>4).toString(16)),v.push((15&x).toString(16))}return v.join("")},parse:function(S){for(var k=S.length,b=[],v=0;v<k;v+=2)b[v>>>3]|=parseInt(S.substr(v,2),16)<<24-v%8*4;return new i.init(b,k/2)}},l=t.Latin1={stringify:function(S){for(var k=S.words,b=S.sigBytes,v=[],u=0;u<b;u++){var x=k[u>>>2]>>>24-u%4*8&255;v.push(String.fromCharCode(x))}return v.join("")},parse:function(S){for(var k=S.length,b=[],v=0;v<k;v++)b[v>>>2]|=(255&S.charCodeAt(v))<<24-v%4*8;return new i.init(b,k)}},p=t.Utf8={stringify:function(S){try{return decodeURIComponent(escape(l.stringify(S)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(S){return l.parse(unescape(encodeURIComponent(S)))}},d=e.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(S){typeof S=="string"&&(S=p.parse(S)),this._data.concat(S),this._nDataBytes+=S.sigBytes},_process:function(S){var k=this._data,b=k.words,v=k.sigBytes,u=this.blockSize,x=v/(4*u),y=(x=S?a.ceil(x):a.max((0|x)-this._minBufferSize,0))*u,B=a.min(4*y,v);if(y){for(var M=0;M<y;M+=u)this._doProcessBlock(b,M);var D=b.splice(0,y);k.sigBytes-=B}return new i.init(D,B)},clone:function(){var S=s.clone.call(this);return S._data=this._data.clone(),S},_minBufferSize:0}),E=(e.Hasher=d.extend({cfg:s.extend(),init:function(S){this.cfg=this.cfg.extend(S),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(S){return this._append(S),this._process(),this},finalize:function(S){return S&&this._append(S),this._doFinalize()},blockSize:16,_createHelper:function(S){return function(k,b){return new S.init(b).finalize(k)}},_createHmacHelper:function(S){return function(k,b){return new E.HMAC.init(S,b).finalize(k)}}}),c.algo={});return c}(Math),o)},function(w,I){},function(w,I,n){var o,a;(function(f,c,e){typeof window<"u"&&n(88)?(a=typeof(o=e)=="function"?o.call(I,n,I,w):o)===void 0||(w.exports=a):w.exports?w.exports=e():c.exports?c.exports=e():c.Fingerprint2=e()})(0,this,function(){Array.isArray===void 0&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"});var f=function(r,_){r=[r[0]>>>16,65535&r[0],r[1]>>>16,65535&r[1]],_=[_[0]>>>16,65535&_[0],_[1]>>>16,65535&_[1]];var T=[0,0,0,0];return T[3]+=r[3]+_[3],T[2]+=T[3]>>>16,T[3]&=65535,T[2]+=r[2]+_[2],T[1]+=T[2]>>>16,T[2]&=65535,T[1]+=r[1]+_[1],T[0]+=T[1]>>>16,T[1]&=65535,T[0]+=r[0]+_[0],T[0]&=65535,[T[0]<<16|T[1],T[2]<<16|T[3]]},c=function(r,_){r=[r[0]>>>16,65535&r[0],r[1]>>>16,65535&r[1]],_=[_[0]>>>16,65535&_[0],_[1]>>>16,65535&_[1]];var T=[0,0,0,0];return T[3]+=r[3]*_[3],T[2]+=T[3]>>>16,T[3]&=65535,T[2]+=r[2]*_[3],T[1]+=T[2]>>>16,T[2]&=65535,T[2]+=r[3]*_[2],T[1]+=T[2]>>>16,T[2]&=65535,T[1]+=r[1]*_[3],T[0]+=T[1]>>>16,T[1]&=65535,T[1]+=r[2]*_[2],T[0]+=T[1]>>>16,T[1]&=65535,T[1]+=r[3]*_[1],T[0]+=T[1]>>>16,T[1]&=65535,T[0]+=r[0]*_[3]+r[1]*_[2]+r[2]*_[1]+r[3]*_[0],T[0]&=65535,[T[0]<<16|T[1],T[2]<<16|T[3]]},e=function(r,_){return(_%=64)===32?[r[1],r[0]]:_<32?[r[0]<<_|r[1]>>>32-_,r[1]<<_|r[0]>>>32-_]:(_-=32,[r[1]<<_|r[0]>>>32-_,r[0]<<_|r[1]>>>32-_])},s=function(r,_){return(_%=64)===0?r:_<32?[r[0]<<_|r[1]>>>32-_,r[1]<<_]:[r[1]<<_-32,0]},i=function(r,_){return[r[0]^_[0],r[1]^_[1]]},t=function(r){return r=i(r,[0,r[0]>>>1]),r=c(r,[4283543511,3981806797]),r=i(r,[0,r[0]>>>1]),r=c(r,[3301882366,444984403]),r=i(r,[0,r[0]>>>1])},g=function(r,_){_=_||0;for(var T=(r=r||"").length%16,N=r.length-T,W=[0,_],V=[0,_],ot=[0,0],mt=[0,0],tt=[2277735313,289559509],dt=[1291169091,658871167],ht=0;ht<N;ht+=16)ot=[255&r.charCodeAt(ht+4)|(255&r.charCodeAt(ht+5))<<8|(255&r.charCodeAt(ht+6))<<16|(255&r.charCodeAt(ht+7))<<24,255&r.charCodeAt(ht)|(255&r.charCodeAt(ht+1))<<8|(255&r.charCodeAt(ht+2))<<16|(255&r.charCodeAt(ht+3))<<24],mt=[255&r.charCodeAt(ht+12)|(255&r.charCodeAt(ht+13))<<8|(255&r.charCodeAt(ht+14))<<16|(255&r.charCodeAt(ht+15))<<24,255&r.charCodeAt(ht+8)|(255&r.charCodeAt(ht+9))<<8|(255&r.charCodeAt(ht+10))<<16|(255&r.charCodeAt(ht+11))<<24],ot=c(ot,tt),ot=e(ot,31),ot=c(ot,dt),W=i(W,ot),W=e(W,27),W=f(W,V),W=f(c(W,[0,5]),[0,1390208809]),mt=c(mt,dt),mt=e(mt,33),mt=c(mt,tt),V=i(V,mt),V=e(V,31),V=f(V,W),V=f(c(V,[0,5]),[0,944331445]);switch(ot=[0,0],mt=[0,0],T){case 15:mt=i(mt,s([0,r.charCodeAt(ht+14)],48));case 14:mt=i(mt,s([0,r.charCodeAt(ht+13)],40));case 13:mt=i(mt,s([0,r.charCodeAt(ht+12)],32));case 12:mt=i(mt,s([0,r.charCodeAt(ht+11)],24));case 11:mt=i(mt,s([0,r.charCodeAt(ht+10)],16));case 10:mt=i(mt,s([0,r.charCodeAt(ht+9)],8));case 9:mt=i(mt,[0,r.charCodeAt(ht+8)]),mt=c(mt,dt),mt=e(mt,33),mt=c(mt,tt),V=i(V,mt);case 8:ot=i(ot,s([0,r.charCodeAt(ht+7)],56));case 7:ot=i(ot,s([0,r.charCodeAt(ht+6)],48));case 6:ot=i(ot,s([0,r.charCodeAt(ht+5)],40));case 5:ot=i(ot,s([0,r.charCodeAt(ht+4)],32));case 4:ot=i(ot,s([0,r.charCodeAt(ht+3)],24));case 3:ot=i(ot,s([0,r.charCodeAt(ht+2)],16));case 2:ot=i(ot,s([0,r.charCodeAt(ht+1)],8));case 1:ot=i(ot,[0,r.charCodeAt(ht)]),ot=c(ot,tt),ot=e(ot,31),ot=c(ot,dt),W=i(W,ot)}return W=i(W,[0,r.length]),V=i(V,[0,r.length]),W=f(W,V),V=f(V,W),W=t(W),V=t(V),W=f(W,V),V=f(V,W),("00000000"+(W[0]>>>0).toString(16)).slice(-8)+("00000000"+(W[1]>>>0).toString(16)).slice(-8)+("00000000"+(V[0]>>>0).toString(16)).slice(-8)+("00000000"+(V[1]>>>0).toString(16)).slice(-8)},l={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},p=function(r,_){if(Array.prototype.forEach&&r.forEach===Array.prototype.forEach)r.forEach(_);else if(r.length===+r.length)for(var T=0,N=r.length;T<N;T++)_(r[T],T,r);else for(var W in r)r.hasOwnProperty(W)&&_(r[W],W,r)},d=function(r,_){var T=[];return r==null?T:Array.prototype.map&&r.map===Array.prototype.map?r.map(_):(p(r,function(N,W,V){T.push(_(N,W,V))}),T)},E=function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices},S=function(r){var _=[window.screen.width,window.screen.height];return r.screen.detectScreenOrientation&&_.sort().reverse(),_},k=function(r){if(window.screen.availWidth&&window.screen.availHeight){var _=[window.screen.availHeight,window.screen.availWidth];return r.screen.detectScreenOrientation&&_.sort().reverse(),_}return r.NOT_AVAILABLE},b=function(r){if(navigator.plugins==null)return r.NOT_AVAILABLE;for(var _=[],T=0,N=navigator.plugins.length;T<N;T++)navigator.plugins[T]&&_.push(navigator.plugins[T]);return u(r)&&(_=_.sort(function(W,V){return W.name>V.name?1:W.name<V.name?-1:0})),d(_,function(W){var V=d(W,function(ot){return[ot.type,ot.suffixes]});return[W.name,W.description,V]})},v=function(r){var _=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?_=d(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],function(T){try{return new window.ActiveXObject(T),T}catch{return r.ERROR}}):_.push(r.NOT_AVAILABLE),navigator.plugins&&(_=_.concat(b(r))),_},u=function(r){for(var _=!1,T=0,N=r.plugins.sortPluginsFor.length;T<N;T++){var W=r.plugins.sortPluginsFor[T];if(navigator.userAgent.match(W)){_=!0;break}}return _},x=function(r){try{return!!window.sessionStorage}catch{return r.ERROR}},y=function(r){try{return!!window.localStorage}catch{return r.ERROR}},B=function(r){try{return!!window.indexedDB}catch{return r.ERROR}},M=function(r){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:r.NOT_AVAILABLE},D=function(r){return navigator.cpuClass||r.NOT_AVAILABLE},A=function(r){return navigator.platform?navigator.platform:r.NOT_AVAILABLE},P=function(r){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:r.NOT_AVAILABLE},j=function(){var r,_=0;navigator.maxTouchPoints!==void 0?_=navigator.maxTouchPoints:navigator.msMaxTouchPoints!==void 0&&(_=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),r=!0}catch{r=!1}return[_,r,"ontouchstart"in window]},H=function(r){var _=[],T=document.createElement("canvas");T.width=2e3,T.height=200,T.style.display="inline";var N=T.getContext("2d");return N.rect(0,0,10,10),N.rect(2,2,6,6),_.push("canvas winding:"+(N.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),N.textBaseline="alphabetic",N.fillStyle="#f60",N.fillRect(125,1,62,20),N.fillStyle="#069",r.dontUseFakeFontInCanvas?N.font="11pt Arial":N.font="11pt no-real-font-123",N.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),N.fillStyle="rgba(102, 204, 0, 0.2)",N.font="18pt Arial",N.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),N.globalCompositeOperation="multiply",N.fillStyle="rgb(255,0,255)",N.beginPath(),N.arc(50,50,50,0,2*Math.PI,!0),N.closePath(),N.fill(),N.fillStyle="rgb(0,255,255)",N.beginPath(),N.arc(100,50,50,0,2*Math.PI,!0),N.closePath(),N.fill(),N.fillStyle="rgb(255,255,0)",N.beginPath(),N.arc(75,100,50,0,2*Math.PI,!0),N.closePath(),N.fill(),N.fillStyle="rgb(255,0,255)",N.arc(75,75,75,0,2*Math.PI,!0),N.arc(75,75,25,0,2*Math.PI,!0),N.fill("evenodd"),T.toDataURL&&_.push("canvas fp:"+T.toDataURL()),_},K=function(){var r,_=function(dt){return r.clearColor(0,0,0,1),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),"["+dt[0]+", "+dt[1]+"]"};if(!(r=vt()))return null;var T=[],N=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,N);var W=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);r.bufferData(r.ARRAY_BUFFER,W,r.STATIC_DRAW),N.itemSize=3,N.numItems=3;var V=r.createProgram(),ot=r.createShader(r.VERTEX_SHADER);r.shaderSource(ot,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),r.compileShader(ot);var mt=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(mt,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),r.compileShader(mt),r.attachShader(V,ot),r.attachShader(V,mt),r.linkProgram(V),r.useProgram(V),V.vertexPosAttrib=r.getAttribLocation(V,"attrVertex"),V.offsetUniform=r.getUniformLocation(V,"uniformOffset"),r.enableVertexAttribArray(V.vertexPosArray),r.vertexAttribPointer(V.vertexPosAttrib,N.itemSize,r.FLOAT,!1,0,0),r.uniform2f(V.offsetUniform,1,1),r.drawArrays(r.TRIANGLE_STRIP,0,N.numItems);try{T.push(r.canvas.toDataURL())}catch{}T.push("extensions:"+(r.getSupportedExtensions()||[]).join(";")),T.push("webgl aliased line width range:"+_(r.getParameter(r.ALIASED_LINE_WIDTH_RANGE))),T.push("webgl aliased point size range:"+_(r.getParameter(r.ALIASED_POINT_SIZE_RANGE))),T.push("webgl alpha bits:"+r.getParameter(r.ALPHA_BITS)),T.push("webgl antialiasing:"+(r.getContextAttributes().antialias?"yes":"no")),T.push("webgl blue bits:"+r.getParameter(r.BLUE_BITS)),T.push("webgl depth bits:"+r.getParameter(r.DEPTH_BITS)),T.push("webgl green bits:"+r.getParameter(r.GREEN_BITS)),T.push("webgl max anisotropy:"+function(dt){var ht=dt.getExtension("EXT_texture_filter_anisotropic")||dt.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||dt.getExtension("MOZ_EXT_texture_filter_anisotropic");if(ht){var Wt=dt.getParameter(ht.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return Wt===0&&(Wt=2),Wt}return null}(r)),T.push("webgl max combined texture image units:"+r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),T.push("webgl max cube map texture size:"+r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE)),T.push("webgl max fragment uniform vectors:"+r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS)),T.push("webgl max render buffer size:"+r.getParameter(r.MAX_RENDERBUFFER_SIZE)),T.push("webgl max texture image units:"+r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),T.push("webgl max texture size:"+r.getParameter(r.MAX_TEXTURE_SIZE)),T.push("webgl max varying vectors:"+r.getParameter(r.MAX_VARYING_VECTORS)),T.push("webgl max vertex attribs:"+r.getParameter(r.MAX_VERTEX_ATTRIBS)),T.push("webgl max vertex texture image units:"+r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),T.push("webgl max vertex uniform vectors:"+r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS)),T.push("webgl max viewport dims:"+_(r.getParameter(r.MAX_VIEWPORT_DIMS))),T.push("webgl red bits:"+r.getParameter(r.RED_BITS)),T.push("webgl renderer:"+r.getParameter(r.RENDERER)),T.push("webgl shading language version:"+r.getParameter(r.SHADING_LANGUAGE_VERSION)),T.push("webgl stencil bits:"+r.getParameter(r.STENCIL_BITS)),T.push("webgl vendor:"+r.getParameter(r.VENDOR)),T.push("webgl version:"+r.getParameter(r.VERSION));try{var tt=r.getExtension("WEBGL_debug_renderer_info");tt&&(T.push("webgl unmasked vendor:"+r.getParameter(tt.UNMASKED_VENDOR_WEBGL)),T.push("webgl unmasked renderer:"+r.getParameter(tt.UNMASKED_RENDERER_WEBGL)))}catch{}return r.getShaderPrecisionFormat?(p(["FLOAT","INT"],function(dt){p(["VERTEX","FRAGMENT"],function(ht){p(["HIGH","MEDIUM","LOW"],function(Wt){p(["precision","rangeMin","rangeMax"],function(Kt){var Qt=r.getShaderPrecisionFormat(r[ht+"_SHADER"],r[Wt+"_"+dt])[Kt];Kt!=="precision"&&(Kt="precision "+Kt);var ie=["webgl ",ht.toLowerCase()," shader ",Wt.toLowerCase()," ",dt.toLowerCase()," ",Kt,":",Qt].join("");T.push(ie)})})})}),rt(r),T):(rt(r),T)},G=function(){try{var r=vt(),_=r.getExtension("WEBGL_debug_renderer_info"),T=r.getParameter(_.UNMASKED_VENDOR_WEBGL)+"~"+r.getParameter(_.UNMASKED_RENDERER_WEBGL);return rt(r),T}catch{return null}},R=function(){var r=document.createElement("div");r.innerHTML="&nbsp;",r.className="adsbox";var _=!1;try{document.body.appendChild(r),_=document.getElementsByClassName("adsbox")[0].offsetHeight===0,document.body.removeChild(r)}catch{_=!1}return _},q=function(){if(navigator.languages!==void 0)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch{return!0}return!1},F=function(){return window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight},z=function(){var r,_=navigator.userAgent.toLowerCase(),T=navigator.oscpu,N=navigator.platform.toLowerCase();return r=_.indexOf("windows phone")>=0?"Windows Phone":_.indexOf("windows")>=0||_.indexOf("win16")>=0||_.indexOf("win32")>=0||_.indexOf("win64")>=0||_.indexOf("win95")>=0||_.indexOf("win98")>=0||_.indexOf("winnt")>=0||_.indexOf("wow64")>=0?"Windows":_.indexOf("android")>=0?"Android":_.indexOf("linux")>=0||_.indexOf("cros")>=0||_.indexOf("x11")>=0?"Linux":_.indexOf("iphone")>=0||_.indexOf("ipad")>=0||_.indexOf("ipod")>=0||_.indexOf("crios")>=0||_.indexOf("fxios")>=0?"iOS":_.indexOf("macintosh")>=0||_.indexOf("mac_powerpc)")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&r!=="Windows"&&r!=="Windows Phone"&&r!=="Android"&&r!=="iOS"&&r!=="Other"&&_.indexOf("cros")===-1||T!==void 0&&((T=T.toLowerCase()).indexOf("win")>=0&&r!=="Windows"&&r!=="Windows Phone"||T.indexOf("linux")>=0&&r!=="Linux"&&r!=="Android"||T.indexOf("mac")>=0&&r!=="Mac"&&r!=="iOS"||(T.indexOf("win")===-1&&T.indexOf("linux")===-1&&T.indexOf("mac")===-1)!=(r==="Other"))?!0:N.indexOf("win")>=0&&r!=="Windows"&&r!=="Windows Phone"||(N.indexOf("linux")>=0||N.indexOf("android")>=0||N.indexOf("pike")>=0)&&r!=="Linux"&&r!=="Android"||(N.indexOf("mac")>=0||N.indexOf("ipad")>=0||N.indexOf("ipod")>=0||N.indexOf("iphone")>=0)&&r!=="Mac"&&r!=="iOS"||!(N.indexOf("arm")>=0&&r==="Windows Phone")&&!(N.indexOf("pike")>=0&&_.indexOf("opera mini")>=0)&&((N.indexOf("win")<0&&N.indexOf("linux")<0&&N.indexOf("mac")<0&&N.indexOf("iphone")<0&&N.indexOf("ipad")<0&&N.indexOf("ipod")<0)!=(r==="Other")||navigator.plugins===void 0&&r!=="Windows"&&r!=="Windows Phone")},O=function(){var r,_=navigator.userAgent.toLowerCase(),T=navigator.productSub;if(_.indexOf("edge/")>=0||_.indexOf("iemobile/")>=0||_.indexOf("opera mini")>=0)return!1;if(((r=_.indexOf("firefox/")>=0?"Firefox":_.indexOf("opera/")>=0||_.indexOf(" opr/")>=0?"Opera":_.indexOf("chrome/")>=0?"Chrome":_.indexOf("safari/")>=0?_.indexOf("android 1.")>=0||_.indexOf("android 2.")>=0||_.indexOf("android 3.")>=0||_.indexOf("android 4.")>=0?"AOSP":"Safari":_.indexOf("trident/")>=0?"Internet Explorer":"Other")=="Chrome"||r==="Safari"||r==="Opera")&&T!=="20030107")return!0;var N,W=eval.toString().length;if(W===37&&r!=="Safari"&&r!=="Firefox"&&r!=="Other"||W===39&&r!=="Internet Explorer"&&r!=="Other"||W===33&&r!=="Chrome"&&r!=="AOSP"&&r!=="Opera"&&r!=="Other")return!0;try{throw"a"}catch(V){try{V.toSource(),N=!0}catch{N=!1}}return N&&r!=="Firefox"&&r!=="Other"},C=function(){var r=document.createElement("canvas");return!(!r.getContext||!r.getContext("2d"))},U=function(){if(!C())return!1;var r=vt(),_=!!window.WebGLRenderingContext&&!!r;return rt(r),_},L=function(){return navigator.appName==="Microsoft Internet Explorer"||!(navigator.appName!=="Netscape"||!/Trident/.test(navigator.userAgent))},Z=function(){return window.swfobject!==void 0},ft=function(){return window.swfobject.hasFlashPlayerVersion("9.0.0")},ut=function(r,_){var T="___fp_swf_loaded";window[T]=function(V){r(V)};var N=_.fonts.swfContainerId;(function(V){var ot=document.createElement("div");ot.setAttribute("id",V.fonts.swfContainerId),document.body.appendChild(ot)})();var W={onReady:T};window.swfobject.embedSWF(_.fonts.swfPath,N,"1","1","9.0.0",!1,W,{allowScriptAccess:"always",menu:"false"},{})},vt=function(){var r=document.createElement("canvas"),_=null;try{_=r.getContext("webgl")||r.getContext("experimental-webgl")}catch{}return _||(_=null),_},rt=function(r){var _=r.getExtension("WEBGL_lose_context");_!=null&&_.loseContext()},h=[{key:"userAgent",getData:function(r){r(navigator.userAgent)}},{key:"webdriver",getData:function(r,_){r(navigator.webdriver==null?_.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(r,_){r(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||_.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(r,_){r(window.screen.colorDepth||_.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(r,_){r(navigator.deviceMemory||_.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(r,_){r(window.devicePixelRatio||_.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(r,_){r(M(_))}},{key:"screenResolution",getData:function(r,_){r(S(_))}},{key:"availableScreenResolution",getData:function(r,_){r(k(_))}},{key:"timezoneOffset",getData:function(r){r(new Date().getTimezoneOffset())}},{key:"timezone",getData:function(r,_){window.Intl&&window.Intl.DateTimeFormat?r(new window.Intl.DateTimeFormat().resolvedOptions().timeZone):r(_.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(r,_){r(x(_))}},{key:"localStorage",getData:function(r,_){r(y(_))}},{key:"indexedDb",getData:function(r,_){r(B(_))}},{key:"addBehavior",getData:function(r){r(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(r){r(!!window.openDatabase)}},{key:"cpuClass",getData:function(r,_){r(D(_))}},{key:"platform",getData:function(r,_){r(A(_))}},{key:"doNotTrack",getData:function(r,_){r(P(_))}},{key:"plugins",getData:function(r,_){L()?_.plugins.excludeIE?r(_.EXCLUDED):r(v(_)):r(b(_))}},{key:"canvas",getData:function(r,_){C()?r(H(_)):r(_.NOT_AVAILABLE)}},{key:"webgl",getData:function(r,_){U()?r(K()):r(_.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(r){U()?r(G()):r()}},{key:"adBlock",getData:function(r){r(R())}},{key:"hasLiedLanguages",getData:function(r){r(q())}},{key:"hasLiedResolution",getData:function(r){r(F())}},{key:"hasLiedOs",getData:function(r){r(z())}},{key:"hasLiedBrowser",getData:function(r){r(O())}},{key:"touchSupport",getData:function(r){r(j())}},{key:"fonts",getData:function(r,_){var T=["monospace","sans-serif","serif"],N=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];_.fonts.extendedJsFonts&&(N=N.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),N=(N=N.concat(_.fonts.userDefinedFonts)).filter(function(Ht,Yt){return N.indexOf(Ht)===Yt});var W=document.getElementsByTagName("body")[0],V=document.createElement("div"),ot=document.createElement("div"),mt={},tt={},dt=function(){var Ht=document.createElement("span");return Ht.style.position="absolute",Ht.style.left="-9999px",Ht.style.fontSize="72px",Ht.style.fontStyle="normal",Ht.style.fontWeight="normal",Ht.style.letterSpacing="normal",Ht.style.lineBreak="auto",Ht.style.lineHeight="normal",Ht.style.textTransform="none",Ht.style.textAlign="left",Ht.style.textDecoration="none",Ht.style.textShadow="none",Ht.style.whiteSpace="normal",Ht.style.wordBreak="normal",Ht.style.wordSpacing="normal",Ht.innerHTML="mmmmmmmmmmlli",Ht},ht=function(Ht,Yt){var Xt=dt();return Xt.style.fontFamily="'"+Ht+"',"+Yt,Xt},Wt=function(Ht){for(var Yt=!1,Xt=0;Xt<T.length;Xt++)if(Yt=Ht[Xt].offsetWidth!==mt[T[Xt]]||Ht[Xt].offsetHeight!==tt[T[Xt]])return Yt;return Yt},Kt=function(){for(var Ht=[],Yt=0,Xt=T.length;Yt<Xt;Yt++){var ee=dt();ee.style.fontFamily=T[Yt],V.appendChild(ee),Ht.push(ee)}return Ht}();W.appendChild(V);for(var Qt=0,ie=T.length;Qt<ie;Qt++)mt[T[Qt]]=Kt[Qt].offsetWidth,tt[T[Qt]]=Kt[Qt].offsetHeight;var me=function(){for(var Ht={},Yt=0,Xt=N.length;Yt<Xt;Yt++){for(var ee=[],ae=0,ve=T.length;ae<ve;ae++){var fe=ht(N[Yt],T[ae]);ot.appendChild(fe),ee.push(fe)}Ht[N[Yt]]=ee}return Ht}();W.appendChild(ot);for(var ce=[],oe=0,ye=N.length;oe<ye;oe++)Wt(me[N[oe]])&&ce.push(N[oe]);W.removeChild(ot),W.removeChild(V),r(ce)},pauseBefore:!0},{key:"fontsFlash",getData:function(r,_){return Z()?ft()?_.fonts.swfPath?void ut(function(T){r(T)},_):r("missing options.fonts.swfPath"):r("flash not installed"):r("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(r,_){var T=_.audio;if(T.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return r(_.EXCLUDED);var N=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(N==null)return r(_.NOT_AVAILABLE);var W=new N(1,44100,44100),V=W.createOscillator();V.type="triangle",V.frequency.setValueAtTime(1e4,W.currentTime);var ot=W.createDynamicsCompressor();p([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(tt){ot[tt[0]]!==void 0&&typeof ot[tt[0]].setValueAtTime=="function"&&ot[tt[0]].setValueAtTime(tt[1],W.currentTime)}),V.connect(ot),ot.connect(W.destination),V.start(0),W.startRendering();var mt=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),W.oncomplete=function(){},W=null,r("audioTimeout")},T.timeout);W.oncomplete=function(tt){var dt;try{clearTimeout(mt),dt=tt.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(ht,Wt){return ht+Math.abs(Wt)},0).toString(),V.disconnect(),ot.disconnect()}catch(ht){return void r(ht)}r(dt)}}},{key:"enumerateDevices",getData:function(r,_){if(!E())return r(_.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then(function(T){r(T.map(function(N){return"id="+N.deviceId+";gid="+N.groupId+";"+N.kind+";"+N.label}))}).catch(function(T){r(T)})}}],m=function(r){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200")};return m.get=function(r,_){_?r||(r={}):(_=r,r={}),function(V,ot){if(ot==null)return V;var mt,tt;for(tt in ot)(mt=ot[tt])==null||Object.prototype.hasOwnProperty.call(V,tt)||(V[tt]=mt)}(r,l),r.components=r.extraComponents.concat(h);var T={data:[],addPreprocessedComponent:function(V,ot){typeof r.preprocessor=="function"&&(ot=r.preprocessor(V,ot)),T.data.push({key:V,value:ot})}},N=-1,W=function(V){if((N+=1)>=r.components.length)_(T.data);else{var ot=r.components[N];if(r.excludes[ot.key])W(!1);else{if(!V&&ot.pauseBefore)return N-=1,void setTimeout(function(){W(!0)},1);try{ot.getData(function(mt){T.addPreprocessedComponent(ot.key,mt),W(!1)},r)}catch(mt){T.addPreprocessedComponent(ot.key,String(mt)),W(!1)}}}};W(!1)},m.getPromise=function(r){return new Promise(function(_,T){m.get(r,_)})},m.getV18=function(r,_){return _==null&&(_=r,r={}),m.get(r,function(T){for(var N=[],W=0;W<T.length;W++){var V=T[W];if(V.value===(r.NOT_AVAILABLE||"not available"))N.push({key:V.key,value:"unknown"});else if(V.key==="plugins")N.push({key:"plugins",value:d(V.value,function(mt){var tt=d(mt[2],function(dt){return dt.join?dt.join("~"):dt}).join(",");return[mt[0],mt[1],tt].join("::")})});else if(["canvas","webgl"].indexOf(V.key)!==-1&&Array.isArray(V.value))N.push({key:V.key,value:V.value.join("~")});else if(["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(V.key)!==-1){if(!V.value)continue;N.push({key:V.key,value:1})}else V.value?N.push(V.value.join?{key:V.key,value:V.value.join(";")}:V):N.push({key:V.key,value:V.value})}var ot=g(d(N,function(mt){return mt.value}).join("~~~"),31);_(ot,N)})},m.x64hash128=g,m.VERSION="2.1.2",m})},function(w,I,n){var o=String.prototype.replace,a=/%20/g,f=n(34),c={RFC1738:"RFC1738",RFC3986:"RFC3986"};w.exports=f.assign({default:c.RFC3986,formatters:{RFC1738:function(e){return o.call(e,a,"+")},RFC3986:function(e){return String(e)}}},c)},function(w,I,n){(function(o){var a=n(36),f=n(28).Readable,c={objectMode:!0},e={clean:!0},s=n(102);function i(t){if(!(this instanceof i))return new i(t);this.options=t||{},this.options=a(e,t),this._inflights=new s}i.prototype.put=function(t,g){return this._inflights.set(t.messageId,t),g&&g(),this},i.prototype.createStream=function(){var t=new f(c),g=!1,l=[],p=0;return this._inflights.forEach(function(d,E){l.push(d)}),t._read=function(){!g&&p<l.length?this.push(l[p++]):this.push(null)},t.destroy=function(){if(!g){var d=this;g=!0,o.nextTick(function(){d.emit("close")})}},t},i.prototype.del=function(t,g){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),g(null,t)):g&&g(new Error("missing packet")),this},i.prototype.get=function(t,g){return(t=this._inflights.get(t.messageId))?g(null,t):g&&g(new Error("missing packet")),this},i.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},w.exports=i}).call(this,n(9))},function(w,I,n){(function(o,a){var f=n(23);w.exports=u;var c,e=n(49);u.ReadableState=v,n(15).EventEmitter;var s=function(O,C){return O.listeners(C).length},i=n(50),t=n(37).Buffer,g=o.Uint8Array||function(){},l=Object.create(n(25));l.inherits=n(13);var p=n(95),d=void 0;d=p&&p.debuglog?p.debuglog("stream"):function(){};var E,S=n(96),k=n(51);l.inherits(u,i);var b=["error","close","destroy","pause","resume"];function v(O,C){O=O||{};var U=C instanceof(c=c||n(18));this.objectMode=!!O.objectMode,U&&(this.objectMode=this.objectMode||!!O.readableObjectMode);var L=O.highWaterMark,Z=O.readableHighWaterMark,ft=this.objectMode?16:16384;this.highWaterMark=L||L===0?L:U&&(Z||Z===0)?Z:ft,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(E||(E=n(53).StringDecoder),this.decoder=new E(O.encoding),this.encoding=O.encoding)}function u(O){if(c=c||n(18),!(this instanceof u))return new u(O);this._readableState=new v(O,this),this.readable=!0,O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy)),i.call(this)}function x(O,C,U,L,Z){var ft,ut=O._readableState;return C===null?(ut.reading=!1,function(vt,rt){if(!rt.ended){if(rt.decoder){var h=rt.decoder.end();h&&h.length&&(rt.buffer.push(h),rt.length+=rt.objectMode?1:h.length)}rt.ended=!0,D(vt)}}(O,ut)):(Z||(ft=function(vt,rt){var h;m=rt,t.isBuffer(m)||m instanceof g||typeof rt=="string"||rt===void 0||vt.objectMode||(h=new TypeError("Invalid non-string/buffer chunk"));var m;return h}(ut,C)),ft?O.emit("error",ft):ut.objectMode||C&&C.length>0?(typeof C=="string"||ut.objectMode||Object.getPrototypeOf(C)===t.prototype||(C=function(vt){return t.from(vt)}(C)),L?ut.endEmitted?O.emit("error",new Error("stream.unshift() after end event")):y(O,ut,C,!0):ut.ended?O.emit("error",new Error("stream.push() after EOF")):(ut.reading=!1,ut.decoder&&!U?(C=ut.decoder.write(C),ut.objectMode||C.length!==0?y(O,ut,C,!1):P(O,ut)):y(O,ut,C,!1))):L||(ut.reading=!1)),function(vt){return!vt.ended&&(vt.needReadable||vt.length<vt.highWaterMark||vt.length===0)}(ut)}function y(O,C,U,L){C.flowing&&C.length===0&&!C.sync?(O.emit("data",U),O.read(0)):(C.length+=C.objectMode?1:U.length,L?C.buffer.unshift(U):C.buffer.push(U),C.needReadable&&D(O)),P(O,C)}Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),u.prototype.destroy=k.destroy,u.prototype._undestroy=k.undestroy,u.prototype._destroy=function(O,C){this.push(null),C(O)},u.prototype.push=function(O,C){var U,L=this._readableState;return L.objectMode?U=!0:typeof O=="string"&&((C=C||L.defaultEncoding)!==L.encoding&&(O=t.from(O,C),C=""),U=!0),x(this,O,C,!1,U)},u.prototype.unshift=function(O){return x(this,O,null,!0,!1)},u.prototype.isPaused=function(){return this._readableState.flowing===!1},u.prototype.setEncoding=function(O){return E||(E=n(53).StringDecoder),this._readableState.decoder=new E(O),this._readableState.encoding=O,this};var B=8388608;function M(O,C){return O<=0||C.length===0&&C.ended?0:C.objectMode?1:O!=O?C.flowing&&C.length?C.buffer.head.data.length:C.length:(O>C.highWaterMark&&(C.highWaterMark=function(U){return U>=B?U=B:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}(O)),O<=C.length?O:C.ended?C.length:(C.needReadable=!0,0))}function D(O){var C=O._readableState;C.needReadable=!1,C.emittedReadable||(d("emitReadable",C.flowing),C.emittedReadable=!0,C.sync?f.nextTick(A,O):A(O))}function A(O){d("emit readable"),O.emit("readable"),G(O)}function P(O,C){C.readingMore||(C.readingMore=!0,f.nextTick(j,O,C))}function j(O,C){for(var U=C.length;!C.reading&&!C.flowing&&!C.ended&&C.length<C.highWaterMark&&(d("maybeReadMore read 0"),O.read(0),U!==C.length);)U=C.length;C.readingMore=!1}function H(O){d("readable nexttick read 0"),O.read(0)}function K(O,C){C.reading||(d("resume read 0"),O.read(0)),C.resumeScheduled=!1,C.awaitDrain=0,O.emit("resume"),G(O),C.flowing&&!C.reading&&O.read(0)}function G(O){var C=O._readableState;for(d("flow",C.flowing);C.flowing&&O.read()!==null;);}function R(O,C){return C.length===0?null:(C.objectMode?U=C.buffer.shift():!O||O>=C.length?(U=C.decoder?C.buffer.join(""):C.buffer.length===1?C.buffer.head.data:C.buffer.concat(C.length),C.buffer.clear()):U=function(L,Z,ft){var ut;return L<Z.head.data.length?(ut=Z.head.data.slice(0,L),Z.head.data=Z.head.data.slice(L)):ut=L===Z.head.data.length?Z.shift():ft?function(vt,rt){var h=rt.head,m=1,r=h.data;for(vt-=r.length;h=h.next;){var _=h.data,T=vt>_.length?_.length:vt;if(T===_.length?r+=_:r+=_.slice(0,vt),(vt-=T)===0){T===_.length?(++m,h.next?rt.head=h.next:rt.head=rt.tail=null):(rt.head=h,h.data=_.slice(T));break}++m}return rt.length-=m,r}(L,Z):function(vt,rt){var h=t.allocUnsafe(vt),m=rt.head,r=1;for(m.data.copy(h),vt-=m.data.length;m=m.next;){var _=m.data,T=vt>_.length?_.length:vt;if(_.copy(h,h.length-vt,0,T),(vt-=T)===0){T===_.length?(++r,m.next?rt.head=m.next:rt.head=rt.tail=null):(rt.head=m,m.data=_.slice(T));break}++r}return rt.length-=r,h}(L,Z),ut}(O,C.buffer,C.decoder),U);var U}function q(O){var C=O._readableState;if(C.length>0)throw new Error('"endReadable()" called on non-empty stream');C.endEmitted||(C.ended=!0,f.nextTick(F,C,O))}function F(O,C){O.endEmitted||O.length!==0||(O.endEmitted=!0,C.readable=!1,C.emit("end"))}function z(O,C){for(var U=0,L=O.length;U<L;U++)if(O[U]===C)return U;return-1}u.prototype.read=function(O){d("read",O),O=parseInt(O,10);var C=this._readableState,U=O;if(O!==0&&(C.emittedReadable=!1),O===0&&C.needReadable&&(C.length>=C.highWaterMark||C.ended))return d("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?q(this):D(this),null;if((O=M(O,C))===0&&C.ended)return C.length===0&&q(this),null;var L,Z=C.needReadable;return d("need readable",Z),(C.length===0||C.length-O<C.highWaterMark)&&d("length less than watermark",Z=!0),C.ended||C.reading?d("reading or ended",Z=!1):Z&&(d("do read"),C.reading=!0,C.sync=!0,C.length===0&&(C.needReadable=!0),this._read(C.highWaterMark),C.sync=!1,C.reading||(O=M(U,C))),(L=O>0?R(O,C):null)===null?(C.needReadable=!0,O=0):C.length-=O,C.length===0&&(C.ended||(C.needReadable=!0),U!==O&&C.ended&&q(this)),L!==null&&this.emit("data",L),L},u.prototype._read=function(O){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(O,C){var U=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=O;break;case 1:L.pipes=[L.pipes,O];break;default:L.pipes.push(O)}L.pipesCount+=1,d("pipe count=%d opts=%j",L.pipesCount,C);var Z=(!C||C.end!==!1)&&O!==a.stdout&&O!==a.stderr?ut:N;function ft(W,V){d("onunpipe"),W===U&&V&&V.hasUnpiped===!1&&(V.hasUnpiped=!0,d("cleanup"),O.removeListener("close",_),O.removeListener("finish",T),O.removeListener("drain",vt),O.removeListener("error",r),O.removeListener("unpipe",ft),U.removeListener("end",ut),U.removeListener("end",N),U.removeListener("data",m),rt=!0,!L.awaitDrain||O._writableState&&!O._writableState.needDrain||vt())}function ut(){d("onend"),O.end()}L.endEmitted?f.nextTick(Z):U.once("end",Z),O.on("unpipe",ft);var vt=function(W){return function(){var V=W._readableState;d("pipeOnDrain",V.awaitDrain),V.awaitDrain&&V.awaitDrain--,V.awaitDrain===0&&s(W,"data")&&(V.flowing=!0,G(W))}}(U);O.on("drain",vt);var rt=!1,h=!1;function m(W){d("ondata"),h=!1,O.write(W)!==!1||h||((L.pipesCount===1&&L.pipes===O||L.pipesCount>1&&z(L.pipes,O)!==-1)&&!rt&&(d("false write response, pause",U._readableState.awaitDrain),U._readableState.awaitDrain++,h=!0),U.pause())}function r(W){d("onerror",W),N(),O.removeListener("error",r),s(O,"error")===0&&O.emit("error",W)}function _(){O.removeListener("finish",T),N()}function T(){d("onfinish"),O.removeListener("close",_),N()}function N(){d("unpipe"),U.unpipe(O)}return U.on("data",m),function(W,V,ot){if(typeof W.prependListener=="function")return W.prependListener(V,ot);W._events&&W._events[V]?e(W._events[V])?W._events[V].unshift(ot):W._events[V]=[ot,W._events[V]]:W.on(V,ot)}(O,"error",r),O.once("close",_),O.once("finish",T),O.emit("pipe",U),L.flowing||(d("pipe resume"),U.resume()),O},u.prototype.unpipe=function(O){var C=this._readableState,U={hasUnpiped:!1};if(C.pipesCount===0)return this;if(C.pipesCount===1)return O&&O!==C.pipes||(O||(O=C.pipes),C.pipes=null,C.pipesCount=0,C.flowing=!1,O&&O.emit("unpipe",this,U)),this;if(!O){var L=C.pipes,Z=C.pipesCount;C.pipes=null,C.pipesCount=0,C.flowing=!1;for(var ft=0;ft<Z;ft++)L[ft].emit("unpipe",this,U);return this}var ut=z(C.pipes,O);return ut===-1||(C.pipes.splice(ut,1),C.pipesCount-=1,C.pipesCount===1&&(C.pipes=C.pipes[0]),O.emit("unpipe",this,U)),this},u.prototype.on=function(O,C){var U=i.prototype.on.call(this,O,C);if(O==="data")this._readableState.flowing!==!1&&this.resume();else if(O==="readable"){var L=this._readableState;L.endEmitted||L.readableListening||(L.readableListening=L.needReadable=!0,L.emittedReadable=!1,L.reading?L.length&&D(this):f.nextTick(H,this))}return U},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var O=this._readableState;return O.flowing||(d("resume"),O.flowing=!0,function(C,U){U.resumeScheduled||(U.resumeScheduled=!0,f.nextTick(K,C,U))}(this,O)),this},u.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(O){var C=this,U=this._readableState,L=!1;for(var Z in O.on("end",function(){if(d("wrapped end"),U.decoder&&!U.ended){var ut=U.decoder.end();ut&&ut.length&&C.push(ut)}C.push(null)}),O.on("data",function(ut){d("wrapped data"),U.decoder&&(ut=U.decoder.write(ut)),U.objectMode&&ut==null||(U.objectMode||ut&&ut.length)&&(C.push(ut)||(L=!0,O.pause()))}),O)this[Z]===void 0&&typeof O[Z]=="function"&&(this[Z]=function(ut){return function(){return O[ut].apply(O,arguments)}}(Z));for(var ft=0;ft<b.length;ft++)O.on(b[ft],this.emit.bind(this,b[ft]));return this._read=function(ut){d("wrapped _read",ut),L&&(L=!1,O.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=R}).call(this,n(12),n(9))},function(w,I){var n={}.toString;w.exports=Array.isArray||function(o){return n.call(o)=="[object Array]"}},function(w,I,n){w.exports=n(15).EventEmitter},function(w,I,n){var o=n(23);function a(f,c){f.emit("error",c)}w.exports={destroy:function(f,c){var e=this,s=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return s||i?(c?c(f):!f||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,f),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(t){!c&&t?(o.nextTick(a,e,t),e._writableState&&(e._writableState.errorEmitted=!0)):c&&c(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(w,I,n){(function(o,a,f){var c=n(23);function e(A){var P=this;this.next=null,this.entry=null,this.finish=function(){(function(j,H,K){var G=j.entry;for(j.entry=null;G;){var R=G.callback;H.pendingcb--,R(K),G=G.next}H.corkedRequestsFree?H.corkedRequestsFree.next=j:H.corkedRequestsFree=j})(P,A)}}w.exports=v;var s,i=!o.browser&&["v0.10","v0.9."].indexOf(o.version.slice(0,5))>-1?a:c.nextTick;v.WritableState=b;var t=Object.create(n(25));t.inherits=n(13);var g={deprecate:n(100)},l=n(50),p=n(37).Buffer,d=f.Uint8Array||function(){},E,S=n(51);function k(){}function b(A,P){s=s||n(18),A=A||{};var j=P instanceof s;this.objectMode=!!A.objectMode,j&&(this.objectMode=this.objectMode||!!A.writableObjectMode);var H=A.highWaterMark,K=A.writableHighWaterMark,G=this.objectMode?16:16384;this.highWaterMark=H||H===0?H:j&&(K||K===0)?K:G,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var R=A.decodeStrings===!1;this.decodeStrings=!R,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(q){(function(F,z){var O=F._writableState,C=O.sync,U=O.writecb;if(function(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}(O),z)(function(Z,ft,ut,vt,rt){--ft.pendingcb,ut?(c.nextTick(rt,vt),c.nextTick(D,Z,ft),Z._writableState.errorEmitted=!0,Z.emit("error",vt)):(rt(vt),Z._writableState.errorEmitted=!0,Z.emit("error",vt),D(Z,ft))})(F,O,C,z,U);else{var L=B(O);L||O.corked||O.bufferProcessing||!O.bufferedRequest||y(F,O),C?i(x,F,O,L,U):x(F,O,L,U)}})(P,q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function v(A){if(s=s||n(18),!(E.call(v,this)||this instanceof s))return new v(A);this._writableState=new b(A,this),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),l.call(this)}function u(A,P,j,H,K,G,R){P.writelen=H,P.writecb=R,P.writing=!0,P.sync=!0,j?A._writev(K,P.onwrite):A._write(K,G,P.onwrite),P.sync=!1}function x(A,P,j,H){j||function(K,G){G.length===0&&G.needDrain&&(G.needDrain=!1,K.emit("drain"))}(A,P),P.pendingcb--,H(),D(A,P)}function y(A,P){P.bufferProcessing=!0;var j=P.bufferedRequest;if(A._writev&&j&&j.next){var H=P.bufferedRequestCount,K=new Array(H),G=P.corkedRequestsFree;G.entry=j;for(var R=0,q=!0;j;)K[R]=j,j.isBuf||(q=!1),j=j.next,R+=1;K.allBuffers=q,u(A,P,!0,P.length,K,"",G.finish),P.pendingcb++,P.lastBufferedRequest=null,G.next?(P.corkedRequestsFree=G.next,G.next=null):P.corkedRequestsFree=new e(P),P.bufferedRequestCount=0}else{for(;j;){var F=j.chunk,z=j.encoding,O=j.callback;if(u(A,P,!1,P.objectMode?1:F.length,F,z,O),j=j.next,P.bufferedRequestCount--,P.writing)break}j===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=j,P.bufferProcessing=!1}function B(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function M(A,P){A._final(function(j){P.pendingcb--,j&&A.emit("error",j),P.prefinished=!0,A.emit("prefinish"),D(A,P)})}function D(A,P){var j=B(P);return j&&(function(H,K){K.prefinished||K.finalCalled||(typeof H._final=="function"?(K.pendingcb++,K.finalCalled=!0,c.nextTick(M,H,K)):(K.prefinished=!0,H.emit("prefinish")))}(A,P),P.pendingcb===0&&(P.finished=!0,A.emit("finish"))),j}t.inherits(v,l),b.prototype.getBuffer=function(){for(var A=this.bufferedRequest,P=[];A;)P.push(A),A=A.next;return P},function(){try{Object.defineProperty(b.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(A){return!!E.call(this,A)||this===v&&A&&A._writableState instanceof b}})):E=function(A){return A instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(A,P,j){var H,K=this._writableState,G=!1,R=!K.objectMode&&(H=A,p.isBuffer(H)||H instanceof d);return R&&!p.isBuffer(A)&&(A=function(q){return p.from(q)}(A)),typeof P=="function"&&(j=P,P=null),R?P="buffer":P||(P=K.defaultEncoding),typeof j!="function"&&(j=k),K.ended?function(q,F){var z=new Error("write after end");q.emit("error",z),c.nextTick(F,z)}(this,j):(R||function(q,F,z,O){var C=!0,U=!1;return z===null?U=new TypeError("May not write null values to stream"):typeof z=="string"||z===void 0||F.objectMode||(U=new TypeError("Invalid non-string/buffer chunk")),U&&(q.emit("error",U),c.nextTick(O,U),C=!1),C}(this,K,A,j))&&(K.pendingcb++,G=function(q,F,z,O,C,U){if(!z){var L=function(vt,rt,h){return vt.objectMode||vt.decodeStrings===!1||typeof rt!="string"||(rt=p.from(rt,h)),rt}(F,O,C);O!==L&&(z=!0,C="buffer",O=L)}var Z=F.objectMode?1:O.length;F.length+=Z;var ft=F.length<F.highWaterMark;if(ft||(F.needDrain=!0),F.writing||F.corked){var ut=F.lastBufferedRequest;F.lastBufferedRequest={chunk:O,encoding:C,isBuf:z,callback:U,next:null},ut?ut.next=F.lastBufferedRequest:F.bufferedRequest=F.lastBufferedRequest,F.bufferedRequestCount+=1}else u(q,F,!1,Z,O,C,U);return ft}(this,K,R,A,P,j)),G},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,A.writing||A.corked||A.finished||A.bufferProcessing||!A.bufferedRequest||y(this,A))},v.prototype.setDefaultEncoding=function(A){if(typeof A=="string"&&(A=A.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((A+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+A);return this._writableState.defaultEncoding=A,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(A,P,j){j(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(A,P,j){var H=this._writableState;typeof A=="function"?(j=A,A=null,P=null):typeof P=="function"&&(j=P,P=null),A!=null&&this.write(A,P),H.corked&&(H.corked=1,this.uncork()),H.ending||H.finished||function(K,G,R){G.ending=!0,D(K,G),R&&(G.finished?c.nextTick(R):K.once("finish",R)),G.ended=!0,K.writable=!1}(this,H,j)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),v.prototype.destroy=S.destroy,v.prototype._undestroy=S.undestroy,v.prototype._destroy=function(A,P){this.end(),P(A)}}).call(this,n(9),n(98).setImmediate,n(12))},function(w,I,n){var o=n(19).Buffer,a=o.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function f(d){var E;switch(this.encoding=function(S){var k=function(b){if(!b)return"utf8";for(var v;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(v)return;b=(""+b).toLowerCase(),v=!0}}(S);if(typeof k!="string"&&(o.isEncoding===a||!a(S)))throw new Error("Unknown encoding: "+S);return k||S}(d),this.encoding){case"utf16le":this.text=s,this.end=i,E=4;break;case"utf8":this.fillLast=e,E=4;break;case"base64":this.text=t,this.end=g,E=3;break;default:return this.write=l,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(E)}function c(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function e(d){var E=this.lastTotal-this.lastNeed,S=function(k,b,v){if((192&b[0])!=128)return k.lastNeed=0,"�";if(k.lastNeed>1&&b.length>1){if((192&b[1])!=128)return k.lastNeed=1,"�";if(k.lastNeed>2&&b.length>2&&(192&b[2])!=128)return k.lastNeed=2,"�"}}(this,d);return S!==void 0?S:this.lastNeed<=d.length?(d.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,E,0,d.length),void(this.lastNeed-=d.length))}function s(d,E){if((d.length-E)%2==0){var S=d.toString("utf16le",E);if(S){var k=S.charCodeAt(S.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",E,d.length-1)}function i(d){var E=d&&d.length?this.write(d):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,S)}return E}function t(d,E){var S=(d.length-E)%3;return S===0?d.toString("base64",E):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",E,d.length-S))}function g(d){var E=d&&d.length?this.write(d):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function l(d){return d.toString(this.encoding)}function p(d){return d&&d.length?this.write(d):""}I.StringDecoder=f,f.prototype.write=function(d){if(d.length===0)return"";var E,S;if(this.lastNeed){if((E=this.fillLast(d))===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<d.length?E?E+this.text(d,S):this.text(d,S):E||""},f.prototype.end=function(d){var E=d&&d.length?this.write(d):"";return this.lastNeed?E+"�":E},f.prototype.text=function(d,E){var S=function(b,v,u){var x=v.length-1;if(x<u)return 0;var y=c(v[x]);return y>=0?(y>0&&(b.lastNeed=y-1),y):--x<u||y===-2?0:(y=c(v[x]))>=0?(y>0&&(b.lastNeed=y-2),y):--x<u||y===-2?0:(y=c(v[x]))>=0?(y>0&&(y===2?y=0:b.lastNeed=y-3),y):0}(this,d,E);if(!this.lastNeed)return d.toString("utf8",E);this.lastTotal=S;var k=d.length-(S-this.lastNeed);return d.copy(this.lastChar,0,k),d.toString("utf8",E,k)},f.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},function(w,I,n){w.exports=c;var o=n(18),a=Object.create(n(25));function f(i,t){var g=this._transformState;g.transforming=!1;var l=g.writecb;if(!l)return this.emit("error",new Error("write callback called multiple times"));g.writechunk=null,g.writecb=null,t!=null&&this.push(t),l(i);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function c(i){if(!(this instanceof c))return new c(i);o.call(this,i),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",e)}function e(){var i=this;typeof this._flush=="function"?this._flush(function(t,g){s(i,t,g)}):s(this,null,null)}function s(i,t,g){if(t)return i.emit("error",t);if(g!=null&&i.push(g),i._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(i._transformState.transforming)throw new Error("Calling transform done when still transforming");return i.push(null)}a.inherits=n(13),a.inherits(c,o),c.prototype.push=function(i,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,i,t)},c.prototype._transform=function(i,t,g){throw new Error("_transform() is not implemented")},c.prototype._write=function(i,t,g){var l=this._transformState;if(l.writecb=g,l.writechunk=i,l.writeencoding=t,!l.transforming){var p=this._readableState;(l.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},c.prototype._read=function(i){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},c.prototype._destroy=function(i,t){var g=this;o.prototype._destroy.call(this,i,function(l){t(l),g.emit("close")})}},function(w,I,n){var o=n(14);w.exports=function(){return o(this).length=0,this}},function(w,I,n){var o=n(110),a=Math.max;w.exports=function(f){return a(0,o(f))}},function(w,I,n){var o=Object.create,a=Object.getPrototypeOf,f={};w.exports=function(){var c=Object.setPrototypeOf,e=arguments[0]||o;return typeof c=="function"&&a(c(e(null),f))===f}},function(w,I,n){var o,a,f,c,e=n(114),s=n(14),i=Object.prototype.isPrototypeOf,t=Object.defineProperty,g={configurable:!0,enumerable:!1,writable:!0,value:void 0};o=function(l,p){if(s(l),p===null||e(p))return l;throw new TypeError("Prototype must be null or an object")},w.exports=(a=function(){var l,p=Object.create(null),d={},E=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(E){try{(l=E.set).call(p,d)}catch{}if(Object.getPrototypeOf(p)===d)return{set:l,level:2}}return p.__proto__=d,Object.getPrototypeOf(p)===d?{level:2}:((p={}).__proto__=d,Object.getPrototypeOf(p)===d&&{level:1})}())?(a.level===2?a.set?(c=a.set,f=function(l,p){return c.call(o(l,p),p),l}):f=function(l,p){return o(l,p).__proto__=p,l}:f=function l(p,d){var E;return o(p,d),(E=i.call(l.nullPolyfill,p))&&delete l.nullPolyfill.__proto__,d===null&&(d=l.nullPolyfill),p.__proto__=d,E&&t(l.nullPolyfill,"__proto__",g),p},Object.defineProperty(f,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null,n(115)},function(w,I,n){var o=n(116),a=/^\s*class[\s{/}]/,f=Function.prototype.toString;w.exports=function(c){return!!o(c)&&!a.test(f.call(c))}},function(w,I,n){var o=n(21),a=Array.prototype.forEach,f=Object.create,c=function(e,s){var i;for(i in e)s[i]=e[i]};w.exports=function(e){var s=f(null);return a.call(arguments,function(i){o(i)&&c(Object(i),s)}),s}},function(w,I,n){w.exports=n(123)()?String.prototype.contains:n(124)},function(w,I,n){var o=n(130);w.exports=function(a){if(!o(a))throw new TypeError(a+" is not a symbol");return a}},function(w,I,n){var o=n(134);w.exports=function(a){if(!o(a))throw new TypeError(a+" is not iterable");return a}},function(w,I,n){var o=n(22),a=n(38),f=n(140),c=n(141),e=function(s,i){return s.replace("%v",c(i))};w.exports=function(s,i,t){if(!a(t))throw new TypeError(e(i,s));if(!o(s)){if("default"in t)return t.default;if(t.isOptional)return null}var g=f(t.errorMessage);throw o(g)||(g=i),new TypeError(e(g,s))}},function(w,I,n){(function(o){var a=n(157),f=function(){},c=function(e,s,i){if(typeof s=="function")return c(e,null,s);s||(s={}),i=a(i||f);var t=e._writableState,g=e._readableState,l=s.readable||s.readable!==!1&&e.readable,p=s.writable||s.writable!==!1&&e.writable,d=!1,E=function(){e.writable||S()},S=function(){p=!1,l||i.call(e)},k=function(){l=!1,p||i.call(e)},b=function(B){i.call(e,B?new Error("exited with error code: "+B):null)},v=function(B){i.call(e,B)},u=function(){o.nextTick(x)},x=function(){if(!d)return(!l||g&&g.ended&&!g.destroyed)&&(!p||t&&t.ended&&!t.destroyed)?void 0:i.call(e,new Error("premature close"))},y=function(){e.req.on("finish",S)};return function(B){return B.setHeader&&typeof B.abort=="function"}(e)?(e.on("complete",S),e.on("abort",u),e.req?y():e.on("request",y)):p&&!t&&(e.on("end",E),e.on("close",E)),function(B){return B.stdio&&Array.isArray(B.stdio)&&B.stdio.length===3}(e)&&e.on("exit",b),e.on("end",k),e.on("finish",S),s.error!==!1&&e.on("error",v),e.on("close",u),function(){d=!0,e.removeListener("complete",S),e.removeListener("abort",u),e.removeListener("request",y),e.req&&e.req.removeListener("finish",S),e.removeListener("end",E),e.removeListener("close",E),e.removeListener("finish",S),e.removeListener("exit",b),e.removeListener("end",k),e.removeListener("error",v),e.removeListener("close",u)}};w.exports=c}).call(this,n(9))},function(w,I,n){var o=n(19).Buffer,a=w.exports;for(var f in a.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},a.codes={},a.types){var c=a.types[f];a.codes[c]=f}function e(s){return[0,1,2].map(function(i){return[0,1].map(function(t){return[0,1].map(function(g){var l=new o(1);return l.writeUInt8(a.codes[s]<<a.CMD_SHIFT|(t?a.DUP_MASK:0)|i<<a.QOS_SHIFT|g,0,!0),l})})})}a.CMD_SHIFT=4,a.CMD_MASK=240,a.DUP_MASK=8,a.QOS_MASK=3,a.QOS_SHIFT=1,a.RETAIN_MASK=1,a.LENGTH_MASK=127,a.LENGTH_FIN_MASK=128,a.SESSIONPRESENT_MASK=1,a.SESSIONPRESENT_HEADER=o.from([a.SESSIONPRESENT_MASK]),a.CONNACK_HEADER=o.from([a.codes.connack<<a.CMD_SHIFT]),a.USERNAME_MASK=128,a.PASSWORD_MASK=64,a.WILL_RETAIN_MASK=32,a.WILL_QOS_MASK=24,a.WILL_QOS_SHIFT=3,a.WILL_FLAG_MASK=4,a.CLEAN_SESSION_MASK=2,a.CONNECT_HEADER=o.from([a.codes.connect<<a.CMD_SHIFT]),a.PUBLISH_HEADER=e("publish"),a.SUBSCRIBE_HEADER=e("subscribe"),a.UNSUBSCRIBE_HEADER=e("unsubscribe"),a.ACKS={unsuback:e("unsuback"),puback:e("puback"),pubcomp:e("pubcomp"),pubrel:e("pubrel"),pubrec:e("pubrec")},a.SUBACK_HEADER=o.from([a.codes.suback<<a.CMD_SHIFT]),a.VERSION3=o.from([3]),a.VERSION4=o.from([4]),a.QOS=[0,1,2].map(function(s){return o.from([s])}),a.EMPTY={pingreq:o.from([a.codes.pingreq<<4,0]),pingresp:o.from([a.codes.pingresp<<4,0]),disconnect:o.from([a.codes.disconnect<<4,0])}},function(w,I,n){var o=n(66),a=n(19).Buffer,f=a.allocUnsafe(0),c=a.from([0]),e=n(165),s=n(23).nextTick,i=e.cache,t=e.generateNumber,g=e.generateCache,l=v,p=!0;function d(M,D){switch(D.cork&&(D.cork(),s(E,D)),p&&(p=!1,g()),M.cmd){case"connect":return function(A,P){var j=A||{},H=j.protocolId||"MQTT",K=j.protocolVersion||4,G=j.will,R=j.clean,q=j.keepalive||0,F=j.clientId||"",z=j.username,O=j.password;R===void 0&&(R=!0);var C=0;if(!H||typeof H!="string"&&!a.isBuffer(H))return P.emit("error",new Error("Invalid protocolId")),!1;if(C+=H.length+2,K!==3&&K!==4)return P.emit("error",new Error("Invalid protocol version")),!1;if(C+=1,typeof F!="string"&&!a.isBuffer(F)||!F&&K!==4||!F&&!R){if(K<4)return P.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*R==0)return P.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else C+=F.length+2;if(typeof q!="number"||q<0||q>65535||q%1!=0)return P.emit("error",new Error("Invalid keepalive")),!1;if(C+=2,C+=1,G){if(typeof G!="object")return P.emit("error",new Error("Invalid will")),!1;if(!G.topic||typeof G.topic!="string")return P.emit("error",new Error("Invalid will topic")),!1;if(C+=a.byteLength(G.topic)+2,G.payload&&G.payload){if(!(G.payload.length>=0))return P.emit("error",new Error("Invalid will payload")),!1;typeof G.payload=="string"?C+=a.byteLength(G.payload)+2:C+=G.payload.length+2}else C+=2}var U=!1;if(z!=null){if(!B(z))return P.emit("error",new Error("Invalid username")),!1;U=!0,C+=a.byteLength(z)+2}if(O!=null){if(!U)return P.emit("error",new Error("Username is required to use password")),!1;if(!B(O))return P.emit("error",new Error("Invalid password")),!1;C+=y(O)+2}P.write(o.CONNECT_HEADER),k(P,C),x(P,H),P.write(K===4?o.VERSION4:o.VERSION3);var L=0;return L|=z!=null?o.USERNAME_MASK:0,L|=O!=null?o.PASSWORD_MASK:0,L|=G&&G.retain?o.WILL_RETAIN_MASK:0,L|=G&&G.qos?G.qos<<o.WILL_QOS_SHIFT:0,L|=G?o.WILL_FLAG_MASK:0,L|=R?o.CLEAN_SESSION_MASK:0,P.write(a.from([L])),l(P,q),x(P,F),G&&(b(P,G.topic),x(P,G.payload)),z!=null&&x(P,z),O!=null&&x(P,O),!0}(M,D);case"connack":return function(A,P){var j=(A||{}).returnCode;return typeof j!="number"?(P.emit("error",new Error("Invalid return code")),!1):(P.write(o.CONNACK_HEADER),k(P,2),P.write(A.sessionPresent?o.SESSIONPRESENT_HEADER:c),P.write(a.from([j])))}(M,D);case"publish":return function(A,P){var j=A||{},H=j.qos||0,K=j.retain?o.RETAIN_MASK:0,G=j.topic,R=j.payload||f,q=j.messageId,F=0;if(typeof G=="string")F+=a.byteLength(G)+2;else{if(!a.isBuffer(G))return P.emit("error",new Error("Invalid topic")),!1;F+=G.length+2}return a.isBuffer(R)?F+=R.length:F+=a.byteLength(R),H&&typeof q!="number"?(P.emit("error",new Error("Invalid messageId")),!1):(H&&(F+=2),P.write(o.PUBLISH_HEADER[H][A.dup?1:0][K?1:0]),k(P,F),l(P,y(G)),P.write(G),H>0&&l(P,q),P.write(R))}(M,D);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return function(A,P){var j=A||{},H=j.cmd||"puback",K=j.messageId,G=j.dup&&H==="pubrel"?o.DUP_MASK:0,R=0;return H==="pubrel"&&(R=1),typeof K!="number"?(P.emit("error",new Error("Invalid messageId")),!1):(P.write(o.ACKS[H][R][G][0]),k(P,2),l(P,K))}(M,D);case"subscribe":return function(A,P){var j=A||{},H=j.dup?o.DUP_MASK:0,K=j.messageId,G=j.subscriptions,R=0;if(typeof K!="number")return P.emit("error",new Error("Invalid messageId")),!1;if(R+=2,typeof G!="object"||!G.length)return P.emit("error",new Error("Invalid subscriptions")),!1;for(var q=0;q<G.length;q+=1){var F=G[q].topic,z=G[q].qos;if(typeof F!="string")return P.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof z!="number")return P.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;R+=a.byteLength(F)+2+1}P.write(o.SUBSCRIBE_HEADER[1][H?1:0][0]),k(P,R),l(P,K);for(var O=!0,C=0;C<G.length;C++){var U=G[C],L=U.topic,Z=U.qos;b(P,L),O=P.write(o.QOS[Z])}return O}(M,D);case"suback":return function(A,P){var j=A||{},H=j.messageId,K=j.granted,G=0;if(typeof H!="number")return P.emit("error",new Error("Invalid messageId")),!1;if(G+=2,typeof K!="object"||!K.length)return P.emit("error",new Error("Invalid qos vector")),!1;for(var R=0;R<K.length;R+=1){if(typeof K[R]!="number")return P.emit("error",new Error("Invalid qos vector")),!1;G+=1}return P.write(o.SUBACK_HEADER),k(P,G),l(P,H),P.write(a.from(K))}(M,D);case"unsubscribe":return function(A,P){var j=A||{},H=j.messageId,K=j.dup?o.DUP_MASK:0,G=j.unsubscriptions,R=0;if(typeof H!="number")return P.emit("error",new Error("Invalid messageId")),!1;if(R+=2,typeof G!="object"||!G.length)return P.emit("error",new Error("Invalid unsubscriptions")),!1;for(var q=0;q<G.length;q+=1){if(typeof G[q]!="string")return P.emit("error",new Error("Invalid unsubscriptions")),!1;R+=a.byteLength(G[q])+2}P.write(o.UNSUBSCRIBE_HEADER[1][K?1:0][0]),k(P,R),l(P,H);for(var F=!0,z=0;z<G.length;z++)F=b(P,G[z]);return F}(M,D);case"pingreq":case"pingresp":case"disconnect":return function(A,P){return P.write(o.EMPTY[A.cmd])}(M,D);default:return D.emit("error",new Error("Unknown command")),!1}}function E(M){M.uncork()}Object.defineProperty(d,"cacheNumbers",{get:function(){return l===v},set:function(M){M?(i&&Object.keys(i).length!==0||(p=!0),l=v):(p=!1,l=u)}});var S={};function k(M,D){var A=S[D];A||(A=function(P){var j=0,H=0,K=a.allocUnsafe(function(G){return G>=0&&G<128?1:G>=128&&G<16384?2:G>=16384&&G<2097152?3:G>=2097152&&G<268435456?4:0}(P));do j=P%128|0,(P=P/128|0)>0&&(j|=128),K.writeUInt8(j,H++);while(P>0);return K}(D),D<16384&&(S[D]=A)),M.write(A)}function b(M,D){var A=a.byteLength(D);l(M,A),M.write(D,"utf8")}function v(M,D){return M.write(i[D])}function u(M,D){return M.write(t(D))}function x(M,D){typeof D=="string"?b(M,D):D?(l(M,D.length),M.write(D)):l(M,0)}function y(M){return M?M instanceof a?M.length:a.byteLength(M):0}function B(M){return typeof M=="string"||M instanceof a}w.exports=d},function(w,I,n){var o=n(168),a=n(170);function f(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}I.parse=v,I.resolve=function(u,x){return v(u,!1,!0).resolve(x)},I.resolveObject=function(u,x){return u?v(u,!1,!0).resolveObject(x):x},I.format=function(u){return a.isString(u)&&(u=v(u)),u instanceof f?u.format():f.prototype.format.call(u)},I.Url=f;var c=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),t=["'"].concat(i),g=["%","/","?",";","#"].concat(t),l=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(171);function v(u,x,y){if(u&&a.isObject(u)&&u instanceof f)return u;var B=new f;return B.parse(u,x,y),B}f.prototype.parse=function(u,x,y){if(!a.isString(u))throw new TypeError("Parameter 'url' must be a string, not "+typeof u);var B=u.indexOf("?"),M=B!==-1&&B<u.indexOf("#")?"?":"#",D=u.split(M);D[0]=D[0].replace(/\\/g,"/");var A=u=D.join(M);if(A=A.trim(),!y&&u.split("#").length===1){var P=s.exec(A);if(P)return this.path=A,this.href=A,this.pathname=P[1],P[2]?(this.search=P[2],this.query=x?b.parse(this.search.substr(1)):this.search.substr(1)):x&&(this.search="",this.query={}),this}var j=c.exec(A);if(j){var H=(j=j[0]).toLowerCase();this.protocol=H,A=A.substr(j.length)}if(y||j||A.match(/^\/\/[^@\/]+@[^@\/]+/)){var K=A.substr(0,2)==="//";!K||j&&S[j]||(A=A.substr(2),this.slashes=!0)}if(!S[j]&&(K||j&&!k[j])){for(var G,R,q=-1,F=0;F<l.length;F++)(z=A.indexOf(l[F]))!==-1&&(q===-1||z<q)&&(q=z);for((R=q===-1?A.lastIndexOf("@"):A.lastIndexOf("@",q))!==-1&&(G=A.slice(0,R),A=A.slice(R+1),this.auth=decodeURIComponent(G)),q=-1,F=0;F<g.length;F++){var z;(z=A.indexOf(g[F]))!==-1&&(q===-1||z<q)&&(q=z)}q===-1&&(q=A.length),this.host=A.slice(0,q),A=A.slice(q),this.parseHost(),this.hostname=this.hostname||"";var O=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!O)for(var C=this.hostname.split(/\./),U=(F=0,C.length);F<U;F++){var L=C[F];if(L&&!L.match(p)){for(var Z="",ft=0,ut=L.length;ft<ut;ft++)L.charCodeAt(ft)>127?Z+="x":Z+=L[ft];if(!Z.match(p)){var vt=C.slice(0,F),rt=C.slice(F+1),h=L.match(d);h&&(vt.push(h[1]),rt.unshift(h[2])),rt.length&&(A="/"+rt.join(".")+A),this.hostname=vt.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=o.toASCII(this.hostname));var m=this.port?":"+this.port:"",r=this.hostname||"";this.host=r+m,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),A[0]!=="/"&&(A="/"+A))}if(!E[H])for(F=0,U=t.length;F<U;F++){var _=t[F];if(A.indexOf(_)!==-1){var T=encodeURIComponent(_);T===_&&(T=escape(_)),A=A.split(_).join(T)}}var N=A.indexOf("#");N!==-1&&(this.hash=A.substr(N),A=A.slice(0,N));var W=A.indexOf("?");if(W!==-1?(this.search=A.substr(W),this.query=A.substr(W+1),x&&(this.query=b.parse(this.query)),A=A.slice(0,W)):x&&(this.search="",this.query={}),A&&(this.pathname=A),k[H]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){m=this.pathname||"";var V=this.search||"";this.path=m+V}return this.href=this.format(),this},f.prototype.format=function(){var u=this.auth||"";u&&(u=(u=encodeURIComponent(u)).replace(/%3A/i,":"),u+="@");var x=this.protocol||"",y=this.pathname||"",B=this.hash||"",M=!1,D="";this.host?M=u+this.host:this.hostname&&(M=u+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(M+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(D=b.stringify(this.query));var A=this.search||D&&"?"+D||"";return x&&x.substr(-1)!==":"&&(x+=":"),this.slashes||(!x||k[x])&&M!==!1?(M="//"+(M||""),y&&y.charAt(0)!=="/"&&(y="/"+y)):M||(M=""),B&&B.charAt(0)!=="#"&&(B="#"+B),A&&A.charAt(0)!=="?"&&(A="?"+A),x+M+(y=y.replace(/[?#]/g,function(P){return encodeURIComponent(P)}))+(A=A.replace("#","%23"))+B},f.prototype.resolve=function(u){return this.resolveObject(v(u,!1,!0)).format()},f.prototype.resolveObject=function(u){if(a.isString(u)){var x=new f;x.parse(u,!1,!0),u=x}for(var y=new f,B=Object.keys(this),M=0;M<B.length;M++){var D=B[M];y[D]=this[D]}if(y.hash=u.hash,u.href==="")return y.href=y.format(),y;if(u.slashes&&!u.protocol){for(var A=Object.keys(u),P=0;P<A.length;P++){var j=A[P];j!=="protocol"&&(y[j]=u[j])}return k[y.protocol]&&y.hostname&&!y.pathname&&(y.path=y.pathname="/"),y.href=y.format(),y}if(u.protocol&&u.protocol!==y.protocol){if(!k[u.protocol]){for(var H=Object.keys(u),K=0;K<H.length;K++){var G=H[K];y[G]=u[G]}return y.href=y.format(),y}if(y.protocol=u.protocol,u.host||S[u.protocol])y.pathname=u.pathname;else{for(var R=(u.pathname||"").split("/");R.length&&!(u.host=R.shift()););u.host||(u.host=""),u.hostname||(u.hostname=""),R[0]!==""&&R.unshift(""),R.length<2&&R.unshift(""),y.pathname=R.join("/")}if(y.search=u.search,y.query=u.query,y.host=u.host||"",y.auth=u.auth,y.hostname=u.hostname||u.host,y.port=u.port,y.pathname||y.search){var q=y.pathname||"",F=y.search||"";y.path=q+F}return y.slashes=y.slashes||u.slashes,y.href=y.format(),y}var z=y.pathname&&y.pathname.charAt(0)==="/",O=u.host||u.pathname&&u.pathname.charAt(0)==="/",C=O||z||y.host&&u.pathname,U=C,L=y.pathname&&y.pathname.split("/")||[],Z=(R=u.pathname&&u.pathname.split("/")||[],y.protocol&&!k[y.protocol]);if(Z&&(y.hostname="",y.port=null,y.host&&(L[0]===""?L[0]=y.host:L.unshift(y.host)),y.host="",u.protocol&&(u.hostname=null,u.port=null,u.host&&(R[0]===""?R[0]=u.host:R.unshift(u.host)),u.host=null),C=C&&(R[0]===""||L[0]==="")),O)y.host=u.host||u.host===""?u.host:y.host,y.hostname=u.hostname||u.hostname===""?u.hostname:y.hostname,y.search=u.search,y.query=u.query,L=R;else if(R.length)L||(L=[]),L.pop(),L=L.concat(R),y.search=u.search,y.query=u.query;else if(!a.isNullOrUndefined(u.search))return Z&&(y.hostname=y.host=L.shift(),(h=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=h.shift(),y.host=y.hostname=h.shift())),y.search=u.search,y.query=u.query,a.isNull(y.pathname)&&a.isNull(y.search)||(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y;if(!L.length)return y.pathname=null,y.search?y.path="/"+y.search:y.path=null,y.href=y.format(),y;for(var ft=L.slice(-1)[0],ut=(y.host||u.host||L.length>1)&&(ft==="."||ft==="..")||ft==="",vt=0,rt=L.length;rt>=0;rt--)(ft=L[rt])==="."?L.splice(rt,1):ft===".."?(L.splice(rt,1),vt++):vt&&(L.splice(rt,1),vt--);if(!C&&!U)for(;vt--;vt)L.unshift("..");!C||L[0]===""||L[0]&&L[0].charAt(0)==="/"||L.unshift(""),ut&&L.join("/").substr(-1)!=="/"&&L.push("");var h,m=L[0]===""||L[0]&&L[0].charAt(0)==="/";return Z&&(y.hostname=y.host=m?"":L.length?L.shift():"",(h=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=h.shift(),y.host=y.hostname=h.shift())),(C=C||y.host&&L.length)&&!m&&L.unshift(""),L.length?y.pathname=L.join("/"):(y.pathname=null,y.path=null),a.isNull(y.pathname)&&a.isNull(y.search)||(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=u.auth||y.auth,y.slashes=y.slashes||u.slashes,y.href=y.format(),y},f.prototype.parseHost=function(){var u=this.host,x=e.exec(u);x&&((x=x[0])!==":"&&(this.port=x.substr(1)),u=u.substr(0,u.length-x.length)),u&&(this.hostname=u)}},function(w,I,n){var o=n(174);w.exports=function(a,f){var c,e;return f.port=f.port||1883,f.hostname=f.hostname||f.host||"localhost",c=f.port,e=f.hostname,o.createConnection(c,e)}},function(w,I,n){var o=!1,a=[];function f(s){o?wx.sendSocketMessage({data:s.buffer||s}):a.push(s)}var c=n(42);function e(s,i){var t=i.protocolId==="MQIsdp"&&i.protocolVersion===3?"mqttv3.1":"mqtt";(function(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})})(i);var g=function(l,p){var d=l.protocol==="wxs"?"wss":"ws",E=d+"://"+l.hostname+l.path;return l.port&&l.port!==80&&l.port!==443&&(E=d+"://"+l.hostname+":"+l.port+l.path),typeof l.transformWsUrl=="function"&&(E=l.transformWsUrl(E,l,p)),E}(i,s);return c(function(l,p){var d={OPEN:1,CLOSING:2,CLOSED:3,readyState:o?1:0,send:f,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:l,protocols:p}),wx.onSocketOpen(function(E){d.readyState=d.OPEN,o=!0;for(var S=0;S<a.length;S++)f(a[S]);a=[],d.onopen&&d.onopen.apply(d,arguments)}),wx.onSocketMessage(function(E){d.onmessage&&d.onmessage.apply(d,arguments)}),wx.onSocketClose(function(){d.onclose&&d.onclose.apply(d,arguments),d.readyState=d.CLOSED,o=!1}),wx.onSocketError(function(){d.onerror&&d.onerror.apply(d,arguments),d.readyState=d.CLOSED,o=!1}),d}(g,[t]))}w.exports=function(s,i){if(i.hostname=i.hostname||i.host,!i.hostname)throw new Error("Could not determine host. Specify host manually.");return e(s,i)}},function(w,I,n){(function(o){var a=n(42),f=n(68),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],e=o.title==="browser";function s(i,t){var g=t.protocolId==="MQIsdp"&&t.protocolVersion===3?"mqttv3.1":"mqtt";(function(p){p.hostname||(p.hostname="localhost"),p.port||(p.protocol==="wss"?p.port=443:p.port=80),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={}),e||p.protocol!=="wss"||c.forEach(function(d){p.hasOwnProperty(d)&&!p.wsOptions.hasOwnProperty(d)&&(p.wsOptions[d]=p[d])})})(t);var l=function(p,d){var E=p.protocol+"://"+p.hostname+":"+p.port+p.path;return typeof p.transformWsUrl=="function"&&(E=p.transformWsUrl(E,p,d)),E}(t,i);return a(l,[g],t.wsOptions)}w.exports=e?function(i,t){if(t.hostname||(t.hostname=t.host),!t.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");var g=f.parse(document.URL);t.hostname=g.hostname,t.port||(t.port=g.port)}return s(i,t)}:function(i,t){return s(i,t)}}).call(this,n(9))},function(w,I,n){var o;w.exports=(o=n(43),function(a){var f=o,c=f.lib,e=c.WordArray,s=c.Hasher,i=f.algo,t=[],g=[];(function(){function d(b){for(var v=a.sqrt(b),u=2;u<=v;u++)if(!(b%u))return!1;return!0}function E(b){return 4294967296*(b-(0|b))|0}for(var S=2,k=0;k<64;)d(S)&&(k<8&&(t[k]=E(a.pow(S,.5))),g[k]=E(a.pow(S,1/3)),k++),S++})();var l=[],p=i.SHA256=s.extend({_doReset:function(){this._hash=new e.init(t.slice(0))},_doProcessBlock:function(d,E){for(var S=this._hash.words,k=S[0],b=S[1],v=S[2],u=S[3],x=S[4],y=S[5],B=S[6],M=S[7],D=0;D<64;D++){if(D<16)l[D]=0|d[E+D];else{var A=l[D-15],P=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,j=l[D-2],H=(j<<15|j>>>17)^(j<<13|j>>>19)^j>>>10;l[D]=P+l[D-7]+H+l[D-16]}var K=k&b^k&v^b&v,G=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22),R=M+((x<<26|x>>>6)^(x<<21|x>>>11)^(x<<7|x>>>25))+(x&y^~x&B)+g[D]+l[D];M=B,B=y,y=x,x=u+R|0,u=v,v=b,b=k,k=R+(G+K)|0}S[0]=S[0]+k|0,S[1]=S[1]+b|0,S[2]=S[2]+v|0,S[3]=S[3]+u|0,S[4]=S[4]+x|0,S[5]=S[5]+y|0,S[6]=S[6]+B|0,S[7]=S[7]+M|0},_doFinalize:function(){var d=this._data,E=d.words,S=8*this._nDataBytes,k=8*d.sigBytes;return E[k>>>5]|=128<<24-k%32,E[14+(k+64>>>9<<4)]=a.floor(S/4294967296),E[15+(k+64>>>9<<4)]=S,d.sigBytes=4*E.length,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});f.SHA256=s._createHelper(p),f.HmacSHA256=s._createHmacHelper(p)}(Math),o.SHA256)},function(w,I,n){w.exports=function(o,a){return function(){for(var f=new Array(arguments.length),c=0;c<f.length;c++)f[c]=arguments[c];return o.apply(a,f)}}},function(w,I,n){var o=n(10);function a(f){return encodeURIComponent(f).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}w.exports=function(f,c,e){if(!c)return f;var s;if(e)s=e(c);else if(o.isURLSearchParams(c))s=c.toString();else{var i=[];o.forEach(c,function(g,l){g!=null&&(o.isArray(g)?l+="[]":g=[g],o.forEach(g,function(p){o.isDate(p)?p=p.toISOString():o.isObject(p)&&(p=JSON.stringify(p)),i.push(a(l)+"="+a(p))}))}),s=i.join("&")}if(s){var t=f.indexOf("#");t!==-1&&(f=f.slice(0,t)),f+=(f.indexOf("?")===-1?"?":"&")+s}return f}},function(w,I,n){w.exports=function(o){return!(!o||!o.__CANCEL__)}},function(w,I,n){(function(o){var a=n(10),f=n(195),c={"Content-Type":"application/x-www-form-urlencoded"};function e(t,g){!a.isUndefined(t)&&a.isUndefined(t["Content-Type"])&&(t["Content-Type"]=g)}var s,i={adapter:((typeof XMLHttpRequest<"u"||o!==void 0&&Object.prototype.toString.call(o)==="[object process]")&&(s=n(77)),s),transformRequest:[function(t,g){return f(g,"Accept"),f(g,"Content-Type"),a.isFormData(t)||a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)?t:a.isArrayBufferView(t)?t.buffer:a.isURLSearchParams(t)?(e(g,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):a.isObject(t)?(e(g,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if(typeof t=="string")try{t=JSON.parse(t)}catch{}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};i.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(t){i.headers[t]={}}),a.forEach(["post","put","patch"],function(t){i.headers[t]=a.merge(c)}),w.exports=i}).call(this,n(9))},function(w,I,n){var o=n(10),a=n(196),f=n(74),c=n(198),e=n(201),s=n(202),i=n(78);w.exports=function(t){return new Promise(function(g,l){var p=t.data,d=t.headers;o.isFormData(p)&&delete d["Content-Type"];var E=new XMLHttpRequest;if(t.auth){var S=t.auth.username||"",k=t.auth.password||"";d.Authorization="Basic "+btoa(S+":"+k)}var b=c(t.baseURL,t.url);if(E.open(t.method.toUpperCase(),f(b,t.params,t.paramsSerializer),!0),E.timeout=t.timeout,E.onreadystatechange=function(){if(E&&E.readyState===4&&(E.status!==0||E.responseURL&&E.responseURL.indexOf("file:")===0)){var x="getAllResponseHeaders"in E?e(E.getAllResponseHeaders()):null,y={data:t.responseType&&t.responseType!=="text"?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:x,config:t,request:E};a(g,l,y),E=null}},E.onabort=function(){E&&(l(i("Request aborted",t,"ECONNABORTED",E)),E=null)},E.onerror=function(){l(i("Network Error",t,null,E)),E=null},E.ontimeout=function(){var x="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),l(i(x,t,"ECONNABORTED",E)),E=null},o.isStandardBrowserEnv()){var v=n(203),u=(t.withCredentials||s(b))&&t.xsrfCookieName?v.read(t.xsrfCookieName):void 0;u&&(d[t.xsrfHeaderName]=u)}if("setRequestHeader"in E&&o.forEach(d,function(x,y){p===void 0&&y.toLowerCase()==="content-type"?delete d[y]:E.setRequestHeader(y,x)}),o.isUndefined(t.withCredentials)||(E.withCredentials=!!t.withCredentials),t.responseType)try{E.responseType=t.responseType}catch(x){if(t.responseType!=="json")throw x}typeof t.onDownloadProgress=="function"&&E.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(x){E&&(E.abort(),l(x),E=null)}),p===void 0&&(p=null),E.send(p)})}},function(w,I,n){var o=n(197);w.exports=function(a,f,c,e,s){var i=new Error(a);return o(i,f,c,e,s)}},function(w,I,n){var o=n(10);w.exports=function(a,f){f=f||{};var c={},e=["url","method","params","data"],s=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];o.forEach(e,function(l){f[l]!==void 0&&(c[l]=f[l])}),o.forEach(s,function(l){o.isObject(f[l])?c[l]=o.deepMerge(a[l],f[l]):f[l]!==void 0?c[l]=f[l]:o.isObject(a[l])?c[l]=o.deepMerge(a[l]):a[l]!==void 0&&(c[l]=a[l])}),o.forEach(i,function(l){f[l]!==void 0?c[l]=f[l]:a[l]!==void 0&&(c[l]=a[l])});var t=e.concat(s).concat(i),g=Object.keys(f).filter(function(l){return t.indexOf(l)===-1});return o.forEach(g,function(l){f[l]!==void 0?c[l]=f[l]:a[l]!==void 0&&(c[l]=a[l])}),c}},function(w,I,n){function o(a){this.message=a}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,w.exports=o},function(w,I){w.exports=function(n,o,a,f){var c=-1,e=n==null?0:n.length;for(f&&e&&(a=n[++c]);++c<e;)a=o(a,n[c],c,n);return a}},function(w,I,n){w.exports.device=n(35),w.exports.thingShadow=n(188),w.exports.jobs=n(189)},function(w,I,n){var o=function(a){var f,c=Object.prototype,e=c.hasOwnProperty,s=typeof Symbol=="function"?Symbol:{},i=s.iterator||"@@iterator",t=s.asyncIterator||"@@asyncIterator",g=s.toStringTag||"@@toStringTag";function l(z,O,C){return Object.defineProperty(z,O,{value:C,enumerable:!0,configurable:!0,writable:!0}),z[O]}try{l({},"")}catch{l=function(O,C,U){return O[C]=U}}function p(z,O,C,U){var L=O&&O.prototype instanceof u?O:u,Z=Object.create(L.prototype),ft=new R(U||[]);return Z._invoke=function(ut,vt,rt){var h=E;return function(m,r){if(h===k)throw new Error("Generator is already running");if(h===b){if(m==="throw")throw r;return F()}for(rt.method=m,rt.arg=r;;){var _=rt.delegate;if(_){var T=H(_,rt);if(T){if(T===v)continue;return T}}if(rt.method==="next")rt.sent=rt._sent=rt.arg;else if(rt.method==="throw"){if(h===E)throw h=b,rt.arg;rt.dispatchException(rt.arg)}else rt.method==="return"&&rt.abrupt("return",rt.arg);h=k;var N=d(ut,vt,rt);if(N.type==="normal"){if(h=rt.done?b:S,N.arg===v)continue;return{value:N.arg,done:rt.done}}N.type==="throw"&&(h=b,rt.method="throw",rt.arg=N.arg)}}}(z,C,ft),Z}function d(z,O,C){try{return{type:"normal",arg:z.call(O,C)}}catch(U){return{type:"throw",arg:U}}}a.wrap=p;var E="suspendedStart",S="suspendedYield",k="executing",b="completed",v={};function u(){}function x(){}function y(){}var B={};B[i]=function(){return this};var M=Object.getPrototypeOf,D=M&&M(M(q([])));D&&D!==c&&e.call(D,i)&&(B=D);var A=y.prototype=u.prototype=Object.create(B);function P(z){["next","throw","return"].forEach(function(O){l(z,O,function(C){return this._invoke(O,C)})})}function j(z,O){function C(L,Z,ft,ut){var vt=d(z[L],z,Z);if(vt.type!=="throw"){var rt=vt.arg,h=rt.value;return h&&typeof h=="object"&&e.call(h,"__await")?O.resolve(h.__await).then(function(m){C("next",m,ft,ut)},function(m){C("throw",m,ft,ut)}):O.resolve(h).then(function(m){rt.value=m,ft(rt)},function(m){return C("throw",m,ft,ut)})}ut(vt.arg)}var U;this._invoke=function(L,Z){function ft(){return new O(function(ut,vt){C(L,Z,ut,vt)})}return U=U?U.then(ft,ft):ft()}}function H(z,O){var C=z.iterator[O.method];if(C===f){if(O.delegate=null,O.method==="throw"){if(z.iterator.return&&(O.method="return",O.arg=f,H(z,O),O.method==="throw"))return v;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var U=d(C,z.iterator,O.arg);if(U.type==="throw")return O.method="throw",O.arg=U.arg,O.delegate=null,v;var L=U.arg;return L?L.done?(O[z.resultName]=L.value,O.next=z.nextLoc,O.method!=="return"&&(O.method="next",O.arg=f),O.delegate=null,v):L:(O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,v)}function K(z){var O={tryLoc:z[0]};1 in z&&(O.catchLoc=z[1]),2 in z&&(O.finallyLoc=z[2],O.afterLoc=z[3]),this.tryEntries.push(O)}function G(z){var O=z.completion||{};O.type="normal",delete O.arg,z.completion=O}function R(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(K,this),this.reset(!0)}function q(z){if(z){var O=z[i];if(O)return O.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var C=-1,U=function L(){for(;++C<z.length;)if(e.call(z,C))return L.value=z[C],L.done=!1,L;return L.value=f,L.done=!0,L};return U.next=U}}return{next:F}}function F(){return{value:f,done:!0}}return x.prototype=A.constructor=y,y.constructor=x,x.displayName=l(y,g,"GeneratorFunction"),a.isGeneratorFunction=function(z){var O=typeof z=="function"&&z.constructor;return!!O&&(O===x||(O.displayName||O.name)==="GeneratorFunction")},a.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,y):(z.__proto__=y,l(z,g,"GeneratorFunction")),z.prototype=Object.create(A),z},a.awrap=function(z){return{__await:z}},P(j.prototype),j.prototype[t]=function(){return this},a.AsyncIterator=j,a.async=function(z,O,C,U,L){L===void 0&&(L=Promise);var Z=new j(p(z,O,C,U),L);return a.isGeneratorFunction(O)?Z:Z.next().then(function(ft){return ft.done?ft.value:Z.next()})},P(A),l(A,g,"Generator"),A[i]=function(){return this},A.toString=function(){return"[object Generator]"},a.keys=function(z){var O=[];for(var C in z)O.push(C);return O.reverse(),function U(){for(;O.length;){var L=O.pop();if(L in z)return U.value=L,U.done=!1,U}return U.done=!0,U}},a.values=q,R.prototype={constructor:R,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(G),!z)for(var O in this)O.charAt(0)==="t"&&e.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=f)},stop:function(){this.done=!0;var z=this.tryEntries[0].completion;if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var O=this;function C(vt,rt){return Z.type="throw",Z.arg=z,O.next=vt,rt&&(O.method="next",O.arg=f),!!rt}for(var U=this.tryEntries.length-1;U>=0;--U){var L=this.tryEntries[U],Z=L.completion;if(L.tryLoc==="root")return C("end");if(L.tryLoc<=this.prev){var ft=e.call(L,"catchLoc"),ut=e.call(L,"finallyLoc");if(ft&&ut){if(this.prev<L.catchLoc)return C(L.catchLoc,!0);if(this.prev<L.finallyLoc)return C(L.finallyLoc)}else if(ft){if(this.prev<L.catchLoc)return C(L.catchLoc,!0)}else{if(!ut)throw new Error("try statement without catch or finally");if(this.prev<L.finallyLoc)return C(L.finallyLoc)}}}},abrupt:function(z,O){for(var C=this.tryEntries.length-1;C>=0;--C){var U=this.tryEntries[C];if(U.tryLoc<=this.prev&&e.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var L=U;break}}L&&(z==="break"||z==="continue")&&L.tryLoc<=O&&O<=L.finallyLoc&&(L=null);var Z=L?L.completion:{};return Z.type=z,Z.arg=O,L?(this.method="next",this.next=L.finallyLoc,v):this.complete(Z)},complete:function(z,O){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&O&&(this.next=O),v},finish:function(z){for(var O=this.tryEntries.length-1;O>=0;--O){var C=this.tryEntries[O];if(C.finallyLoc===z)return this.complete(C.completion,C.afterLoc),G(C),v}},catch:function(z){for(var O=this.tryEntries.length-1;O>=0;--O){var C=this.tryEntries[O];if(C.tryLoc===z){var U=C.completion;if(U.type==="throw"){var L=U.arg;G(C)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(z,O,C){return this.delegate={iterator:q(z),resultName:O,nextLoc:C},this.method==="next"&&(this.arg=f),v}},a}(w.exports);try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}},function(w,I){function n(o,a){return w.exports=n=Object.setPrototypeOf||function(f,c){return f.__proto__=c,f},n(o,a)}w.exports=n},function(w,I){function n(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?w.exports=n=function(a){return typeof a}:w.exports=n=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},n(o)}w.exports=n},function(w,I,n){var o=n(34),a=n(46),f=Object.prototype.hasOwnProperty,c={brackets:function(d){return d+"[]"},comma:"comma",indices:function(d,E){return d+"["+E+"]"},repeat:function(d){return d}},e=Array.isArray,s=Array.prototype.push,i=function(d,E){s.apply(d,e(E)?E:[E])},t=Date.prototype.toISOString,g=a.default,l={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:g,formatter:a.formatters[g],indices:!1,serializeDate:function(d){return t.call(d)},skipNulls:!1,strictNullHandling:!1},p=function d(E,S,k,b,v,u,x,y,B,M,D,A,P){var j,H=E;if(typeof x=="function"?H=x(S,H):H instanceof Date?H=M(H):k==="comma"&&e(H)&&(H=o.maybeMap(H,function(C){return C instanceof Date?M(C):C}).join(",")),H===null){if(b)return u&&!A?u(S,l.encoder,P,"key"):S;H=""}if(typeof(j=H)=="string"||typeof j=="number"||typeof j=="boolean"||typeof j=="symbol"||typeof j=="bigint"||o.isBuffer(H))return u?[D(A?S:u(S,l.encoder,P,"key"))+"="+D(u(H,l.encoder,P,"value"))]:[D(S)+"="+D(String(H))];var K,G=[];if(H===void 0)return G;if(e(x))K=x;else{var R=Object.keys(H);K=y?R.sort(y):R}for(var q=0;q<K.length;++q){var F=K[q],z=H[F];if(!v||z!==null){var O=e(H)?typeof k=="function"?k(S,F):S:S+(B?"."+F:"["+F+"]");i(G,d(z,O,k,b,v,u,x,y,B,M,D,A,P))}}return G};w.exports=function(d,E){var S,k=d,b=function(A){if(!A)return l;if(A.encoder!==null&&A.encoder!==void 0&&typeof A.encoder!="function")throw new TypeError("Encoder has to be a function.");var P=A.charset||l.charset;if(A.charset!==void 0&&A.charset!=="utf-8"&&A.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var j=a.default;if(A.format!==void 0){if(!f.call(a.formatters,A.format))throw new TypeError("Unknown format option provided.");j=A.format}var H=a.formatters[j],K=l.filter;return(typeof A.filter=="function"||e(A.filter))&&(K=A.filter),{addQueryPrefix:typeof A.addQueryPrefix=="boolean"?A.addQueryPrefix:l.addQueryPrefix,allowDots:A.allowDots===void 0?l.allowDots:!!A.allowDots,charset:P,charsetSentinel:typeof A.charsetSentinel=="boolean"?A.charsetSentinel:l.charsetSentinel,delimiter:A.delimiter===void 0?l.delimiter:A.delimiter,encode:typeof A.encode=="boolean"?A.encode:l.encode,encoder:typeof A.encoder=="function"?A.encoder:l.encoder,encodeValuesOnly:typeof A.encodeValuesOnly=="boolean"?A.encodeValuesOnly:l.encodeValuesOnly,filter:K,formatter:H,serializeDate:typeof A.serializeDate=="function"?A.serializeDate:l.serializeDate,skipNulls:typeof A.skipNulls=="boolean"?A.skipNulls:l.skipNulls,sort:typeof A.sort=="function"?A.sort:null,strictNullHandling:typeof A.strictNullHandling=="boolean"?A.strictNullHandling:l.strictNullHandling}}(E);typeof b.filter=="function"?k=(0,b.filter)("",k):e(b.filter)&&(S=b.filter);var v,u=[];if(typeof k!="object"||k===null)return"";v=E&&E.arrayFormat in c?E.arrayFormat:E&&"indices"in E?E.indices?"indices":"repeat":"indices";var x=c[v];S||(S=Object.keys(k)),b.sort&&S.sort(b.sort);for(var y=0;y<S.length;++y){var B=S[y];b.skipNulls&&k[B]===null||i(u,p(k[B],B,x,b.strictNullHandling,b.skipNulls,b.encode?b.encoder:null,b.filter,b.sort,b.allowDots,b.serializeDate,b.formatter,b.encodeValuesOnly,b.charset))}var M=u.join(b.delimiter),D=b.addQueryPrefix===!0?"?":"";return b.charsetSentinel&&(b.charset==="iso-8859-1"?D+="utf8=%26%2310003%3B&":D+="utf8=%E2%9C%93&"),M.length>0?D+M:""}},function(w,I,n){var o=n(34),a=Object.prototype.hasOwnProperty,f=Array.isArray,c={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:o.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},e=function(t){return t.replace(/&#(\d+);/g,function(g,l){return String.fromCharCode(parseInt(l,10))})},s=function(t,g){return t&&typeof t=="string"&&g.comma&&t.indexOf(",")>-1?t.split(","):t},i=function(t,g,l,p){if(t){var d=l.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,E=/(\[[^[\]]*])/g,S=l.depth>0&&/(\[[^[\]]*])/.exec(d),k=S?d.slice(0,S.index):d,b=[];if(k){if(!l.plainObjects&&a.call(Object.prototype,k)&&!l.allowPrototypes)return;b.push(k)}for(var v=0;l.depth>0&&(S=E.exec(d))!==null&&v<l.depth;){if(v+=1,!l.plainObjects&&a.call(Object.prototype,S[1].slice(1,-1))&&!l.allowPrototypes)return;b.push(S[1])}return S&&b.push("["+d.slice(S.index)+"]"),function(u,x,y,B){for(var M=B?x:s(x,y),D=u.length-1;D>=0;--D){var A,P=u[D];if(P==="[]"&&y.parseArrays)A=[].concat(M);else{A=y.plainObjects?Object.create(null):{};var j=P.charAt(0)==="["&&P.charAt(P.length-1)==="]"?P.slice(1,-1):P,H=parseInt(j,10);y.parseArrays||j!==""?!isNaN(H)&&P!==j&&String(H)===j&&H>=0&&y.parseArrays&&H<=y.arrayLimit?(A=[])[H]=M:A[j]=M:A={0:M}}M=A}return M}(b,g,l,p)}};w.exports=function(t,g){var l=function(v){if(!v)return c;if(v.decoder!==null&&v.decoder!==void 0&&typeof v.decoder!="function")throw new TypeError("Decoder has to be a function.");if(v.charset!==void 0&&v.charset!=="utf-8"&&v.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var u=v.charset===void 0?c.charset:v.charset;return{allowDots:v.allowDots===void 0?c.allowDots:!!v.allowDots,allowPrototypes:typeof v.allowPrototypes=="boolean"?v.allowPrototypes:c.allowPrototypes,arrayLimit:typeof v.arrayLimit=="number"?v.arrayLimit:c.arrayLimit,charset:u,charsetSentinel:typeof v.charsetSentinel=="boolean"?v.charsetSentinel:c.charsetSentinel,comma:typeof v.comma=="boolean"?v.comma:c.comma,decoder:typeof v.decoder=="function"?v.decoder:c.decoder,delimiter:typeof v.delimiter=="string"||o.isRegExp(v.delimiter)?v.delimiter:c.delimiter,depth:typeof v.depth=="number"||v.depth===!1?+v.depth:c.depth,ignoreQueryPrefix:v.ignoreQueryPrefix===!0,interpretNumericEntities:typeof v.interpretNumericEntities=="boolean"?v.interpretNumericEntities:c.interpretNumericEntities,parameterLimit:typeof v.parameterLimit=="number"?v.parameterLimit:c.parameterLimit,parseArrays:v.parseArrays!==!1,plainObjects:typeof v.plainObjects=="boolean"?v.plainObjects:c.plainObjects,strictNullHandling:typeof v.strictNullHandling=="boolean"?v.strictNullHandling:c.strictNullHandling}}(g);if(t===""||t==null)return l.plainObjects?Object.create(null):{};for(var p=typeof t=="string"?function(v,u){var x,y={},B=u.ignoreQueryPrefix?v.replace(/^\?/,""):v,M=u.parameterLimit===1/0?void 0:u.parameterLimit,D=B.split(u.delimiter,M),A=-1,P=u.charset;if(u.charsetSentinel)for(x=0;x<D.length;++x)D[x].indexOf("utf8=")===0&&(D[x]==="utf8=%E2%9C%93"?P="utf-8":D[x]==="utf8=%26%2310003%3B"&&(P="iso-8859-1"),A=x,x=D.length);for(x=0;x<D.length;++x)if(x!==A){var j,H,K=D[x],G=K.indexOf("]="),R=G===-1?K.indexOf("="):G+1;R===-1?(j=u.decoder(K,c.decoder,P,"key"),H=u.strictNullHandling?null:""):(j=u.decoder(K.slice(0,R),c.decoder,P,"key"),H=o.maybeMap(s(K.slice(R+1),u),function(q){return u.decoder(q,c.decoder,P,"value")})),H&&u.interpretNumericEntities&&P==="iso-8859-1"&&(H=e(H)),K.indexOf("[]=")>-1&&(H=f(H)?[H]:H),a.call(y,j)?y[j]=o.combine(y[j],H):y[j]=H}return y}(t,l):t,d=l.plainObjects?Object.create(null):{},E=Object.keys(p),S=0;S<E.length;++S){var k=E[S],b=i(k,p[k],l,typeof t=="string");d=o.merge(d,b,l)}return o.compact(d)}},function(w,I){(function(n){w.exports=n}).call(this,{})},function(w,I){w.exports=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}},function(w,I){typeof Object.create=="function"?w.exports=function(n,o){n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:w.exports=function(n,o){n.super_=o;var a=function(){};a.prototype=o.prototype,n.prototype=new a,n.prototype.constructor=n}},function(w,I,n){(function(o){var a=n(92),f=n(47),c=n(68),e=n(36),s={};function i(t,g){if(typeof t!="object"||g||(g=t,t=null),g=g||{},t){var l=c.parse(t,!0);if(l.port!=null&&(l.port=Number(l.port)),(g=e(l,g)).protocol===null)throw new Error("Missing protocol");g.protocol=g.protocol.replace(/:$/,"")}if(function(d){var E;d.auth&&((E=d.auth.match(/^(.+):(.+)$/))?(d.username=E[1],d.password=E[2]):d.username=d.auth)}(g),g.query&&typeof g.query.clientId=="string"&&(g.clientId=g.query.clientId),g.cert&&g.key){if(!g.protocol)throw new Error("Missing secure protocol key");if(["mqtts","wss","wxs"].indexOf(g.protocol)===-1)switch(g.protocol){case"mqtt":g.protocol="mqtts";break;case"ws":g.protocol="wss";break;case"wx":g.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+g.protocol+'"!')}}if(!s[g.protocol]){var p=["mqtts","wss"].indexOf(g.protocol)!==-1;g.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter(function(d,E){return(!p||E%2!=0)&&typeof s[d]=="function"})[0]}if(g.clean===!1&&!g.clientId)throw new Error("Missing clientId for unclean clients");return g.protocol&&(g.defaultProtocol=g.protocol),new a(function(d){return g.servers&&(d._reconnectCount&&d._reconnectCount!==g.servers.length||(d._reconnectCount=0),g.host=g.servers[d._reconnectCount].host,g.port=g.servers[d._reconnectCount].port,g.protocol=g.servers[d._reconnectCount].protocol?g.servers[d._reconnectCount].protocol:g.defaultProtocol,g.hostname=g.host,d._reconnectCount++),s[g.protocol](d,g)},g)}o.title!=="browser"?(s.mqtt=n(69),s.tcp=n(69),s.ssl=n(41),s.tls=n(41),s.mqtts=n(41)):(s.wx=n(70),s.wxs=n(70)),s.ws=n(71),s.wss=n(71),w.exports=i,w.exports.connect=i,w.exports.MqttClient=a,w.exports.Store=f}).call(this,n(9))},function(w,I,n){(function(o,a){var f=n(15),c=n(47),e=n(65),s=n(159),i=n(28).Writable,t=n(13),g=n(166),l=n(167),p=n(36),d=o.setImmediate||function(u){a.nextTick(u)},E={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};function S(u,x,y){u.emit("packetsend",x),!s.writeToStream(x,u.stream)&&y?u.stream.once("drain",y):y&&y()}function k(u,x,y){u.outgoingStore.put(x,function(B){if(B)return y&&y(B);S(u,x,y)})}function b(){}function v(u,x){var y,B=this;if(!(this instanceof v))return new v(u,x);for(y in this.options=x||{},E)this.options[y]===void 0?this.options[y]=E[y]:this.options[y]=x[y];this.options.clientId=typeof this.options.clientId=="string"?this.options.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),this.streamBuilder=u,this.outgoingStore=this.options.outgoingStore||new c,this.incomingStore=this.options.incomingStore||new c,this.queueQoSZero=this.options.queueQoSZero===void 0||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this.on("connect",function(){if(!this.disconnected){this.connected=!0;var D=this.outgoingStore.createStream();this.once("close",A),D.on("end",function(){B.removeListener("close",A)}),D.on("error",function(P){B.removeListener("close",A),B.emit("error",P)}),function P(){if(D){var j,H=D.read(1);H?B.disconnecting||B.reconnectTimer?D.destroy&&D.destroy():(j=B.outgoing[H.messageId],B.outgoing[H.messageId]=function(K,G){j&&j(K,G),P()},B._sendPacket(H)):D.once("readable",P)}}()}function A(){D.destroy(),D=null}}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){var D=this.queue;(function A(){var P,j=D.shift();j&&(P=j.packet,B._sendPacket(P,function(H){j.cb&&j.cb(H),A()}))})()});var M=!0;this.on("connect",function(){!M&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),M=!1}),this.on("close",function(){B.pingTimer!==null&&(B.pingTimer.clear(),B.pingTimer=null)}),this.on("close",this._setupReconnect),f.EventEmitter.call(this),this._setupStream()}t(v,f.EventEmitter),v.prototype._setupStream=function(){var u,x=this,y=new i,B=s.parser(this.options),M=null,D=[];function A(){a.nextTick(P)}function P(){var j=D.shift(),H=M;j?x._handlePacket(j,A):(M=null,H())}this._clearReconnect(),this.stream=this.streamBuilder(this),B.on("packet",function(j){D.push(j)}),y._write=function(j,H,K){M=K,B.parse(j),P()},this.stream.pipe(y),this.stream.on("error",b),e(this.stream,this.emit.bind(this,"close")),(u=Object.create(this.options)).cmd="connect",S(this,u),B.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){x._cleanUp(!0)},this.options.connectTimeout)},v.prototype._handlePacket=function(u,x){switch(this.emit("packetreceive",u),u.cmd){case"publish":this._handlePublish(u,x);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(u),x();break;case"pubrel":this._handlePubrel(u,x);break;case"connack":this._handleConnack(u),x();break;case"pingresp":this._handlePingresp(u),x()}},v.prototype._checkDisconnecting=function(u){return this.disconnecting&&(u?u(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},v.prototype.publish=function(u,x,y,B){var M;if(typeof y=="function"&&(B=y,y=null),y=p({qos:0,retain:!1,dup:!1},y),this._checkDisconnecting(B))return this;switch(M={cmd:"publish",topic:u,payload:x,qos:y.qos,retain:y.retain,messageId:this._nextId(),dup:y.dup},y.qos){case 1:case 2:this.outgoing[M.messageId]=B||b,this._sendPacket(M);break;default:this._sendPacket(M,B)}return this},v.prototype.subscribe=function(){var u,x,y=Array.prototype.slice.call(arguments),B=[],M=y.shift(),D=M.resubscribe,A=y.pop()||b,P=y.pop(),j=this;if(delete M.resubscribe,typeof M=="string"&&(M=[M]),typeof A!="function"&&(P=A,A=b),(x=l.validateTopics(M))!==null)return d(A,new Error("Invalid topic "+x)),this;if(this._checkDisconnecting(A))return this;var H={qos:0};if(P=p(H,P),Array.isArray(M)?M.forEach(function(G){(j._resubscribeTopics[G]<P.qos||!j._resubscribeTopics.hasOwnProperty(G)||D)&&B.push({topic:G,qos:P.qos})}):Object.keys(M).forEach(function(G){(j._resubscribeTopics[G]<M[G]||!j._resubscribeTopics.hasOwnProperty(G)||D)&&B.push({topic:G,qos:M[G]})}),u={cmd:"subscribe",subscriptions:B,qos:1,retain:!1,dup:!1,messageId:this._nextId()},B.length){if(this.options.resubscribe){var K=[];B.forEach(function(G){j.options.reconnectPeriod>0&&(j._resubscribeTopics[G.topic]=G.qos,K.push(G.topic))}),j.messageIdToTopic[u.messageId]=K}return this.outgoing[u.messageId]=function(G,R){if(!G)for(var q=R.granted,F=0;F<q.length;F+=1)B[F].qos=q[F];A(G,B)},this._sendPacket(u),this}A(null,[])},v.prototype.unsubscribe=function(u,x){var y={cmd:"unsubscribe",qos:1,messageId:this._nextId()},B=this;return x=x||b,this._checkDisconnecting(x)||(typeof u=="string"?y.unsubscriptions=[u]:typeof u=="object"&&u.length&&(y.unsubscriptions=u),this.options.resubscribe&&y.unsubscriptions.forEach(function(M){delete B._resubscribeTopics[M]}),this.outgoing[y.messageId]=x,this._sendPacket(y)),this},v.prototype.end=function(u,x){var y=this;function B(){y.disconnected=!0,y.incomingStore.close(function(){y.outgoingStore.close(function(){x&&x.apply(null,arguments),y.emit("end")})}),y._deferredReconnect&&y._deferredReconnect()}function M(){y._cleanUp(u,d.bind(null,B))}return typeof u=="function"&&(x=u,u=!1),this.disconnecting||(this._clearReconnect(),this.disconnecting=!0,!u&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,M,10)):M()),this},v.prototype.removeOutgoingMessage=function(u){var x=this.outgoing[u];return delete this.outgoing[u],this.outgoingStore.del({messageId:u},function(){x(new Error("Message removed"))}),this},v.prototype.reconnect=function(u){var x=this,y=function(){u?(x.options.incomingStore=u.incomingStore,x.options.outgoingStore=u.outgoingStore):(x.options.incomingStore=null,x.options.outgoingStore=null),x.incomingStore=x.options.incomingStore||new c,x.outgoingStore=x.options.outgoingStore||new c,x.disconnecting=!1,x.disconnected=!1,x._deferredReconnect=null,x._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=y:y(),this},v.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},v.prototype._setupReconnect=function(){var u=this;!u.disconnecting&&!u.reconnectTimer&&u.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),u.reconnectTimer=setInterval(function(){u._reconnect()},u.options.reconnectPeriod))},v.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},v.prototype._cleanUp=function(u,x){var y;x&&this.stream.on("close",x),u?(this.options.reconnectPeriod===0&&this.options.clean&&(y=this.outgoing)&&Object.keys(y).forEach(function(B){typeof y[B]=="function"&&(y[B](new Error("Connection closed")),delete y[B])}),this.stream.destroy()):this._sendPacket({cmd:"disconnect"},d.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(this.pingTimer.clear(),this.pingTimer=null),x&&!this.connected&&(this.stream.removeListener("close",x),x())},v.prototype._sendPacket=function(u,x){if(this.connected){switch(this._shiftPingInterval(),u.cmd){case"publish":break;case"pubrel":return void k(this,u,x);default:return void S(this,u,x)}switch(u.qos){case 2:case 1:k(this,u,x);break;case 0:default:S(this,u,x)}}else(u.qos||0)===0&&this.queueQoSZero||u.cmd!=="publish"?this.queue.push({packet:u,cb:x}):u.qos>0?(x=this.outgoing[u.messageId],this.outgoingStore.put(u,function(y){if(y)return x&&x(y)})):x&&x(new Error("No connection to broker"))},v.prototype._setupPingTimer=function(){var u=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=g(function(){u._checkPing()},1e3*this.options.keepalive))},v.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},v.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},v.prototype._handlePingresp=function(){this.pingResp=!0},v.prototype._handleConnack=function(u){var x=u.returnCode;if(clearTimeout(this.connackTimer),x===0)this.reconnecting=!1,this.emit("connect",u);else if(x>0){var y=new Error("Connection refused: "+["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"][x]);y.code=x,this.emit("error",y)}},v.prototype._handlePublish=function(u,x){x=x!==void 0?x:b;var y=u.topic.toString(),B=u.payload,M=u.qos,D=u.messageId,A=this;switch(M){case 2:this.incomingStore.put(u,function(P){if(P)return x(P);A._sendPacket({cmd:"pubrec",messageId:D},x)});break;case 1:this.emit("message",y,B,u),this.handleMessage(u,function(P){if(P)return x(P);A._sendPacket({cmd:"puback",messageId:D},x)});break;case 0:this.emit("message",y,B,u),this.handleMessage(u,x)}},v.prototype.handleMessage=function(u,x){x()},v.prototype._handleAck=function(u){var x=u.messageId,y=u.cmd,B=null,M=this.outgoing[x],D=this;if(M){switch(y){case"pubcomp":case"puback":delete this.outgoing[x],this.outgoingStore.del(u,M);break;case"pubrec":B={cmd:"pubrel",qos:2,messageId:x},this._sendPacket(B);break;case"suback":if(delete this.outgoing[x],u.granted.length===1&&(128&u.granted[0])!=0){var A=this.messageIdToTopic[x];A&&A.forEach(function(P){delete D._resubscribeTopics[P]})}M(null,u);break;case"unsuback":delete this.outgoing[x],M(null);break;default:D.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")}},v.prototype._handlePubrel=function(u,x){x=x!==void 0?x:b;var y=u.messageId,B=this,M={cmd:"pubcomp",messageId:y};B.incomingStore.get(u,function(D,A){D||A.cmd==="pubrel"?B._sendPacket(M,x):(B.emit("message",A.topic,A.payload,A),B.incomingStore.put(u,function(P){if(P)return x(P);B.handleMessage(A,function(j){if(j)return x(j);B._sendPacket(M,x)})}))})},v.prototype._nextId=function(){var u=this.nextId++;return this.nextId===65536&&(this.nextId=1),u},v.prototype.getLastMessageId=function(){return this.nextId===1?65535:this.nextId-1},w.exports=v}).call(this,n(12),n(9))},function(w,I,n){I.byteLength=function(g){var l=i(g),p=l[0],d=l[1];return 3*(p+d)/4-d},I.toByteArray=function(g){var l,p,d=i(g),E=d[0],S=d[1],k=new f(function(u,x,y){return 3*(x+y)/4-y}(0,E,S)),b=0,v=S>0?E-4:E;for(p=0;p<v;p+=4)l=a[g.charCodeAt(p)]<<18|a[g.charCodeAt(p+1)]<<12|a[g.charCodeAt(p+2)]<<6|a[g.charCodeAt(p+3)],k[b++]=l>>16&255,k[b++]=l>>8&255,k[b++]=255&l;return S===2&&(l=a[g.charCodeAt(p)]<<2|a[g.charCodeAt(p+1)]>>4,k[b++]=255&l),S===1&&(l=a[g.charCodeAt(p)]<<10|a[g.charCodeAt(p+1)]<<4|a[g.charCodeAt(p+2)]>>2,k[b++]=l>>8&255,k[b++]=255&l),k},I.fromByteArray=function(g){for(var l,p=g.length,d=p%3,E=[],S=16383,k=0,b=p-d;k<b;k+=S)E.push(t(g,k,k+S>b?b:k+S));return d===1?(l=g[p-1],E.push(o[l>>2]+o[l<<4&63]+"==")):d===2&&(l=(g[p-2]<<8)+g[p-1],E.push(o[l>>10]+o[l>>4&63]+o[l<<2&63]+"=")),E.join("")};for(var o=[],a=[],f=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,s=c.length;e<s;++e)o[e]=c[e],a[c.charCodeAt(e)]=e;function i(g){var l=g.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=g.indexOf("=");return p===-1&&(p=l),[p,p===l?0:4-p%4]}function t(g,l,p){for(var d,E,S=[],k=l;k<p;k+=3)d=(g[k]<<16&16711680)+(g[k+1]<<8&65280)+(255&g[k+2]),S.push(o[(E=d)>>18&63]+o[E>>12&63]+o[E>>6&63]+o[63&E]);return S.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(w,I){I.read=function(n,o,a,f,c){var e,s,i=8*c-f-1,t=(1<<i)-1,g=t>>1,l=-7,p=a?c-1:0,d=a?-1:1,E=n[o+p];for(p+=d,e=E&(1<<-l)-1,E>>=-l,l+=i;l>0;e=256*e+n[o+p],p+=d,l-=8);for(s=e&(1<<-l)-1,e>>=-l,l+=f;l>0;s=256*s+n[o+p],p+=d,l-=8);if(e===0)e=1-g;else{if(e===t)return s?NaN:1/0*(E?-1:1);s+=Math.pow(2,f),e-=g}return(E?-1:1)*s*Math.pow(2,e-f)},I.write=function(n,o,a,f,c,e){var s,i,t,g=8*e-c-1,l=(1<<g)-1,p=l>>1,d=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=f?0:e-1,S=f?1:-1,k=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(i=isNaN(o)?1:0,s=l):(s=Math.floor(Math.log(o)/Math.LN2),o*(t=Math.pow(2,-s))<1&&(s--,t*=2),(o+=s+p>=1?d/t:d*Math.pow(2,1-p))*t>=2&&(s++,t/=2),s+p>=l?(i=0,s=l):s+p>=1?(i=(o*t-1)*Math.pow(2,c),s+=p):(i=o*Math.pow(2,p-1)*Math.pow(2,c),s=0));c>=8;n[a+E]=255&i,E+=S,i/=256,c-=8);for(s=s<<c|i,g+=c;g>0;n[a+E]=255&s,E+=S,s/=256,g-=8);n[a+E-S]|=128*k}},function(w,I){},function(w,I,n){var o=n(37).Buffer,a=n(97);w.exports=function(){function f(){(function(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}return f.prototype.push=function(c){var e={data:c,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},f.prototype.unshift=function(c){var e={data:c,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length},f.prototype.shift=function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}},f.prototype.clear=function(){this.head=this.tail=null,this.length=0},f.prototype.join=function(c){if(this.length===0)return"";for(var e=this.head,s=""+e.data;e=e.next;)s+=c+e.data;return s},f.prototype.concat=function(c){if(this.length===0)return o.alloc(0);if(this.length===1)return this.head.data;for(var e,s,i,t=o.allocUnsafe(c>>>0),g=this.head,l=0;g;)e=g.data,s=t,i=l,e.copy(s,i),l+=g.data.length,g=g.next;return t},f}(),a&&a.inspect&&a.inspect.custom&&(w.exports.prototype[a.inspect.custom]=function(){var f=a.inspect({length:this.length});return this.constructor.name+" "+f})},function(w,I){},function(w,I,n){(function(o){var a=o!==void 0&&o||typeof self<"u"&&self||window,f=Function.prototype.apply;function c(e,s){this._id=e,this._clearFn=s}I.setTimeout=function(){return new c(f.call(setTimeout,a,arguments),clearTimeout)},I.setInterval=function(){return new c(f.call(setInterval,a,arguments),clearInterval)},I.clearTimeout=I.clearInterval=function(e){e&&e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(a,this._id)},I.enroll=function(e,s){clearTimeout(e._idleTimeoutId),e._idleTimeout=s},I.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},I._unrefActive=I.active=function(e){clearTimeout(e._idleTimeoutId);var s=e._idleTimeout;s>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},s))},n(99),I.setImmediate=typeof self<"u"&&self.setImmediate||o!==void 0&&o.setImmediate||this&&this.setImmediate,I.clearImmediate=typeof self<"u"&&self.clearImmediate||o!==void 0&&o.clearImmediate||this&&this.clearImmediate}).call(this,n(12))},function(w,I,n){(function(o,a){(function(f,c){if(!f.setImmediate){var e,s,i,t,g,l=1,p={},d=!1,E=f.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(f);S=S&&S.setTimeout?S:f,{}.toString.call(f.process)==="[object process]"?e=function(v){a.nextTick(function(){b(v)})}:function(){if(f.postMessage&&!f.importScripts){var v=!0,u=f.onmessage;return f.onmessage=function(){v=!1},f.postMessage("","*"),f.onmessage=u,v}}()?(t="setImmediate$"+Math.random()+"$",g=function(v){v.source===f&&typeof v.data=="string"&&v.data.indexOf(t)===0&&b(+v.data.slice(t.length))},f.addEventListener?f.addEventListener("message",g,!1):f.attachEvent("onmessage",g),e=function(v){f.postMessage(t+v,"*")}):f.MessageChannel?((i=new MessageChannel).port1.onmessage=function(v){b(v.data)},e=function(v){i.port2.postMessage(v)}):E&&"onreadystatechange"in E.createElement("script")?(s=E.documentElement,e=function(v){var u=E.createElement("script");u.onreadystatechange=function(){b(v),u.onreadystatechange=null,s.removeChild(u),u=null},s.appendChild(u)}):e=function(v){setTimeout(b,0,v)},S.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var u=new Array(arguments.length-1),x=0;x<u.length;x++)u[x]=arguments[x+1];var y={callback:v,args:u};return p[l]=y,e(l),l++},S.clearImmediate=k}function k(v){delete p[v]}function b(v){if(d)setTimeout(b,0,v);else{var u=p[v];if(u){d=!0;try{(function(x){var y=x.callback,B=x.args;switch(B.length){case 0:y();break;case 1:y(B[0]);break;case 2:y(B[0],B[1]);break;case 3:y(B[0],B[1],B[2]);break;default:y.apply(void 0,B)}})(u)}finally{k(v),d=!1}}}}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,n(12),n(9))},function(w,I,n){(function(o){function a(f){try{if(!o.localStorage)return!1}catch{return!1}var c=o.localStorage[f];return c!=null&&String(c).toLowerCase()==="true"}w.exports=function(f,c){if(a("noDeprecation"))return f;var e=!1;return function(){if(!e){if(a("throwDeprecation"))throw new Error(c);a("traceDeprecation")?console.trace(c):console.warn(c),e=!0}return f.apply(this,arguments)}}}).call(this,n(12))},function(w,I,n){w.exports=f;var o=n(54),a=Object.create(n(25));function f(c){if(!(this instanceof f))return new f(c);o.call(this,c)}a.inherits=n(13),a.inherits(f,o),f.prototype._transform=function(c,e,s){s(null,c)}},function(w,I,n){w.exports=n(103)()?Map:n(104)},function(w,I,n){w.exports=function(){var o,a;if(typeof Map!="function")return!1;try{o=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch{return!1}return String(o)==="[object Map]"&&o.size===3&&typeof o.clear=="function"&&typeof o.delete=="function"&&typeof o.entries=="function"&&typeof o.forEach=="function"&&typeof o.get=="function"&&typeof o.has=="function"&&typeof o.keys=="function"&&typeof o.set=="function"&&typeof o.values=="function"&&(a=o.entries().next()).done===!1&&!!a.value&&a.value[0]==="raz"&&a.value[1]==="one"}},function(w,I,n){var o,a=n(55),f=n(106),c=n(29),e=n(20),s=n(14),i=n(11),t=n(125),g=n(16),l=n(63),p=n(135),d=n(153),E=n(156),S=Function.prototype.call,k=Object.defineProperties,b=Object.getPrototypeOf;w.exports=o=function(){var v,u,x,y=arguments[0];if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");return x=E&&c&&Map!==o?c(new Map,b(this)):this,y!=null&&l(y),k(x,{__mapKeysData__:i("c",v=[]),__mapValuesData__:i("c",u=[])}),y&&p(y,function(B){var M=s(B)[0];B=B[1],f.call(v,M)===-1&&(v.push(M),u.push(B))},x),x},E&&(c&&c(o,Map),o.prototype=Object.create(Map.prototype,{constructor:i(o)})),t(k(o.prototype,{clear:i(function(){this.__mapKeysData__.length&&(a.call(this.__mapKeysData__),a.call(this.__mapValuesData__),this.emit("_clear"))}),delete:i(function(v){var u=f.call(this.__mapKeysData__,v);return u!==-1&&(this.__mapKeysData__.splice(u,1),this.__mapValuesData__.splice(u,1),this.emit("_delete",u,v),!0)}),entries:i(function(){return new d(this,"key+value")}),forEach:i(function(v){var u,x,y=arguments[1];for(e(v),x=(u=this.entries())._next();x!==void 0;)S.call(v,y,this.__mapValuesData__[x],this.__mapKeysData__[x],this),x=u._next()}),get:i(function(v){var u=f.call(this.__mapKeysData__,v);if(u!==-1)return this.__mapValuesData__[u]}),has:i(function(v){return f.call(this.__mapKeysData__,v)!==-1}),keys:i(function(){return new d(this,"key")}),set:i(function(v,u){var x,y=f.call(this.__mapKeysData__,v);return y===-1&&(y=this.__mapKeysData__.push(v)-1,x=!0),this.__mapValuesData__[y]=u,x&&this.emit("_add",y,v),this}),size:i.gs(function(){return this.__mapKeysData__.length}),values:i(function(){return new d(this,"value")}),toString:i(function(){return"[object Map]"})})),Object.defineProperty(o.prototype,g.iterator,i(function(){return this.entries()})),Object.defineProperty(o.prototype,g.toStringTag,i("c","Map"))},function(w,I,n){w.exports=function(){}},function(w,I,n){var o=n(107),a=n(56),f=n(14),c=Array.prototype.indexOf,e=Object.prototype.hasOwnProperty,s=Math.abs,i=Math.floor;w.exports=function(t){var g,l,p,d;if(!o(t))return c.apply(this,arguments);for(l=a(f(this).length),p=arguments[1],g=p=isNaN(p)?0:p>=0?i(p):a(this.length)-i(s(p));g<l;++g)if(e.call(this,g)&&(d=this[g],o(d)))return g;return-1}},function(w,I,n){w.exports=n(108)()?Number.isNaN:n(109)},function(w,I,n){w.exports=function(){var o=Number.isNaN;return typeof o=="function"&&!o({})&&o(NaN)&&!o(34)}},function(w,I,n){w.exports=function(o){return o!=o}},function(w,I,n){var o=n(111),a=Math.abs,f=Math.floor;w.exports=function(c){return isNaN(c)?0:(c=Number(c))!==0&&isFinite(c)?o(c)*f(a(c)):c}},function(w,I,n){w.exports=n(112)()?Math.sign:n(113)},function(w,I,n){w.exports=function(){var o=Math.sign;return typeof o=="function"&&o(10)===1&&o(-20)===-1}},function(w,I,n){w.exports=function(o){return o=Number(o),isNaN(o)||o===0?o:o>0?1:-1}},function(w,I,n){var o=n(21),a={function:!0,object:!0};w.exports=function(f){return o(f)&&a[typeof f]||!1}},function(w,I,n){var o,a,f,c,e=Object.create;n(57)()||(o=n(58)),w.exports=o?o.level!==1?e:(a={},f={},c={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(s){f[s]=s!=="__proto__"?c:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(a,f),Object.defineProperty(o,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a}),function(s,i){return e(s===null?a:s,i)}):e},function(w,I,n){var o=n(117);w.exports=function(a){if(typeof a!="function"||!hasOwnProperty.call(a,"length"))return!1;try{if(typeof a.length!="number"||typeof a.call!="function"||typeof a.apply!="function")return!1}catch{return!1}return!o(a)}},function(w,I,n){var o=n(38);w.exports=function(a){if(!o(a))return!1;try{return!!a.constructor&&a.constructor.prototype===a}catch{return!1}}},function(w,I,n){w.exports=function(){var o,a=Object.assign;return typeof a=="function"&&(a(o={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}},function(w,I,n){var o=n(120),a=n(14),f=Math.max;w.exports=function(c,e){var s,i,t,g=f(arguments.length,2);for(c=Object(a(c)),t=function(l){try{c[l]=e[l]}catch(p){s||(s=p)}},i=1;i<g;++i)o(e=arguments[i]).forEach(t);if(s!==void 0)throw s;return c}},function(w,I,n){w.exports=n(121)()?Object.keys:n(122)},function(w,I,n){w.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(w,I,n){var o=n(21),a=Object.keys;w.exports=function(f){return a(o(f)?Object(f):f)}},function(w,I,n){var o="razdwatrzy";w.exports=function(){return typeof o.contains=="function"&&o.contains("dwa")===!0&&o.contains("foo")===!1}},function(w,I,n){var o=String.prototype.indexOf;w.exports=function(a){return o.call(this,a,arguments[1])>-1}},function(w,I,n){var o,a,f,c,e,s,i,t=n(11),g=n(20),l=Function.prototype.apply,p=Function.prototype.call,d=Object.create,E=Object.defineProperty,S=Object.defineProperties,k=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};a=function(v,u){var x,y;return g(u),y=this,o.call(this,v,x=function(){f.call(y,v,x),l.call(u,this,arguments)}),x.__eeOnceListener__=u,this},e={on:o=function(v,u){var x;return g(u),k.call(this,"__ee__")?x=this.__ee__:(x=b.value=d(null),E(this,"__ee__",b),b.value=null),x[v]?typeof x[v]=="object"?x[v].push(u):x[v]=[x[v],u]:x[v]=u,this},once:a,off:f=function(v,u){var x,y,B,M;if(g(u),!k.call(this,"__ee__"))return this;if(!(x=this.__ee__)[v])return this;if(typeof(y=x[v])=="object")for(M=0;B=y[M];++M)B!==u&&B.__eeOnceListener__!==u||(y.length===2?x[v]=y[M?0:1]:y.splice(M,1));else y!==u&&y.__eeOnceListener__!==u||delete x[v];return this},emit:c=function(v){var u,x,y,B,M;if(k.call(this,"__ee__")&&(B=this.__ee__[v]))if(typeof B=="object"){for(x=arguments.length,M=new Array(x-1),u=1;u<x;++u)M[u-1]=arguments[u];for(B=B.slice(),u=0;y=B[u];++u)l.call(y,this,M)}else switch(arguments.length){case 1:p.call(B,this);break;case 2:p.call(B,this,arguments[1]);break;case 3:p.call(B,this,arguments[1],arguments[2]);break;default:for(x=arguments.length,M=new Array(x-1),u=1;u<x;++u)M[u-1]=arguments[u];l.call(B,this,M)}}},s={on:t(o),once:t(a),off:t(f),emit:t(c)},i=S({},s),w.exports=I=function(v){return v==null?d(i):S(Object(v),s)},I.methods=e},function(w,I,n){var o=n(30),a={object:!0,symbol:!0};w.exports=function(){var f,c=o.Symbol;if(typeof c!="function")return!1;f=c("test symbol");try{String(f)}catch{return!1}return!!a[typeof c.iterator]&&!!a[typeof c.toPrimitive]&&!!a[typeof c.toStringTag]}},function(w,I,n){w.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},function(w,I){var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};w.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},function(w,I,n){var o,a,f,c=n(11),e=n(62),s=n(30).Symbol,i=n(131),t=n(132),g=n(133),l=Object.create,p=Object.defineProperties,d=Object.defineProperty;if(typeof s=="function")try{String(s()),f=!0}catch{}else s=null;a=function(E){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return o(E)},w.exports=o=function E(S){var k;if(this instanceof E)throw new TypeError("Symbol is not a constructor");return f?s(S):(k=l(a.prototype),S=S===void 0?"":String(S),p(k,{__description__:c("",S),__name__:c("",i(S))}))},t(o),g(o),p(a.prototype,{constructor:c(o),toString:c("",function(){return this.__name__})}),p(o.prototype,{toString:c(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:c(function(){return e(this)})}),d(o.prototype,o.toPrimitive,c("",function(){var E=e(this);return typeof E=="symbol"?E:E.toString()})),d(o.prototype,o.toStringTag,c("c","Symbol")),d(a.prototype,o.toStringTag,c("c",o.prototype[o.toStringTag])),d(a.prototype,o.toPrimitive,c("c",o.prototype[o.toPrimitive]))},function(w,I,n){w.exports=function(o){return!!o&&(typeof o=="symbol"||!!o.constructor&&o.constructor.name==="Symbol"&&o[o.constructor.toStringTag]==="Symbol")}},function(w,I,n){var o=n(11),a=Object.create,f=Object.defineProperty,c=Object.prototype,e=a(null);w.exports=function(s){for(var i,t,g=0;e[s+(g||"")];)++g;return e[s+=g||""]=!0,f(c,i="@@"+s,o.gs(null,function(l){t||(t=!0,f(this,i,o(l)),t=!1)})),i}},function(w,I,n){var o=n(11),a=n(30).Symbol;w.exports=function(f){return Object.defineProperties(f,{hasInstance:o("",a&&a.hasInstance||f("hasInstance")),isConcatSpreadable:o("",a&&a.isConcatSpreadable||f("isConcatSpreadable")),iterator:o("",a&&a.iterator||f("iterator")),match:o("",a&&a.match||f("match")),replace:o("",a&&a.replace||f("replace")),search:o("",a&&a.search||f("search")),species:o("",a&&a.species||f("species")),split:o("",a&&a.split||f("split")),toPrimitive:o("",a&&a.toPrimitive||f("toPrimitive")),toStringTag:o("",a&&a.toStringTag||f("toStringTag")),unscopables:o("",a&&a.unscopables||f("unscopables"))})}},function(w,I,n){var o=n(11),a=n(62),f=Object.create(null);w.exports=function(c){return Object.defineProperties(c,{for:o(function(e){return f[e]?f[e]:f[e]=c(String(e))}),keyFor:o(function(e){var s;for(s in a(e),f)if(f[s]===e)return s})})}},function(w,I,n){var o=n(31),a=n(21),f=n(32),c=n(16).iterator,e=Array.isArray;w.exports=function(s){return!!a(s)&&(!!e(s)||!!f(s)||!!o(s)||typeof s[c]=="function")}},function(w,I,n){var o=n(31),a=n(20),f=n(32),c=n(136),e=Array.isArray,s=Function.prototype.call,i=Array.prototype.some;w.exports=function(t,g){var l,p,d,E,S,k,b,v,u=arguments[2];if(e(t)||o(t)?l="array":f(t)?l="string":t=c(t),a(g),d=function(){E=!0},l!=="array")if(l!=="string")for(p=t.next();!p.done;){if(s.call(g,u,p.value,d),E)return;p=t.next()}else for(k=t.length,S=0;S<k&&(b=t[S],S+1<k&&(v=b.charCodeAt(0))>=55296&&v<=56319&&(b+=t[++S]),s.call(g,u,b,d),!E);++S);else i.call(t,function(x){return s.call(g,u,x,d),E})}},function(w,I,n){var o=n(31),a=n(32),f=n(137),c=n(152),e=n(63),s=n(16).iterator;w.exports=function(i){return typeof e(i)[s]=="function"?i[s]():o(i)?new f(i):a(i)?new c(i):new f(i)}},function(w,I,n){var o,a=n(29),f=n(61),c=n(11),e=n(16),s=n(40),i=Object.defineProperty;o=w.exports=function(t,g){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");s.call(this,t),g=g?f.call(g,"key+value")?"key+value":f.call(g,"key")?"key":"value":"value",i(this,"__kind__",c("",g))},a&&a(o,s),delete o.prototype.constructor,o.prototype=Object.create(s.prototype,{_resolve:c(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),i(o.prototype,e.toStringTag,c("c","Array Iterator"))},function(w,I,n){var o,a=n(22),f=n(139),c=n(143),e=n(144),s=n(60),i=n(149),t=Function.prototype.bind,g=Object.defineProperty,l=Object.prototype.hasOwnProperty;o=function(p,d,E){var S,k=f(d)&&c(d.value);return delete(S=e(d)).writable,delete S.value,S.get=function(){return!E.overwriteDefinition&&l.call(this,p)?k:(d.value=t.call(k,E.resolveContext?E.resolveContext(this):this),g(this,p,d),this[p])},S},w.exports=function(p){var d=s(arguments[1]);return a(d.resolveContext)&&c(d.resolveContext),i(p,function(E,S){return o(S,E,d)})}},function(w,I,n){var o=n(64),a=n(22);w.exports=function(f){return a(f)?f:o(f,"Cannot use %v",arguments[1])}},function(w,I,n){var o=n(22),a=n(38),f=Object.prototype.toString;w.exports=function(c){if(!o(c))return null;if(a(c)){var e=c.toString;if(typeof e!="function"||e===f)return null}try{return""+c}catch{return null}}},function(w,I,n){var o=n(142),a=/[\n\r\u2028\u2029]/g;w.exports=function(f){var c=o(f);return c===null?"<Non-coercible to string value>":(c.length>100&&(c=c.slice(0,99)+"…"),c=c.replace(a,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},function(w,I,n){w.exports=function(o){try{return o.toString()}catch{try{return String(o)}catch{return null}}}},function(w,I,n){var o=n(64),a=n(59);w.exports=function(f){return a(f)?f:o(f,"%v is not a plain function",arguments[1])}},function(w,I,n){var o=n(145),a=n(39),f=n(14);w.exports=function(c){var e=Object(f(c)),s=arguments[1],i=Object(arguments[2]);if(e!==c&&!s)return e;var t={};return s?o(s,function(g){(i.ensure||g in c)&&(t[g]=c[g])}):a(t,c),t}},function(w,I,n){w.exports=n(146)()?Array.from:n(147)},function(w,I,n){w.exports=function(){var o,a,f=Array.from;return typeof f=="function"&&(a=f(o=["raz","dwa"]),Boolean(a&&a!==o&&a[1]==="dwa"))}},function(w,I,n){var o=n(16).iterator,a=n(31),f=n(148),c=n(56),e=n(20),s=n(14),i=n(21),t=n(32),g=Array.isArray,l=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;w.exports=function(E){var S,k,b,v,u,x,y,B,M,D,A=arguments[1],P=arguments[2];if(E=Object(s(E)),i(A)&&e(A),this&&this!==Array&&f(this))S=this;else{if(!A){if(a(E))return(u=E.length)!==1?Array.apply(null,E):((v=new Array(1))[0]=E[0],v);if(g(E)){for(v=new Array(u=E.length),k=0;k<u;++k)v[k]=E[k];return v}}v=[]}if(!g(E)){if((M=E[o])!==void 0){for(y=e(M).call(E),S&&(v=new S),B=y.next(),k=0;!B.done;)D=A?l.call(A,P,B.value,k):B.value,S?(p.value=D,d(v,k,p)):v[k]=D,B=y.next(),++k;u=k}else if(t(E)){for(u=E.length,S&&(v=new S),k=0,b=0;k<u;++k)D=E[k],k+1<u&&(x=D.charCodeAt(0))>=55296&&x<=56319&&(D+=E[++k]),D=A?l.call(A,P,D,b):D,S?(p.value=D,d(v,b,p)):v[b]=D,++b;u=b}}if(u===void 0)for(u=c(E.length),S&&(v=new S(u)),k=0;k<u;++k)D=A?l.call(A,P,E[k],k):E[k],S?(p.value=D,d(v,k,p)):v[k]=D;return S&&(p.value=null,v.length=u),v}},function(w,I,n){var o=Object.prototype.toString,a=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);w.exports=function(f){return typeof f=="function"&&a(o.call(f))}},function(w,I,n){var o=n(20),a=n(150),f=Function.prototype.call;w.exports=function(c,e){var s={},i=arguments[2];return o(e),a(c,function(t,g,l,p){s[g]=f.call(e,i,t,g,l,p)}),s}},function(w,I,n){w.exports=n(151)("forEach")},function(w,I,n){var o=n(20),a=n(14),f=Function.prototype.bind,c=Function.prototype.call,e=Object.keys,s=Object.prototype.propertyIsEnumerable;w.exports=function(i,t){return function(g,l){var p,d=arguments[2],E=arguments[3];return g=Object(a(g)),o(l),p=e(g),E&&p.sort(typeof E=="function"?f.call(E,g):void 0),typeof i!="function"&&(i=p[i]),c.call(i,p,function(S,k){return s.call(g,S)?c.call(l,d,g[S],S,g,k):t})}}},function(w,I,n){var o,a=n(29),f=n(11),c=n(16),e=n(40),s=Object.defineProperty;o=w.exports=function(i){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");i=String(i),e.call(this,i),s(this,"__length__",f("",i.length))},a&&a(o,e),delete o.prototype.constructor,o.prototype=Object.create(e.prototype,{_next:f(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:f(function(i){var t,g=this.__list__[i];return this.__nextIndex__===this.__length__?g:(t=g.charCodeAt(0))>=55296&&t<=56319?g+this.__list__[this.__nextIndex__++]:g})}),s(o.prototype,c.toStringTag,f("c","String Iterator"))},function(w,I,n){var o,a=n(29),f=n(11),c=n(40),e=n(16).toStringTag,s=n(154),i=Object.defineProperties,t=c.prototype._unBind;o=w.exports=function(g,l){if(!(this instanceof o))return new o(g,l);c.call(this,g.__mapKeysData__,g),l&&s[l]||(l="key+value"),i(this,{__kind__:f("",l),__values__:f("w",g.__mapValuesData__)})},a&&a(o,c),o.prototype=Object.create(c.prototype,{constructor:f(o),_resolve:f(function(g){return this.__kind__==="value"?this.__values__[g]:this.__kind__==="key"?this.__list__[g]:[this.__list__[g],this.__values__[g]]}),_unBind:f(function(){this.__values__=null,t.call(this)}),toString:f(function(){return"[object Map Iterator]"})}),Object.defineProperty(o.prototype,e,f("c","Map Iterator"))},function(w,I,n){w.exports=n(155)("key","value","key+value")},function(w,I,n){var o=Array.prototype.forEach,a=Object.create;w.exports=function(f){var c=a(null);return o.call(arguments,function(e){c[e]=!0}),c}},function(w,I,n){w.exports=typeof Map<"u"&&Object.prototype.toString.call(new Map)==="[object Map]"},function(w,I,n){var o=n(158);function a(c){var e=function(){return e.called?e.value:(e.called=!0,e.value=c.apply(this,arguments))};return e.called=!1,e}function f(c){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=c.apply(this,arguments)},s=c.name||"Function wrapped with `once`";return e.onceError=s+" shouldn't be called more than once",e.called=!1,e}w.exports=o(a),w.exports.strict=o(f),a.proto=a(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return a(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return f(this)},configurable:!0})})},function(w,I){w.exports=function n(o,a){if(o&&a)return n(o)(a);if(typeof o!="function")throw new TypeError("need wrapper function");return Object.keys(o).forEach(function(c){f[c]=o[c]}),f;function f(){for(var c=new Array(arguments.length),e=0;e<c.length;e++)c[e]=arguments[e];var s=o.apply(this,c),i=c[c.length-1];return typeof s=="function"&&s!==i&&Object.keys(i).forEach(function(t){s[t]=i[t]}),s}}},function(w,I,n){I.parser=n(160),I.generate=n(164),I.writeToStream=n(67)},function(w,I,n){var o=n(161),a=n(13),f=n(15).EventEmitter,c=n(163),e=n(66);function s(){if(!(this instanceof s))return new s;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}a(s,f),s.prototype._resetState=function(){this.packet=new c,this.error=null,this._list=o(),this._stateCounter=0},s.prototype.parse=function(i){for(this.error&&this._resetState(),this._list.append(i);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},s.prototype._parseHeader=function(){var i=this._list.readUInt8(0);return this.packet.cmd=e.types[i>>e.CMD_SHIFT],this.packet.retain=(i&e.RETAIN_MASK)!=0,this.packet.qos=i>>e.QOS_SHIFT&e.QOS_MASK,this.packet.dup=(i&e.DUP_MASK)!=0,this._list.consume(1),!0},s.prototype._parseLength=function(){for(var i,t=0,g=1,l=0,p=!0;t<5&&(l+=g*((i=this._list.readUInt8(t++))&e.LENGTH_MASK),g*=128,(i&e.LENGTH_FIN_MASK)!=0);)if(this._list.length<=t){p=!1;break}return p&&(this.packet.length=l,this._list.consume(t)),p},s.prototype._parsePayload=function(){var i=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}i=!0}return i},s.prototype._parseConnect=function(){var i,t,g,l,p,d,E={},S=this.packet;if((i=this._parseString())===null)return this._emitError(new Error("Cannot parse protocolId"));if(i!=="MQTT"&&i!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(S.protocolId=i,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(S.protocolVersion=this._list.readUInt8(this._pos),S.protocolVersion!==3&&S.protocolVersion!==4)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(E.username=this._list.readUInt8(this._pos)&e.USERNAME_MASK,E.password=this._list.readUInt8(this._pos)&e.PASSWORD_MASK,E.will=this._list.readUInt8(this._pos)&e.WILL_FLAG_MASK,E.will&&(S.will={},S.will.retain=(this._list.readUInt8(this._pos)&e.WILL_RETAIN_MASK)!=0,S.will.qos=(this._list.readUInt8(this._pos)&e.WILL_QOS_MASK)>>e.WILL_QOS_SHIFT),S.clean=(this._list.readUInt8(this._pos)&e.CLEAN_SESSION_MASK)!=0,this._pos++,S.keepalive=this._parseNum(),S.keepalive===-1)return this._emitError(new Error("Packet too short"));if((t=this._parseString())===null)return this._emitError(new Error("Packet too short"));if(S.clientId=t,E.will){if((g=this._parseString())===null)return this._emitError(new Error("Cannot parse will topic"));if(S.will.topic=g,(l=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse will payload"));S.will.payload=l}if(E.username){if((d=this._parseString())===null)return this._emitError(new Error("Cannot parse username"));S.username=d}if(E.password){if((p=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse password"));S.password=p}return S},s.prototype._parseConnack=function(){var i=this.packet;return this._list.length<2?null:(i.sessionPresent=!!(this._list.readUInt8(this._pos++)&e.SESSIONPRESENT_MASK),i.returnCode=this._list.readUInt8(this._pos),i.returnCode===-1?this._emitError(new Error("Cannot parse return code")):void 0)},s.prototype._parsePublish=function(){var i=this.packet;if(i.topic=this._parseString(),i.topic===null)return this._emitError(new Error("Cannot parse topic"));i.qos>0&&!this._parseMessageId()||(i.payload=this._list.slice(this._pos,i.length))},s.prototype._parseSubscribe=function(){var i,t,g=this.packet;if(g.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(g.subscriptions=[],this._parseMessageId())for(;this._pos<g.length;){if((i=this._parseString())===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=g.length)return this._emitError(new Error("Malformed Subscribe Payload"));t=this._list.readUInt8(this._pos++),g.subscriptions.push({topic:i,qos:t})}},s.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},s.prototype._parseUnsubscribe=function(){var i=this.packet;if(i.unsubscriptions=[],this._parseMessageId())for(;this._pos<i.length;){var t;if((t=this._parseString())===null)return this._emitError(new Error("Cannot parse topic"));i.unsubscriptions.push(t)}},s.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},s.prototype._parseMessageId=function(){var i=this.packet;return i.messageId=this._parseNum(),i.messageId!==null||(this._emitError(new Error("Cannot parse messageId")),!1)},s.prototype._parseString=function(i){var t,g=this._parseNum(),l=g+this._pos;return g===-1||l>this._list.length||l>this.packet.length?null:(t=this._list.toString("utf8",this._pos,l),this._pos+=g,t)},s.prototype._parseBuffer=function(){var i,t=this._parseNum(),g=t+this._pos;return t===-1||g>this._list.length||g>this.packet.length?null:(i=this._list.slice(this._pos,g),this._pos+=t,i)},s.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var i=this._list.readUInt16BE(this._pos);return this._pos+=2,i},s.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new c,!0},s.prototype._emitError=function(i){this.error=i,this.emit("error",i)},w.exports=s},function(w,I,n){var o=n(162),a=n(27),f=n(19).Buffer;function c(e){if(!(this instanceof c))return new c(e);if(this._bufs=[],this.length=0,typeof e=="function"){this._callback=e;var s=function(i){this._callback&&(this._callback(i),this._callback=null)}.bind(this);this.on("pipe",function(i){i.on("error",s)}),this.on("unpipe",function(i){i.removeListener("error",s)})}else this.append(e);o.call(this)}a.inherits(c,o),c.prototype._offset=function(e){var s,i=0,t=0;if(e===0)return[0,0];for(;t<this._bufs.length;t++){if(e<(s=i+this._bufs[t].length)||t==this._bufs.length-1)return[t,e-i];i=s}},c.prototype.append=function(e){var s=0;if(f.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;s<e.length;s++)this.append(e[s]);else if(e instanceof c)for(;s<e._bufs.length;s++)this.append(e._bufs[s]);else e!=null&&(typeof e=="number"&&(e=e.toString()),this._appendBuffer(f.from(e)));return this},c.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},c.prototype._write=function(e,s,i){this._appendBuffer(e),typeof i=="function"&&i()},c.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},c.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},c.prototype.get=function(e){return this.slice(e,e+1)[0]},c.prototype.slice=function(e,s){return typeof e=="number"&&e<0&&(e+=this.length),typeof s=="number"&&s<0&&(s+=this.length),this.copy(null,0,e,s)},c.prototype.copy=function(e,s,i,t){if((typeof i!="number"||i<0)&&(i=0),(typeof t!="number"||t>this.length)&&(t=this.length),i>=this.length||t<=0)return e||f.alloc(0);var g,l,p=!!e,d=this._offset(i),E=t-i,S=E,k=p&&s||0,b=d[1];if(i===0&&t==this.length){if(!p)return this._bufs.length===1?this._bufs[0]:f.concat(this._bufs,this.length);for(l=0;l<this._bufs.length;l++)this._bufs[l].copy(e,k),k+=this._bufs[l].length;return e}if(S<=this._bufs[d[0]].length-b)return p?this._bufs[d[0]].copy(e,s,b,b+S):this._bufs[d[0]].slice(b,b+S);for(p||(e=f.allocUnsafe(E)),l=d[0];l<this._bufs.length;l++){if(!(S>(g=this._bufs[l].length-b))){this._bufs[l].copy(e,k,b,b+S),k+=g;break}this._bufs[l].copy(e,k,b),k+=g,S-=g,b&&(b=0)}return e.length>k?e.slice(0,k):e},c.prototype.shallowSlice=function(e,s){e=e||0,s=s||this.length,e<0&&(e+=this.length),s<0&&(s+=this.length);var i=this._offset(e),t=this._offset(s),g=this._bufs.slice(i[0],t[0]+1);return t[1]==0?g.pop():g[g.length-1]=g[g.length-1].slice(0,t[1]),i[1]!=0&&(g[0]=g[0].slice(i[1])),new c(g)},c.prototype.toString=function(e,s,i){return this.slice(s,i).toString(e)},c.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},c.prototype.duplicate=function(){for(var e=0,s=new c;e<this._bufs.length;e++)s.append(this._bufs[e]);return s},c.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var s in e)(function(i){c.prototype[i]=function(t){return this.slice(t,t+e[i])[i](0)}})(s)}(),w.exports=c},function(w,I,n){w.exports=n(18)},function(w,I){w.exports=function(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},function(w,I,n){var o=n(19).Buffer,a=n(67),f=n(15).EventEmitter;function c(){this._array=new Array(20),this._i=0}n(13)(c,f),c.prototype.write=function(e){return this._array[this._i++]=e,!0},c.prototype.concat=function(){var e,s,i=0,t=new Array(this._array.length),g=this._array,l=0;for(e=0;e<g.length&&g[e]!==void 0;e++)typeof g[e]!="string"?t[e]=g[e].length:t[e]=o.byteLength(g[e]),i+=t[e];for(s=o.allocUnsafe(i),e=0;e<g.length&&g[e]!==void 0;e++)typeof g[e]!="string"?(g[e].copy(s,l),l+=t[e]):(s.write(g[e],l),l+=t[e]);return s},w.exports=function(e){var s=new c;return a(e,s),s.concat()}},function(w,I,n){var o=n(19).Buffer,a={};function f(c){var e=o.allocUnsafe(2);return e.writeUInt8(c>>8,0),e.writeUInt8(255&c,1),e}w.exports={cache:a,generateCache:function(){for(var c=0;c<65536;c++)a[c]=f(c)},generateNumber:f}},function(w,I,n){function o(a,f,c){var e=this;this._callback=a,this._args=c,this._interval=setInterval(a,f,this._args),this.reschedule=function(s){s||(s=e._interval),e._interval&&clearInterval(e._interval),e._interval=setInterval(e._callback,s,e._args)},this.clear=function(){e._interval&&(clearInterval(e._interval),e._interval=void 0)},this.destroy=function(){e._interval&&clearInterval(e._interval),e._callback=void 0,e._interval=void 0,e._args=void 0}}w.exports=function(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var a;if(arguments.length>0){a=new Array(arguments.length-2);for(var f=0;f<a.length;f++)a[f]=arguments[f+2]}return new o(arguments[0],arguments[1],a)}},function(w,I,n){function o(a){for(var f=a.split("/"),c=0;c<f.length;c++)if(f[c]!=="+"){if(f[c]==="#")return c===f.length-1;if(f[c].indexOf("+")!==-1||f[c].indexOf("#")!==-1)return!1}return!0}w.exports={validateTopics:function(a){if(a.length===0)return"empty_topic_list";for(var f=0;f<a.length;f++)if(!o(a[f]))return a[f];return null}}},function(w,I,n){(function(o,a){var f;(function(c){I&&I.nodeType,o&&o.nodeType;var e=typeof a=="object"&&a;e.global!==e&&e.window!==e&&e.self;var s,i=2147483647,t=36,g=/^xn--/,l=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=Math.floor,S=String.fromCharCode;function k(A){throw new RangeError(d[A])}function b(A,P){for(var j=A.length,H=[];j--;)H[j]=P(A[j]);return H}function v(A,P){var j=A.split("@"),H="";return j.length>1&&(H=j[0]+"@",A=j[1]),H+b((A=A.replace(p,".")).split("."),P).join(".")}function u(A){for(var P,j,H=[],K=0,G=A.length;K<G;)(P=A.charCodeAt(K++))>=55296&&P<=56319&&K<G?(64512&(j=A.charCodeAt(K++)))==56320?H.push(((1023&P)<<10)+(1023&j)+65536):(H.push(P),K--):H.push(P);return H}function x(A){return b(A,function(P){var j="";return P>65535&&(j+=S((P-=65536)>>>10&1023|55296),P=56320|1023&P),j+=S(P)}).join("")}function y(A,P){return A+22+75*(A<26)-((P!=0)<<5)}function B(A,P,j){var H=0;for(A=j?E(A/700):A>>1,A+=E(A/P);A>455;H+=t)A=E(A/35);return E(H+36*A/(A+38))}function M(A){var P,j,H,K,G,R,q,F,z,O,C,U=[],L=A.length,Z=0,ft=128,ut=72;for((j=A.lastIndexOf("-"))<0&&(j=0),H=0;H<j;++H)A.charCodeAt(H)>=128&&k("not-basic"),U.push(A.charCodeAt(H));for(K=j>0?j+1:0;K<L;){for(G=Z,R=1,q=t;K>=L&&k("invalid-input"),((F=(C=A.charCodeAt(K++))-48<10?C-22:C-65<26?C-65:C-97<26?C-97:t)>=t||F>E((i-Z)/R))&&k("overflow"),Z+=F*R,!(F<(z=q<=ut?1:q>=ut+26?26:q-ut));q+=t)R>E(i/(O=t-z))&&k("overflow"),R*=O;ut=B(Z-G,P=U.length+1,G==0),E(Z/P)>i-ft&&k("overflow"),ft+=E(Z/P),Z%=P,U.splice(Z++,0,ft)}return x(U)}function D(A){var P,j,H,K,G,R,q,F,z,O,C,U,L,Z,ft,ut=[];for(U=(A=u(A)).length,P=128,j=0,G=72,R=0;R<U;++R)(C=A[R])<128&&ut.push(S(C));for(H=K=ut.length,K&&ut.push("-");H<U;){for(q=i,R=0;R<U;++R)(C=A[R])>=P&&C<q&&(q=C);for(q-P>E((i-j)/(L=H+1))&&k("overflow"),j+=(q-P)*L,P=q,R=0;R<U;++R)if((C=A[R])<P&&++j>i&&k("overflow"),C==P){for(F=j,z=t;!(F<(O=z<=G?1:z>=G+26?26:z-G));z+=t)ft=F-O,Z=t-O,ut.push(S(y(O+ft%Z,0))),F=E(ft/Z);ut.push(S(y(F,0))),G=B(j,L,H==K),j=0,++H}++j,++P}return ut.join("")}s={version:"1.4.1",ucs2:{decode:u,encode:x},decode:M,encode:D,toASCII:function(A){return v(A,function(P){return l.test(P)?"xn--"+D(P):P})},toUnicode:function(A){return v(A,function(P){return g.test(P)?M(P.slice(4).toLowerCase()):P})}},(f=function(){return s}.call(I,n,I,o))===void 0||(o.exports=f)})()}).call(this,n(169)(w),n(12))},function(w,I){w.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(w,I,n){w.exports={isString:function(o){return typeof o=="string"},isObject:function(o){return typeof o=="object"&&o!==null},isNull:function(o){return o===null},isNullOrUndefined:function(o){return o==null}}},function(w,I,n){I.decode=I.parse=n(172),I.encode=I.stringify=n(173)},function(w,I,n){function o(f,c){return Object.prototype.hasOwnProperty.call(f,c)}w.exports=function(f,c,e,s){c=c||"&",e=e||"=";var i={};if(typeof f!="string"||f.length===0)return i;var t=/\+/g;f=f.split(c);var g=1e3;s&&typeof s.maxKeys=="number"&&(g=s.maxKeys);var l=f.length;g>0&&l>g&&(l=g);for(var p=0;p<l;++p){var d,E,S,k,b=f[p].replace(t,"%20"),v=b.indexOf(e);v>=0?(d=b.substr(0,v),E=b.substr(v+1)):(d=b,E=""),S=decodeURIComponent(d),k=decodeURIComponent(E),o(i,S)?a(i[S])?i[S].push(k):i[S]=[i[S],k]:i[S]=k}return i};var a=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"}},function(w,I,n){var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};w.exports=function(e,s,i,t){return s=s||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?f(c(e),function(g){var l=encodeURIComponent(o(g))+i;return a(e[g])?f(e[g],function(p){return l+encodeURIComponent(o(p))}).join(s):l+encodeURIComponent(o(e[g]))}).join(s):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(e)):""};var a=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function f(e,s){if(e.map)return e.map(s);for(var i=[],t=0;t<e.length;t++)i.push(s(e[t],t));return i}var c=Object.keys||function(e){var s=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&s.push(i);return s}},function(w,I){},function(w,I){},function(w,I,n){(function(o,a){var f=n(28),c=n(65),e=n(13),s=n(177),i=o.from&&o.from!==Uint8Array.from?o.from([0]):new o([0]),t=function(p,d){p._corked?p.once("uncork",d):d()},g=function(p,d){return function(E){E?function(S,k){S._autoDestroy&&S.destroy(k)}(p,E.message==="premature close"?null:E):d&&!p._ended&&p.end()}},l=function(p,d,E){if(!(this instanceof l))return new l(p,d,E);f.Duplex.call(this,E),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!E||E.autoDestroy!==!1,this._forwardDestroy=!E||E.destroy!==!1,this._forwardEnd=!E||E.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,p&&this.setWritable(p),d&&this.setReadable(d)};e(l,f.Duplex),l.obj=function(p,d,E){return E||(E={}),E.objectMode=!0,E.highWaterMark=16,new l(p,d,E)},l.prototype.cork=function(){++this._corked==1&&this.emit("cork")},l.prototype.uncork=function(){this._corked&&--this._corked==0&&this.emit("uncork")},l.prototype.setWritable=function(p){if(this._unwrite&&this._unwrite(),this.destroyed)p&&p.destroy&&p.destroy();else if(p!==null&&p!==!1){var d=this,E=c(p,{writable:!0,readable:!1},g(this,this._forwardEnd)),S=function(){var k=d._ondrain;d._ondrain=null,k&&k()};this._unwrite&&a.nextTick(S),this._writable=p,this._writable.on("drain",S),this._unwrite=function(){d._writable.removeListener("drain",S),E()},this.uncork()}else this.end()},l.prototype.setReadable=function(p){if(this._unread&&this._unread(),this.destroyed)p&&p.destroy&&p.destroy();else{if(p===null||p===!1)return this.push(null),void this.resume();var d,E=this,S=c(p,{writable:!1,readable:!0},g(this)),k=function(){E._forward()},b=function(){E.push(null)};this._drained=!0,this._readable=p,this._readable2=p._readableState?p:(d=p,new f.Readable({objectMode:!0,highWaterMark:16}).wrap(d)),this._readable2.on("readable",k),this._readable2.on("end",b),this._unread=function(){E._readable2.removeListener("readable",k),E._readable2.removeListener("end",b),S()},this._forward()}},l.prototype._read=function(){this._drained=!0,this._forward()},l.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var p;for(this._forwarding=!0;this._drained&&(p=s(this._readable2))!==null;)this.destroyed||(this._drained=this.push(p));this._forwarding=!1}},l.prototype.destroy=function(p){if(!this.destroyed){this.destroyed=!0;var d=this;a.nextTick(function(){d._destroy(p)})}},l.prototype._destroy=function(p){if(p){var d=this._ondrain;this._ondrain=null,d?d(p):this.emit("error",p)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},l.prototype._write=function(p,d,E){return this.destroyed?E():this._corked?t(this,this._write.bind(this,p,d,E)):p===i?this._finish(E):this._writable?void(this._writable.write(p)===!1?this._ondrain=E:E()):E()},l.prototype._finish=function(p){var d=this;this.emit("preend"),t(this,function(){var E,S;E=d._forwardEnd&&d._writable,S=function(){d._writableState.prefinished===!1&&(d._writableState.prefinished=!0),d.emit("prefinish"),t(d,p)},E?E._writableState&&E._writableState.finished?S():E._writableState?E.end(S):(E.end(),S()):S()})},l.prototype.end=function(p,d,E){return typeof p=="function"?this.end(null,null,p):typeof d=="function"?this.end(p,null,d):(this._ended=!0,p&&this.write(p),this._writableState.ending||this.write(i),f.Writable.prototype.end.call(this,E))},w.exports=l}).call(this,n(24).Buffer,n(9))},function(w,I){w.exports=function(n){var o=n._readableState;return o?o.objectMode||typeof n._duplexState=="number"?n.read():n.read(function(a){return a.buffer.length?a.buffer.head?a.buffer.head.data.length:a.buffer[0].length:a.length}(o)):null}},function(w,I){var n=null;typeof WebSocket<"u"?n=WebSocket:typeof MozWebSocket<"u"?n=MozWebSocket:typeof window<"u"&&(n=window.WebSocket||window.MozWebSocket),w.exports=n},function(w,I,n){var o;w.exports=(o=n(43),n(72),n(180),o.HmacSHA256)},function(w,I,n){var o,a,f,c;w.exports=(o=n(43),f=(a=o).lib.Base,c=a.enc.Utf8,void(a.algo.HMAC=f.extend({init:function(e,s){e=this._hasher=new e.init,typeof s=="string"&&(s=c.parse(s));var i=e.blockSize,t=4*i;s.sigBytes>t&&(s=e.finalize(s)),s.clamp();for(var g=this._oKey=s.clone(),l=this._iKey=s.clone(),p=g.words,d=l.words,E=0;E<i;E++)p[E]^=1549556828,d[E]^=909522486;g.sigBytes=l.sigBytes=t,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var s=this._hasher,i=s.finalize(e);return s.reset(),s.finalize(this._oKey.clone().concat(i))}})))},function(w,I){w.exports={INVALID_CONNECT_OPTIONS:"Invalid connect options supplied.",INVALID_CLIENT_ID_OPTION:'Invalid "clientId" (mqtt client id) option supplied.',INVALID_RECONNECT_TIMING:"Invalid reconnect timing options supplied.",INVALID_OFFLINE_QUEUEING_PARAMETERS:"Invalid offline queueing options supplied."}},function(w,I,n){(function(o){var a=n(44),f=n(33),c=n(183);w.exports=function(e){if(f(e.keyPath)&&f(e.privateKey))throw new Error(c.NO_KEY_OPTION);if(f(e.certPath)&&f(e.clientCert))throw new Error(c.NO_CERT_OPTION);if(f(e.caPath)&&f(e.caCert))throw new Error(c.NO_CA_OPTION);if(!f(e.caCert))if(o.isBuffer(e.caCert))e.ca=e.caCert;else{if(!a.existsSync(e.caCert))throw new Error(c.INVALID_CA_CERT_OPTION);e.ca=a.readFileSync(e.caCert)}if(!f(e.privateKey))if(o.isBuffer(e.privateKey))e.key=e.privateKey;else{if(!a.existsSync(e.privateKey))throw new Error(c.INVALID_PRIVATE_KEY_OPTION);e.key=a.readFileSync(e.privateKey)}if(!f(e.clientCert))if(o.isBuffer(e.clientCert))e.cert=e.clientCert;else{if(!a.existsSync(e.clientCert))throw new Error(c.INVALID_CLIENT_CERT_OPTION);e.cert=a.readFileSync(e.clientCert)}if(a.existsSync(e.keyPath))e.key=a.readFileSync(e.keyPath);else if(!f(e.keyPath))throw new Error(c.INVALID_KEY_PATH_OPTION);if(a.existsSync(e.certPath))e.cert=a.readFileSync(e.certPath);else if(!f(e.certPath))throw new Error(c.INVALID_CERT_PATH_OPTION);if(a.existsSync(e.caPath))e.ca=a.readFileSync(e.caPath);else if(!f(e.caPath))throw new Error(c.INVALID_CA_PATH_OPTION);e.requestCert=!0,e.rejectUnauthorized=!0}}).call(this,n(24).Buffer)},function(w,I){w.exports={NO_KEY_OPTION:'No "keyPath" or "privateKey" option supplied.',NO_CERT_OPTION:'No "certPath" or "clientCert" option supplied.',NO_CA_OPTION:'No "caPath" or "caCert" option supplied.',INVALID_KEY_PATH_OPTION:'Invalid "keyPath" option supplied.',INVALID_CERT_PATH_OPTION:'Invalid "certPath" option supplied.',INVALID_CA_PATH_OPTION:'Invalid "caPath" option supplied.',INVALID_CLIENT_CERT_OPTION:'Invalid "clientCert" option supplied.',INVALID_PRIVATE_KEY_OPTION:'Invalid "privateKey" option supplied.',INVALID_CA_CERT_OPTION:'Invalid "caCert" option supplied.'}},function(w,I,n){(function(o){function a(e,s){for(var i=0,t=e.length-1;t>=0;t--){var g=e[t];g==="."?e.splice(t,1):g===".."?(e.splice(t,1),i++):i&&(e.splice(t,1),i--)}if(s)for(;i--;i)e.unshift("..");return e}function f(e,s){if(e.filter)return e.filter(s);for(var i=[],t=0;t<e.length;t++)s(e[t],t,e)&&i.push(e[t]);return i}I.resolve=function(){for(var e="",s=!1,i=arguments.length-1;i>=-1&&!s;i--){var t=i>=0?arguments[i]:o.cwd();if(typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");t&&(e=t+"/"+e,s=t.charAt(0)==="/")}return(s?"/":"")+(e=a(f(e.split("/"),function(g){return!!g}),!s).join("/"))||"."},I.normalize=function(e){var s=I.isAbsolute(e),i=c(e,-1)==="/";return(e=a(f(e.split("/"),function(t){return!!t}),!s).join("/"))||s||(e="."),e&&i&&(e+="/"),(s?"/":"")+e},I.isAbsolute=function(e){return e.charAt(0)==="/"},I.join=function(){var e=Array.prototype.slice.call(arguments,0);return I.normalize(f(e,function(s,i){if(typeof s!="string")throw new TypeError("Arguments to path.join must be strings");return s}).join("/"))},I.relative=function(e,s){function i(S){for(var k=0;k<S.length&&S[k]==="";k++);for(var b=S.length-1;b>=0&&S[b]==="";b--);return k>b?[]:S.slice(k,b-k+1)}e=I.resolve(e).substr(1),s=I.resolve(s).substr(1);for(var t=i(e.split("/")),g=i(s.split("/")),l=Math.min(t.length,g.length),p=l,d=0;d<l;d++)if(t[d]!==g[d]){p=d;break}var E=[];for(d=p;d<t.length;d++)E.push("..");return(E=E.concat(g.slice(p))).join("/")},I.sep="/",I.delimiter=":",I.dirname=function(e){if(typeof e!="string"&&(e+=""),e.length===0)return".";for(var s=e.charCodeAt(0),i=s===47,t=-1,g=!0,l=e.length-1;l>=1;--l)if((s=e.charCodeAt(l))===47){if(!g){t=l;break}}else g=!1;return t===-1?i?"/":".":i&&t===1?"/":e.slice(0,t)},I.basename=function(e,s){var i=function(t){typeof t!="string"&&(t+="");var g,l=0,p=-1,d=!0;for(g=t.length-1;g>=0;--g)if(t.charCodeAt(g)===47){if(!d){l=g+1;break}}else p===-1&&(d=!1,p=g+1);return p===-1?"":t.slice(l,p)}(e);return s&&i.substr(-1*s.length)===s&&(i=i.substr(0,i.length-s.length)),i},I.extname=function(e){typeof e!="string"&&(e+="");for(var s=-1,i=0,t=-1,g=!0,l=0,p=e.length-1;p>=0;--p){var d=e.charCodeAt(p);if(d!==47)t===-1&&(g=!1,t=p+1),d===46?s===-1?s=p:l!==1&&(l=1):s!==-1&&(l=-1);else if(!g){i=p+1;break}}return s===-1||t===-1||l===0||l===1&&s===t-1&&s===i+1?"":e.slice(s,t)};var c="ab".substr(-1)==="b"?function(e,s,i){return e.substr(s,i)}:function(e,s,i){return s<0&&(s=e.length+s),e.substr(s,i)}}).call(this,n(9))},function(w){w.exports=JSON.parse('{"name":"aws-iot-device-sdk","description":"AWS IoT Node.js SDK for Embedded Devices","version":"2.2.6","author":{"name":"Amazon Web Services","email":"","url":"http://aws.amazon.com"},"homepage":"https://github.com/aws/aws-iot-device-sdk-js","main":"index.js","engines":{"node":">=4.0.0"},"repository":{"type":"git","url":"git://github.com/aws/aws-iot-device-sdk-js"},"bugs":{"url":"http://github.com/aws/aws-iot-device-sdk-js/issues"},"license":"Apache-2.0","keywords":["api","amazon","aws","iot","mqtt"],"dependencies":{"mqtt":"2.18.8","minimist":"1.2.5","websocket-stream":"^5.0.1","crypto-js":"3.1.6"},"devDependencies":{"gulp":"^3.9.0","gulp-concat":"^2.6.0","gulp-jscs":"^4.0.0","gulp-jshint":"^2.0.0","gulp-mocha":"^3.0.1","jshint":"^2.9.1","jshint-stylish":"^2.2.1","gulp-coverage":"^0.3.38","gulp-beautify":"^2.0.0","sinon":"^1.17.3","rewire":"^2.5.1"},"scripts":{"test":"node ./node_modules/gulp/bin/gulp.js test --verbose","browserize":"./scripts/browserize.sh","beautify":"node ./node_modules/gulp/bin/gulp.js beautify"}}')},function(w,I,n){var o=n(44);w.exports=function(a,f){var c;function e(s){a.emit("error",s),c.end()}return(c=o.connect(f)).on("secureConnect",function(){c.authorized?c.removeListener("error",e):c.emit("error",new Error("TLS not authorized"))}),c.on("error",e),c}},function(w,I,n){const o=n(42);w.exports=function(a,f){return o(f.url,["mqttv3.1"],f.websocketOptions)}},function(w,I,n){var o=n(15),a=n(27).inherits,f=n(35),c=n(33);function e(t,g,l){return c(l)?"$aws/things/"+t+"/shadow/"+g:"$aws/things/"+t+"/shadow/"+g+"/"+l}function s(t){return t.substring(0,12)==="$aws/things/"}function i(t,g){if(!(this instanceof i))return new i(t,g);var l=this,p=[{}],d=0,E=1e4,S=!0,k=f.DeviceClient(t);c(g)||c(g.operationTimeout)||(E=g.operationTimeout),this._handleSubscriptions=function(b,v,u,x){for(var y=[],B=0,M=v.length;B<M;B++)for(var D=0,A=v[B].operations.length;D<A;D++)for(var P=0,j=v[B].statii.length;P<j;P++)y.push(e(b,v[B].operations[D],v[B].statii[P]));p[b].debug===!0&&console.log(u+" on "+y);var H=[];H.push(y),u==="subscribe"?(H.push({qos:p[b].qos}),H.push(function(K,G){if(!c(x)){if(K)return void x(K);for(var R=[],q=0,F=G.length;q<F;q++)G[q].qos===128&&R.push(G[q]);if(R.length>0)return void x("Not all subscriptions were granted",R);x()}})):c(x)||H.push(x),k[u].apply(k,H)},this._handleMessages=function(b,v,u,x){var y={};try{y=JSON.parse(x.toString())}catch(D){return void(t.debug===!0&&console.error("failed parsing JSON '"+x.toString()+"', "+D))}var B=y.clientToken,M=y.version;if(delete y.clientToken,!c(M)&&u!=="rejected"){if(c(p[b].version)||M>=p[b].version)p[b].version=M;else if(v!=="delete"&&p[b].discardStale===!0)return void(t.debug===!0&&console.warn("out-of-date version '"+M+"' on '"+b+"' (local version '"+p[b].version+"')"))}u!=="delta"?c(p[b].clientToken)||p[b].clientToken!==B?u==="accepted"&&v!=="get"&&this.emit("foreignStateChange",b,v,y):(clearTimeout(p[b].timeout),delete p[b].timeout,delete p[b].clientToken,p[b].pending=!1,p[b].persistentSubscribe===!1&&this._handleSubscriptions(b,[{operations:[v],statii:["accepted","rejected"]}],"unsubscribe"),this.emit("status",b,u,B,y)):this.emit("delta",b,y)},k.on("connect",function(){l.emit("connect")}),k.on("close",function(){l.emit("close")}),k.on("reconnect",function(){l.emit("reconnect")}),k.on("offline",function(){l.emit("offline")}),k.on("error",function(b){l.emit("error",b)}),k.on("packetsend",function(b){l.emit("packetsend",b)}),k.on("packetreceive",function(b){l.emit("packetreceive",b)}),k.on("message",function(b,v){if(S===!0){var u=b.split("/");(function(x,y){var B=!1;return x[0]==="$aws"&&(x[1]!=="things"||x[3]!=="shadow"||x[4]!=="update"&&x[4]!=="get"&&x[4]!=="delete"||(y==="subscribe"?x[5]!=="accepted"&&x[5]!=="rejected"&&x[5]!=="delta"||x.length!==6||(B=!0):x.length===5&&(B=!0))),B})(u,"subscribe")?p.hasOwnProperty(u[2])&&l._handleMessages(u[2],u[4],u[5],v):l.emit("message",b,v)}}),this._thingOperation=function(b,v,u){var x=null;if(p.hasOwnProperty(b))if(p[b].pending===!1){var y;if(p[b].pending=!0,c(u.clientToken)){var B=t.clientId.length;y=B>48?t.clientId.substr(B-48)+"-"+d++:t.clientId+"-"+d++}else y=u.clientToken;p[b].clientToken=y;var M=e(b,v);p[b].timeout=setTimeout(function(D,A){p[D].persistentSubscribe===!1&&l._handleSubscriptions(D,[{operations:[v],statii:["accepted","rejected"]}],"unsubscribe"),p[D].pending=!1,delete p[D].timeout,delete p[D].clientToken,l.emit("timeout",D,A)},E,b,y),p[b].persistentSubscribe===!1?this._handleSubscriptions(b,[{operations:[v],statii:["accepted","rejected"]}],"subscribe",function(D,A){c(D)&&c(A)?c(u)||(!c(p[b].version)&&p[b].enableVersioning&&(u.version=p[b].version),u.clientToken=y,k.publish(M,JSON.stringify(u),{qos:p[b].qos}),c(p[b])||p[b].debug!==!0||console.log("publishing '"+JSON.stringify(u)+" on '"+M+"'")):console.warn("failed subscription to accepted/rejected topics")}):(!c(p[b].version)&&p[b].enableVersioning&&(u.version=p[b].version),u.clientToken=y,k.publish(M,JSON.stringify(u),{qos:p[b].qos}),p[b].debug===!0&&console.log("publishing '"+JSON.stringify(u)+" on '"+M+"'")),x=y}else t.debug===!0&&console.error(v+" still in progress on thing: ",b);else t.debug===!0&&console.error("attempting to "+v+" unknown thing: ",b);return x},this.register=function(b,v,u){if(p.hasOwnProperty(b))t.debug===!0&&console.error("thing already registered: ",b);else{var x=!1,y=[];p[b]={persistentSubscribe:!0,debug:!1,discardStale:!0,enableVersioning:!0,qos:0,pending:!0},typeof v=="function"&&(u=v,v=null),c(v)||(c(v.ignoreDeltas)||(x=v.ignoreDeltas),c(v.persistentSubscribe)||(p[b].persistentSubscribe=v.persistentSubscribe),c(v.debug)||(p[b].debug=v.debug),c(v.discardStale)||(p[b].discardStale=v.discardStale),c(v.enableVersioning)||(p[b].enableVersioning=v.enableVersioning),c(v.qos)||(p[b].qos=v.qos)),x===!1&&y.push({operations:["update"],statii:["delta"]}),p[b].persistentSubscribe===!0&&y.push({operations:["update","get","delete"],statii:["accepted","rejected"]}),y.length>0?this._handleSubscriptions(b,y,"subscribe",function(B,M){c(B)&&c(M)&&(p[b].pending=!1),c(u)||u(B,M)}):(p[b].pending=!1,c(u)||u())}},this.unregister=function(b){if(p.hasOwnProperty(b)){var v=[];v.push({operations:["update"],statii:["delta"]}),p[b].persistentSubscribe===!0&&v.push({operations:["update","get","delete"],statii:["accepted","rejected"]}),this._handleSubscriptions(b,v,"unsubscribe"),c(p[b].timeout)||clearTimeout(p[b].timeout),delete p[b]}else t.debug===!0&&console.error("attempting to unregister unknown thing: ",b)},this.update=function(b,v){var u=null;return c(v.version)?u=l._thingOperation(b,"update",v):console.error("message can't contain 'version' property"),u},this.get=function(b,v){var u={};return c(v)||(u.clientToken=v),l._thingOperation(b,"get",u)},this.delete=function(b,v){var u={};return c(v)||(u.clientToken=v),l._thingOperation(b,"delete",u)},this.publish=function(b,v,u,x){if(s(b))throw"cannot publish to reserved topic '"+b+"'";k.publish(b,v,u,x)},this.subscribe=function(b,v,u){var x=[];typeof b=="string"?x.push(b):typeof b=="object"&&b.length&&(x=b);for(var y=0;y<x.length;y++)if(s(x[y]))throw"cannot subscribe to topic array since one of them is a reserved topic '"+x[y]+"'";k.subscribe(x,v,u)},this.unsubscribe=function(b,v){var u=[];typeof b=="string"?u.push(b):typeof b=="object"&&b.length&&(u=b);for(var x=0;x<u.length;x++)if(s(u[x]))throw"cannot unsubscribe from topic array since one of them is a reserved topic '"+u[x]+"'";k.unsubscribe(u,v)},this.end=function(b,v){k.end(b,v)},this.updateWebSocketCredentials=function(b,v,u,x){k.updateWebSocketCredentials(b,v,u,x)},this.updateCustomAuthHeaders=function(b){k.updateCustomAuthHeaders(b)},this.setConnectionStatus=function(b){S=b},o.EventEmitter.call(this)}a(i,o.EventEmitter),w.exports=i},function(w,I,n){var o=n(15),a=n(27).inherits,f=n(35),c=n(33);function e(i,t,g){var l="$aws/things/"+i+"/jobs/";return c(g)?g=t:l+=t.toString()+"/",l+=g}function s(i){if(!(this instanceof s))return new s(i);var t=this,g=[],l=f.DeviceClient(i);this._updateJobStatus=function(p,d,E,S,k){typeof S=="function"&&(k=S,S=void 0),c(i)||i.debug!==!0||console.log("updateJobStatus:",{thingName:p,jobId:d.id,status:E,statusDetails:S}),l.publish(e(p,d.id,"update"),JSON.stringify({status:E,statusDetails:S}),null,function(b){c(b)&&(d.status={status:E,statusDetails:S}),c(k)||k(b)})},this._buildJobObject=function(p,d){if(c(d)||c(d.jobId))return null;var E={};return E.id=d.jobId,E.document=d.jobDocument,E.operation=E.document.operation,E.status={status:d.status,statusDetails:d.statusDetails},E.inProgress=function(S,k){t._updateJobStatus(p,E,"IN_PROGRESS",S,k)},E.failed=function(S,k){t._updateJobStatus(p,E,"FAILED",S,k)},E.succeeded=function(S,k){t._updateJobStatus(p,E,"SUCCEEDED",S,k)},E},this._handleMessages=function(p,d){var E=p.split("/");if(function(x){return x[0]==="$aws"&&x[1]==="things"&&x[3]==="jobs"}(E)){var S=E[2],k=g.find(function(x){return x.thingName===S});if(!c(k)){var b={};try{b=JSON.parse(d.toString())}catch(x){return void(i.debug===!0&&console.error("failed parsing JSON '"+d.toString()+"', "+x))}if(!(c(b.execution)||c(b.execution.jobId)||c(b.execution.jobDocument))){var v=b.execution.jobDocument.operation,u=k.operations.find(function(x){return c(v)?c(x.operationName):v===x.operationName});c(u)&&(u=k.operations.find(function(x){return c(x.operationName)}),c(u))||u.callback(null,t._buildJobObject(S,b.execution))}}}else t.emit("message",p,d)},this.subscribeToJobs=function(p,d,E){c(E)&&(E=d,d=null),c(i)||i.debug!==!0||console.log("subscribeToJobs:",{thingName:p,operationName:d});var S=g.find(function(b){return b.thingName===p});c(S)&&(S={thingName:p,operations:[]},g.push(S),l.subscribe([e(p,"$next/get/accepted"),e(p,"notify-next")],function(b,v){c(b)||E(b)}));var k=S.operations.find(function(b){return c(d)?c(b.operationName):d===b.operationName});c(k)?(k={operationName:d,callback:E},S.operations.push(k)):k.callback=E},this.unsubscribeFromJobs=function(p,d,E){c(E)&&(E=d,d=null),c(i)||i.debug!==!0||console.log("unsubscribeFromJobs:",{thingName:p,operationName:d});var S=g.findIndex(function(v){return v.thingName===p}),k=new Error("subscription not found for given thing");if(S<0)E(k);else{var b=g[S].operations.findIndex(function(v){return c(d)?c(v.operationName):d===v.operationName});if(b<0)E(k);else{if(g[S].operations.splice(b,1),g[S].operations.length===0)return g.splice(S,1),void l.unsubscribe([e(p,"$next/get/accepted"),e(p,"notify-next")],E);E()}}},this.startJobNotifications=function(p,d){c(i)||i.debug!==!0||console.log("startJobNotifications:",{thingName:p}),l.publish(e(p,"$next","get"),"{}",d)},l.on("connect",function(){t.emit("connect")}),l.on("close",function(){t.emit("close")}),l.on("reconnect",function(){t.emit("reconnect")}),l.on("offline",function(){t.emit("offline")}),l.on("error",function(p){t.emit("error",p)}),l.on("message",t._handleMessages),this.publish=l.publish,this.subscribe=l.subscribe,this.unsubscribe=l.unsubscribe,this.end=l.end,this.handleMessage=l.handleMessage,this.updateWebSocketCredentials=l.updateWebSocketCredentials,this.simulateNetworkFailure=l.simulateNetworkFailure}a(s,o.EventEmitter),w.exports=s},function(w,I,n){var o=n(10),a=n(73),f=n(191),c=n(79);function e(i){var t=new f(i),g=a(f.prototype.request,t);return o.extend(g,f.prototype,t),o.extend(g,t),g}var s=e(n(76));s.Axios=f,s.create=function(i){return e(c(s.defaults,i))},s.Cancel=n(80),s.CancelToken=n(204),s.isCancel=n(75),s.all=function(i){return Promise.all(i)},s.spread=n(205),w.exports=s,w.exports.default=s},function(w,I,n){var o=n(10),a=n(74),f=n(192),c=n(193),e=n(79);function s(i){this.defaults=i,this.interceptors={request:new f,response:new f}}s.prototype.request=function(i){typeof i=="string"?(i=arguments[1]||{}).url=arguments[0]:i=i||{},(i=e(this.defaults,i)).method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var t=[c,void 0],g=Promise.resolve(i);for(this.interceptors.request.forEach(function(l){t.unshift(l.fulfilled,l.rejected)}),this.interceptors.response.forEach(function(l){t.push(l.fulfilled,l.rejected)});t.length;)g=g.then(t.shift(),t.shift());return g},s.prototype.getUri=function(i){return i=e(this.defaults,i),a(i.url,i.params,i.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(i){s.prototype[i]=function(t,g){return this.request(o.merge(g||{},{method:i,url:t}))}}),o.forEach(["post","put","patch"],function(i){s.prototype[i]=function(t,g,l){return this.request(o.merge(l||{},{method:i,url:t,data:g}))}}),w.exports=s},function(w,I,n){var o=n(10);function a(){this.handlers=[]}a.prototype.use=function(f,c){return this.handlers.push({fulfilled:f,rejected:c}),this.handlers.length-1},a.prototype.eject=function(f){this.handlers[f]&&(this.handlers[f]=null)},a.prototype.forEach=function(f){o.forEach(this.handlers,function(c){c!==null&&f(c)})},w.exports=a},function(w,I,n){var o=n(10),a=n(194),f=n(75),c=n(76);function e(s){s.cancelToken&&s.cancelToken.throwIfRequested()}w.exports=function(s){return e(s),s.headers=s.headers||{},s.data=a(s.data,s.headers,s.transformRequest),s.headers=o.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),o.forEach(["delete","get","head","post","put","patch","common"],function(i){delete s.headers[i]}),(s.adapter||c.adapter)(s).then(function(i){return e(s),i.data=a(i.data,i.headers,s.transformResponse),i},function(i){return f(i)||(e(s),i&&i.response&&(i.response.data=a(i.response.data,i.response.headers,s.transformResponse))),Promise.reject(i)})}},function(w,I,n){var o=n(10);w.exports=function(a,f,c){return o.forEach(c,function(e){a=e(a,f)}),a}},function(w,I,n){var o=n(10);w.exports=function(a,f){o.forEach(a,function(c,e){e!==f&&e.toUpperCase()===f.toUpperCase()&&(a[f]=c,delete a[e])})}},function(w,I,n){var o=n(78);w.exports=function(a,f,c){var e=c.config.validateStatus;!e||e(c.status)?a(c):f(o("Request failed with status code "+c.status,c.config,null,c.request,c))}},function(w,I,n){w.exports=function(o,a,f,c,e){return o.config=a,f&&(o.code=f),o.request=c,o.response=e,o.isAxiosError=!0,o.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},o}},function(w,I,n){var o=n(199),a=n(200);w.exports=function(f,c){return f&&!o(c)?a(f,c):c}},function(w,I,n){w.exports=function(o){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(o)}},function(w,I,n){w.exports=function(o,a){return a?o.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):o}},function(w,I,n){var o=n(10),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];w.exports=function(f){var c,e,s,i={};return f&&o.forEach(f.split(`
`),function(t){if(s=t.indexOf(":"),c=o.trim(t.substr(0,s)).toLowerCase(),e=o.trim(t.substr(s+1)),c){if(i[c]&&a.indexOf(c)>=0)return;i[c]=c==="set-cookie"?(i[c]?i[c]:[]).concat([e]):i[c]?i[c]+", "+e:e}}),i}},function(w,I,n){var o=n(10);w.exports=o.isStandardBrowserEnv()?function(){var a,f=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a");function e(s){var i=s;return f&&(c.setAttribute("href",i),i=c.href),c.setAttribute("href",i),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return a=e(window.location.href),function(s){var i=o.isString(s)?e(s):s;return i.protocol===a.protocol&&i.host===a.host}}():function(){return!0}},function(w,I,n){var o=n(10);w.exports=o.isStandardBrowserEnv()?{write:function(a,f,c,e,s,i){var t=[];t.push(a+"="+encodeURIComponent(f)),o.isNumber(c)&&t.push("expires="+new Date(c).toGMTString()),o.isString(e)&&t.push("path="+e),o.isString(s)&&t.push("domain="+s),i===!0&&t.push("secure"),document.cookie=t.join("; ")},read:function(a){var f=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return f?decodeURIComponent(f[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(w,I,n){var o=n(80);function a(f){if(typeof f!="function")throw new TypeError("executor must be a function.");var c;this.promise=new Promise(function(s){c=s});var e=this;f(function(s){e.reason||(e.reason=new o(s),c(e.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var f;return{token:new a(function(c){f=c}),cancel:f}},w.exports=a},function(w,I,n){w.exports=function(o){return function(a){return o.apply(null,a)}}},function(w,I,n){n.r(I),n.d(I,"InPlayer",function(){return Te});var o=n(4),a=n.n(o),f=n(6),c=n.n(f),e=n(2),s=n.n(e),i=n(0),t=n.n(i),g=n(1),l=n.n(g),p=n(17),d=n.n(p),E=n(7),S=n.n(E),k=n(8),b=n.n(k),v=n(5),u=n.n(v),x=n(3),y=n.n(x);function B(Y,$){var J=Object.keys(Y);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(Y);$&&(X=X.filter(function(ct){return Object.getOwnPropertyDescriptor(Y,ct).enumerable})),J.push.apply(J,X)}return J}function M(Y){for(var $=1;$<arguments.length;$++){var J=arguments[$]!=null?arguments[$]:{};$%2?B(Object(J),!0).forEach(function(X){s()(Y,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(J)):B(Object(J)).forEach(function(X){Object.defineProperty(Y,X,Object.getOwnPropertyDescriptor(J,X))})}return Y}var D={INPLAYER_TOKEN_KEY:"inplayer_token",INPLAYER_IOT_KEY:"inplayer_iot",INPLAYER_ACCESS_CODE_NAME:function(Y){return"access_code_".concat(Y)},IOT_NOTIF_URL:"a3gkl64duktvc4-ats.iot.eu-west-1.amazonaws.com"},A=M(M({},D),{},{BASE_URL:"https://services-daily.inplayer.com",AWS_IOT_URL:"https://daily-notifications.inplayer.com/iot/keys"}),P={development:M(M({},D),{},{BASE_URL:"https://staging-v2.inplayer.com",AWS_IOT_URL:"https://staging-notifications.inplayer.com/iot/keys"}),production:M(M({},D),{},{BASE_URL:"https://services.inplayer.com",AWS_IOT_URL:"https://notifications.inplayer.com/iot/keys"}),daily:A},j=function Y($,J){var X=this;a()(this,Y),s()(this,"config",void 0),s()(this,"request",void 0),s()(this,"setConfig",function(ct){X.config=P[ct]}),this.config=$,this.request=J},H="/accounts",K="v2/accounts",G="/accounts/authenticate",R="/v2/accounts/authenticate",q="/accounts/logout",F="/accounts/change-password",z="/accounts/forgot-password",O=function(Y){return"/accounts/forgot-password/".concat(Y)},C="/accounts",U="/accounts",L="/accounts/export",Z="/accounts/erase",ft=function(Y){return"/accounts/social?state=".concat(Y)},ut=function(Y){return"/accounts/register-fields/".concat(Y)},vt=function(Y){return"".concat(Y,"/sso/cookie")},rt="/v2/accounts/pin-codes/send",h="/v2/accounts/pin-codes/validate",m="/v2/accounts/customers/data-capture",r=function(Y){return"/v2/accounts/external/".concat(Y)},_="/v2/accounts/media/favorites",T=function(Y){return"/v2/accounts/media/favorites/".concat(Y)},N="/v2/accounts/media/watch-history",W=function(Y){return"/v2/accounts/media/watch-history/".concat(Y)},V=function(Y){return"/restrictions/settings/".concat(Y)},ot=function(Y,$){return"/items/".concat($,"/").concat(Y)},mt=function(Y,$,J){var X="/items/assets/external/".concat(Y,"/").concat($);return J&&(X+="?merchant_uuid=".concat(J)),X},tt=function(Y){return"/items/".concat(Y,"/access")},dt=function(Y){return"/items/used-trial-period/".concat(Y)},ht=function(Y){return"/items/packages/".concat(Y)},Wt=function(Y){return"items/packages/".concat(Y,"/items")},Kt=function(Y){return"v2/items/".concat(Y,"/access-fees")},Qt=function(Y,$){return"/items/".concat(Y,"/access/cloudfront?url=").concat($)},ie=function(Y,$,J){return"/items/access/customers?status=".concat(Y,"&page=").concat($,"&size=").concat(J)},me="/items/access/codes/entry",ce=function(Y){return"items/access/codes/".concat(Y,"/sessions")},oe=function(Y,$){return"items/access/codes/".concat(Y,"/").concat($)},ye=function(Y){return"v2/items/".concat(Y,"/donations")},Ht="/payments/methods",Yt="/payments",Xt="/v2/payments",ee="/v2/payments/cards/default",ae="/v2/payments/cards/default",ve="/external-payments",fe="/v2/payments/direct-debit/mandate",Ie="/v2/payments/direct-debit/mandate",Ce="/v2/payments/donation",Pe="/v2/payments/donation:confirm",Ne=function(Y){return"v2/external-payments/".concat(Y,"/validate")},Re=function(Y,$,J,X,ct){var Et="/payments/transactions?exclude=store-payment&size=".concat(Y,"&page=").concat($);return J&&(Et+="&startDate=".concat(J)),X&&(Et+="&endDate=".concat(X)),ct&&(Et+="&type=".concat(ct)),Et},je=function(Y,$,J){var X="/subscriptions?limit=".concat(Y,"&page=").concat($);return J&&(X+="&status=".concat(J)),X},Be=function(Y){return"/subscriptions/".concat(Y)},Me=function(Y){return"".concat(Y)},Le="/subscriptions",le="/v2/subscriptions",De="/v2/subscriptions/stripe:switch",qe="/vouchers/discount",Ue=function(Y,$){return"/branding/paywall/".concat(Y,"/").concat($)},Fe=function(Y){return"/v2/nfts/marketplaces/".concat(Y)},ze=function(Y,$,J,X){return"/v2/nfts/".concat(Y,"?filter=").concat(X,"&page=").concat($,"&size=").concat(J)},He=function(Y,$){return"/v2/nfts/".concat(Y,"/").concat($)},Ve=function(Y,$){return"/v2/nfts/exchange-rate/".concat(Y).concat($?"?invert=true":"")},We=function(Y,$){return"/v2/nfts?page=".concat(Y,"&size=").concat($)},Ge=function(Y,$){return"/v2/nfts/".concat(Y,"/").concat($,"/reserve")},te=new function Y(){var $=this;a()(this,Y),s()(this,"storage",{}),s()(this,"setItem",function(J,X){return $.overrides.setItem(J,X)}),s()(this,"getItem",function(J){return $.overrides.getItem(J)}),s()(this,"removeItem",function(J){return $.overrides.removeItem(J)}),s()(this,"overrides",{setItem:function(J,X){var ct;(ct=localStorage)!==null&&ct!==void 0&&ct.setItem?localStorage.setItem(J,X):$.storage[J]=X},getItem:function(J){var X;return(X=localStorage)!==null&&X!==void 0&&X.getItem?localStorage.getItem(J):$.storage[J]||null},removeItem:function(J){var X;(X=localStorage)!==null&&X!==void 0&&X.removeItem?localStorage.removeItem(J):delete $.storage[J]}})};function Ke(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}var Ye=function(Y){S()(Ft,Y);var $,J,X,ct,Et,Dt,Mt,qt,Rt,zt,jt,At,st,Ot,Lt,Gt,wt,bt,_t,kt,it,Q,pt,xt,yt,Tt,It,Pt,Ct,Ut=Ke(Ft);function Ft(lt,nt){var et;return a()(this,Ft),et=Ut.call(this,lt,nt),s()(d()(et),"isAuthenticated",et.request.isAuthenticated),s()(d()(et),"getToken",et.request.getToken),s()(d()(et),"setToken",et.request.setToken),s()(d()(et),"removeToken",et.request.removeToken),et}return c()(Ft,[{key:"signIn",value:(Ct=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt,Bt,Vt,$t;return t.a.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return et=nt.email,at=nt.clientId,gt=nt.clientSecret,St=nt.refreshToken,Nt=nt.referrer,Bt=nt.password,Vt={client_id:at,grant_type:"password",referrer:Nt},gt&&(Vt.client_secret=gt,Vt.grant_type="client_credentials"),St?(Vt.refresh_token=St,Vt.grant_type="refresh_token"):(Vt.username=et,Vt.password=Bt),Jt.next=6,this.request.post(G,y.a.stringify(Vt),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 6:return $t=Jt.sent,Jt.next=9,this.request.setToken($t.data.access_token,$t.data.refresh_token,$t.data.expires);case 9:return Jt.abrupt("return",$t);case 10:case"end":return Jt.stop()}},lt,this)})),function(lt){return Ct.apply(this,arguments)})},{key:"signInV2",value:(Pt=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt,Bt;return t.a.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return et=nt.email,at=nt.clientId,gt=nt.referrer,St=nt.password,Nt={client_id:at,grant_type:"password",referrer:gt,username:et,password:St},Vt.next=4,this.request.post(R,y.a.stringify(Nt),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return Bt=Vt.sent,Vt.next=7,this.request.setToken(Bt.data.access_token,Bt.data.refresh_token,Bt.data.expires);case 7:return Vt.abrupt("return",Bt);case 8:case"end":return Vt.stop()}},lt,this)})),function(lt){return Pt.apply(this,arguments)})},{key:"signUp",value:(It=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt,Bt,Vt,$t,Jt,ue,re;return t.a.wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:return et=nt.fullName,at=nt.email,gt=nt.password,St=nt.passwordConfirmation,Nt=nt.type,Bt=nt.clientId,Vt=nt.referrer,$t=nt.metadata,Jt=nt.brandingId,ue={full_name:et,username:at,password:gt,password_confirmation:St,client_id:Bt,type:Nt,referrer:Vt,grant_type:"password",metadata:$t,branding_id:Jt},Zt.next=4,this.request.post(H,y.a.stringify(ue),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return re=Zt.sent,Zt.next=7,this.request.setToken(re.data.access_token,re.data.refresh_token,re.data.expires);case 7:return Zt.abrupt("return",re);case 8:case"end":return Zt.stop()}},lt,this)})),function(lt){return It.apply(this,arguments)})},{key:"signUpV2",value:(Tt=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt,Bt,Vt,$t,Jt,ue,re,Zt;return t.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return et=nt.fullName,at=nt.email,gt=nt.password,St=nt.passwordConfirmation,Nt=nt.clientId,Bt=nt.type,Vt=Bt===void 0?"consumer":Bt,$t=nt.referrer,Jt=nt.metadata,ue=nt.brandingId,re={full_name:et,username:at,password:gt,password_confirmation:St,client_id:Nt,type:Vt,referrer:$t,grant_type:"password",metadata:Jt,branding_id:ue},ne.next=4,this.request.post(K,y.a.stringify(re),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return Zt=ne.sent,ne.next=7,this.request.setToken(Zt.data.access_token,Zt.data.refresh_token,Zt.data.expires);case 7:return ne.abrupt("return",Zt);case 8:case"end":return ne.stop()}},lt,this)})),function(lt){return Tt.apply(this,arguments)})},{key:"signOut",value:(yt=l()(t.a.mark(function lt(){var nt,et;return t.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=2,this.request.getToken();case 2:return nt=at.sent,at.next=5,this.request.get(q,{headers:{Authorization:"Bearer ".concat(nt.token)}});case 5:return et=at.sent,at.next=8,this.request.removeToken();case 8:return at.abrupt("return",et);case 9:case"end":return at.stop()}},lt,this)})),function(){return yt.apply(this,arguments)})},{key:"refreshToken",value:(xt=l()(t.a.mark(function lt(nt){var et,at,gt;return t.a.wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return St.next=2,this.request.getToken();case 2:if((et=St.sent).refreshToken){St.next=6;break}throw{response:{status:401,data:{code:401,message:"The refresh token is not present"}}};case 6:return at={refresh_token:et.refreshToken,client_id:nt,grant_type:"refresh_token"},St.next=9,this.request.post(G,y.a.stringify(at),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 9:return gt=St.sent,St.abrupt("return",gt);case 11:case"end":return St.stop()}},lt,this)})),function(lt){return xt.apply(this,arguments)})},{key:"reportSSOtoken",value:(pt=l()(t.a.mark(function lt(nt,et){var at,gt,St=arguments;return t.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return at=St.length>2&&St[2]!==void 0&&St[2],(gt=new FormData).append("token",et),gt.append("delete",at?"1":"0"),Nt.abrupt("return",this.request.post(vt(nt),gt,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}));case 5:case"end":return Nt.stop()}},lt,this)})),function(lt,nt){return pt.apply(this,arguments)})},{key:"requestNewPassword",value:(Q=l()(t.a.mark(function lt(nt){var et,at,gt,St;return t.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return et=nt.email,at=nt.merchantUuid,gt=nt.brandingId,St={email:et,merchant_uuid:at,branding_id:gt},Nt.abrupt("return",this.request.post(z,y.a.stringify(St),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 3:case"end":return Nt.stop()}},lt,this)})),function(lt){return Q.apply(this,arguments)})},{key:"setNewPassword",value:(it=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt,Bt,Vt,$t=arguments;return t.a.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return et=nt.password,at=nt.passwordConfirmation,gt=nt.brandingId,St=$t.length>1&&$t[1]!==void 0?$t[1]:"",Nt=encodeURIComponent(et),Bt=encodeURIComponent(at),Vt="password=".concat(Nt,"&password_confirmation=").concat(Bt,"&branding_id=").concat(gt),Jt.abrupt("return",this.request.put(O(St),Vt,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Jt.stop()}},lt,this)})),function(lt){return it.apply(this,arguments)})},{key:"syncWithExternalAccount",value:(kt=l()(t.a.mark(function lt(nt,et){var at,gt;return t.a.wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return at={item_id:et},St.next=3,this.request.getToken();case 3:return gt=St.sent,St.abrupt("return",this.request.post(r(nt),y.a.stringify(at),{headers:{Authorization:"Bearer ".concat(gt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 5:case"end":return St.stop()}},lt,this)})),function(lt,nt){return kt.apply(this,arguments)})},{key:"updateExternalAccount",value:(_t=l()(t.a.mark(function lt(nt,et){var at;return t.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,this.request.getToken();case 2:return at=gt.sent,gt.abrupt("return",this.request.patch(r(nt),y.a.stringify(et),{headers:{Authorization:"Bearer ".concat(at.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 4:case"end":return gt.stop()}},lt,this)})),function(lt,nt){return _t.apply(this,arguments)})},{key:"getAccountInfo",value:(bt=l()(t.a.mark(function lt(){var nt;return t.a.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.next=2,this.request.getToken();case 2:return nt=et.sent,et.abrupt("return",this.request.get(C,{headers:{Authorization:"Bearer ".concat(nt.token)}}));case 4:case"end":return et.stop()}},lt,this)})),function(){return bt.apply(this,arguments)})},{key:"getSocialLoginUrls",value:(wt=l()(t.a.mark(function lt(nt){return t.a.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.abrupt("return",this.request.get(ft(nt)));case 1:case"end":return et.stop()}},lt,this)})),function(lt){return wt.apply(this,arguments)})},{key:"updateAccount",value:(Gt=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt;return t.a.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return et=nt.fullName,at=nt.metadata,gt=nt.dateOfBirth,St={full_name:et},at&&(St.metadata=at),gt&&(St.date_of_birth=gt),Bt.next=6,this.request.getToken();case 6:return Nt=Bt.sent,Bt.abrupt("return",this.request.put(U,y.a.stringify(St),{headers:{Authorization:"Bearer ".concat(Nt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 8:case"end":return Bt.stop()}},lt,this)})),function(lt){return Gt.apply(this,arguments)})},{key:"changePassword",value:(Lt=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt,Bt;return t.a.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return et=nt.password,at=nt.passwordConfirmation,gt=nt.oldPassword,St=nt.brandingId,Nt={old_password:gt,password:et,password_confirmation:at,branding_id:St},Vt.next=4,this.request.getToken();case 4:return Bt=Vt.sent,Vt.abrupt("return",this.request.post(F,y.a.stringify(Nt),{headers:{Authorization:"Bearer ".concat(Bt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Vt.stop()}},lt,this)})),function(lt){return Lt.apply(this,arguments)})},{key:"getRegisterFields",value:(Ot=l()(t.a.mark(function lt(){var nt,et=arguments;return t.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return nt=et.length>0&&et[0]!==void 0?et[0]:"",at.abrupt("return",this.request.get(ut(nt)));case 2:case"end":return at.stop()}},lt,this)})),function(){return Ot.apply(this,arguments)})},{key:"deleteAccount",value:(st=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt;return t.a.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return et=nt.password,at=nt.brandingId,gt={password:et,branding_id:at},Bt.next=4,this.request.getToken();case 4:return St=Bt.sent,Bt.next=7,this.request.delete(Z,{headers:{Authorization:"Bearer ".concat(St.token),"Content-Type":"application/x-www-form-urlencoded"},data:y.a.stringify(gt)});case 7:return Nt=Bt.sent,Bt.next=10,Promise.all([te.removeItem(this.config.INPLAYER_TOKEN_KEY),te.removeItem(this.config.INPLAYER_IOT_KEY)]);case 10:return Bt.abrupt("return",Nt);case 11:case"end":return Bt.stop()}},lt,this)})),function(lt){return st.apply(this,arguments)})},{key:"exportData",value:(At=l()(t.a.mark(function lt(nt){var et,at,gt,St;return t.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return et=nt.password,at=nt.brandingId,gt={password:et,branding_id:at},Nt.next=4,this.request.getToken();case 4:return St=Nt.sent,Nt.abrupt("return",this.request.post(L,y.a.stringify(gt),{headers:{Authorization:"Bearer ".concat(St.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Nt.stop()}},lt,this)})),function(lt){return At.apply(this,arguments)})},{key:"sendPinCode",value:(jt=l()(t.a.mark(function lt(nt){var et,at;return t.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return et={branding_id:nt},gt.next=3,this.request.getToken();case 3:return at=gt.sent,gt.abrupt("return",this.request.post(rt,y.a.stringify(et),{headers:{Authorization:"Bearer ".concat(at.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 5:case"end":return gt.stop()}},lt,this)})),function(lt){return jt.apply(this,arguments)})},{key:"validatePinCode",value:(zt=l()(t.a.mark(function lt(nt){var et,at;return t.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return et={pin_code:nt},gt.next=3,this.request.getToken();case 3:return at=gt.sent,gt.abrupt("return",this.request.post(h,y.a.stringify(et),{headers:{Authorization:"Bearer ".concat(at.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 5:case"end":return gt.stop()}},lt,this)})),function(lt){return zt.apply(this,arguments)})},{key:"loadMerchantRestrictionSettings",value:(Rt=l()(t.a.mark(function lt(nt){return t.a.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.abrupt("return",this.request.get(V(nt)));case 1:case"end":return et.stop()}},lt,this)})),function(lt){return Rt.apply(this,arguments)})},{key:"getFavorites",value:(qt=l()(t.a.mark(function lt(){var nt;return t.a.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.next=2,this.request.getToken();case 2:return nt=et.sent,et.abrupt("return",this.request.get(_,{headers:{Authorization:"Bearer ".concat(nt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 4:case"end":return et.stop()}},lt,this)})),function(){return qt.apply(this,arguments)})},{key:"getFavorite",value:(Mt=l()(t.a.mark(function lt(nt){var et;return t.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=2,this.request.getToken();case 2:return et=at.sent,at.abrupt("return",this.request.get(T(nt),{headers:{Authorization:"Bearer ".concat(et.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 4:case"end":return at.stop()}},lt,this)})),function(lt){return Mt.apply(this,arguments)})},{key:"addToFavorites",value:(Dt=l()(t.a.mark(function lt(nt){var et,at;return t.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return et={media_id:nt},gt.next=3,this.request.getToken();case 3:return at=gt.sent,gt.abrupt("return",this.request.post(_,y.a.stringify(et),{headers:{Authorization:"Bearer ".concat(at.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 5:case"end":return gt.stop()}},lt,this)})),function(lt){return Dt.apply(this,arguments)})},{key:"deleteFromFavorites",value:(Et=l()(t.a.mark(function lt(nt){var et;return t.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=2,this.request.getToken();case 2:return et=at.sent,at.abrupt("return",this.request.delete(T(nt),{headers:{Authorization:"Bearer ".concat(et.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 4:case"end":return at.stop()}},lt,this)})),function(lt){return Et.apply(this,arguments)})},{key:"getWatchHistory",value:(ct=l()(t.a.mark(function lt(nt){var et,at,gt,St,Nt;return t.a.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return et=nt.filter,at=et===void 0?"currently_watching":et,gt=nt.cursor,St=gt===void 0?"":gt,Bt.next=3,this.request.getToken();case 3:return Nt=Bt.sent,Bt.abrupt("return",this.request.get("".concat(N,"?filter=").concat(at,"&cursor=").concat(St),{headers:{Authorization:"Bearer ".concat(Nt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 5:case"end":return Bt.stop()}},lt,this)})),function(lt){return ct.apply(this,arguments)})},{key:"getWatchHistoryForItem",value:(X=l()(t.a.mark(function lt(nt){var et;return t.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=2,this.request.getToken();case 2:return et=at.sent,at.abrupt("return",this.request.get(W(nt),{headers:{Authorization:"Bearer ".concat(et.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 4:case"end":return at.stop()}},lt,this)})),function(lt){return X.apply(this,arguments)})},{key:"updateWatchHistory",value:(J=l()(t.a.mark(function lt(nt,et){var at,gt;return t.a.wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return at={media_id:nt,progress:et},St.next=3,this.request.getToken();case 3:return gt=St.sent,St.abrupt("return",this.request.patch(N,y.a.stringify(at),{headers:{Authorization:"Bearer ".concat(gt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 5:case"end":return St.stop()}},lt,this)})),function(lt,nt){return J.apply(this,arguments)})},{key:"deleteWatchHistoryForItem",value:($=l()(t.a.mark(function lt(nt){var et;return t.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=2,this.request.getToken();case 2:return et=at.sent,at.abrupt("return",this.request.delete(W(nt),{headers:{Authorization:"Bearer ".concat(et.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 4:case"end":return at.stop()}},lt,this)})),function(lt){return $.apply(this,arguments)})}]),Ft}(j),Xe=n(45),xe=n.n(Xe),Je=n(81),Qe=n.n(Je),be=function(){function Y(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=$.token,X=J===void 0?"":J,ct=$.refreshToken,Et=ct===void 0?"":ct,Dt=$.expires,Mt=Dt===void 0?0:Dt;a()(this,Y),s()(this,"token",void 0),s()(this,"refreshToken",void 0),s()(this,"expires",void 0),this.token=X,this.refreshToken=Et,this.expires=Mt}return c()(Y,[{key:"isExpired",value:function(){return $e()>this.expires}},{key:"toObject",value:function(){return{token:this.token,refreshToken:this.refreshToken,expires:this.expires}}}]),Y}(),se=function(Y,$){var J={url:new URL(Y)},X=J.url,ct=J.url.searchParams;return Object.keys($).forEach(function(Et){ct.set(Et,$[Et])}),X.href},he=function(Y){if(Promise&&Promise.resolve)return Promise.resolve(Y)===Y;throw"Promise not supported in your environment"},ke=function(Y){return Y?new be(JSON.parse(Y)):new be},$e=function(){return Math.floor(Date.now()/1e3)};function Ze(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}var pe,we,tr=function(Y){S()(Gt,Y);var $,J,X,ct,Et,Dt,Mt,qt,Rt,zt,jt,At,st,Ot,Lt=Ze(Gt);function Gt(wt,bt){return a()(this,Gt),Lt.call(this,wt,bt)}return c()(Gt,[{key:"checkAccessForAsset",value:(Ot=l()(t.a.mark(function wt(bt){var _t;return t.a.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.request.getToken();case 2:return _t=kt.sent,kt.abrupt("return",this.request.authenticatedGet(tt(bt),{headers:{Authorization:"Bearer ".concat(_t.token)}}));case 4:case"end":return kt.stop()}},wt,this)})),function(wt){return Ot.apply(this,arguments)})},{key:"isFreeTrialUsed",value:(st=l()(t.a.mark(function wt(bt){var _t;return t.a.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.request.getToken();case 2:return _t=kt.sent,kt.abrupt("return",this.request.authenticatedGet(dt(bt),{headers:{Authorization:"Bearer ".concat(_t.token)}}));case 4:case"end":return kt.stop()}},wt,this)})),function(wt){return st.apply(this,arguments)})},{key:"getAsset",value:(At=l()(t.a.mark(function wt(bt,_t){return t.a.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.abrupt("return",this.request.get(ot(bt,_t)));case 1:case"end":return kt.stop()}},wt,this)})),function(wt,bt){return At.apply(this,arguments)})},{key:"getExternalAsset",value:(jt=l()(t.a.mark(function wt(bt,_t){var kt,it=arguments;return t.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return kt=it.length>2&&it[2]!==void 0?it[2]:"",Q.abrupt("return",this.request.get(mt(bt,_t,kt)));case 2:case"end":return Q.stop()}},wt,this)})),function(wt,bt){return jt.apply(this,arguments)})},{key:"getPackage",value:(zt=l()(t.a.mark(function wt(bt){return t.a.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.abrupt("return",this.request.get(ht(bt)));case 1:case"end":return _t.stop()}},wt,this)})),function(wt){return zt.apply(this,arguments)})},{key:"getAssetsInPackage",value:(Rt=l()(t.a.mark(function wt(bt){return t.a.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.abrupt("return",this.request.get(Wt(bt)));case 1:case"end":return _t.stop()}},wt,this)})),function(wt){return Rt.apply(this,arguments)})},{key:"getAssetAccessFees",value:(qt=l()(t.a.mark(function wt(bt){return t.a.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.abrupt("return",this.request.get(Kt(bt)));case 1:case"end":return _t.stop()}},wt,this)})),function(wt){return qt.apply(this,arguments)})},{key:"getAssetsHistory",value:(Mt=l()(t.a.mark(function wt(){var bt,_t,kt,it,Q,pt,xt=arguments;return t.a.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return bt=xt.length>0&&xt[0]!==void 0?xt[0]:10,_t=xt.length>1&&xt[1]!==void 0?xt[1]:0,kt=xt.length>2?xt[2]:void 0,it=xt.length>3?xt[3]:void 0,Q=xt.length>4?xt[4]:void 0,yt.next=7,this.request.getToken();case 7:return pt=yt.sent,yt.abrupt("return",this.request.authenticatedGet(Re(bt,_t,kt,it,Q),{headers:{Authorization:"Bearer ".concat(pt.token)}}));case 9:case"end":return yt.stop()}},wt,this)})),function(){return Mt.apply(this,arguments)})},{key:"requestCodeAccess",value:(Dt=l()(t.a.mark(function wt(bt){var _t,kt,it,Q,pt,xt,yt;return t.a.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return _t=bt.item_id,kt=bt.code,it=new FormData,Tt.next=4,xe.a.getPromise();case 4:return Q=Tt.sent,pt=xe.a.x64hash128(Qe()(Q,function(It,Pt){return"".concat(It).concat(Pt.value)},""),31),it.set("item_id",String(_t)),it.set("code",String(kt)),it.set("browser_fingerprint",pt),Tt.next=11,this.request.post(me,it);case 11:return xt=Tt.sent,yt={item_id:_t,code:kt,browser_fingerprint:pt,code_id:xt.data.code_id},Tt.next=15,te.setItem(this.config.INPLAYER_ACCESS_CODE_NAME(_t),JSON.stringify(yt));case 15:return Tt.abrupt("return",xt);case 16:case"end":return Tt.stop()}},wt,this)})),function(wt){return Dt.apply(this,arguments)})},{key:"getAccessCode",value:function(wt){var bt=te.getItem(this.config.INPLAYER_ACCESS_CODE_NAME(wt));return he(bt)?bt.then(function(_t){return _t?JSON.parse(_t):null}):bt?JSON.parse(bt):null}},{key:"getAccesCodeSessions",value:(Et=l()(t.a.mark(function wt(bt){return t.a.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return _t.abrupt("return",this.request.get(ce(bt)));case 1:case"end":return _t.stop()}},wt,this)})),function(wt){return Et.apply(this,arguments)})},{key:"terminateSession",value:(ct=l()(t.a.mark(function wt(bt){var _t,kt;return t.a.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,this.getAccessCode(bt);case 2:if(_t=it.sent){it.next=5;break}return it.abrupt("return",null);case 5:return it.next=7,this.request.delete(oe(_t.code_id,_t.browser_fingerprint));case 7:return kt=it.sent,it.next=10,te.removeItem(this.config.INPLAYER_ACCESS_CODE_NAME(bt));case 10:return it.abrupt("return",kt);case 11:case"end":return it.stop()}},wt,this)})),function(wt){return ct.apply(this,arguments)})},{key:"requestDataCaptureNoAuthAccess",value:(X=l()(t.a.mark(function wt(bt){var _t,kt,it,Q,pt,xt;return t.a.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return _t=bt.email,kt=bt.full_name,it=bt.company,Q=bt.merchant_uuid,pt={email:_t,full_name:kt,company:it,merchant_uuid:Q},xt={"Content-Type":"application/x-www-form-urlencoded"},yt.abrupt("return",this.request.post(m,y.a.stringify(pt),{headers:xt}));case 4:case"end":return yt.stop()}},wt,this)})),function(wt){return X.apply(this,arguments)})},{key:"getCloudfrontURL",value:(J=l()(t.a.mark(function wt(bt,_t){var kt;return t.a.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,this.request.getToken();case 2:return kt=it.sent,it.abrupt("return",this.request.get(Qt(bt,_t),{headers:{Authorization:"Bearer ".concat(kt.token)}}));case 4:case"end":return it.stop()}},wt,this)})),function(wt,bt){return J.apply(this,arguments)})},{key:"getDonationOptions",value:($=l()(t.a.mark(function wt(bt){var _t;return t.a.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.request.getToken();case 2:return _t=kt.sent,kt.abrupt("return",this.request.get(ye(bt),{headers:{Authorization:"Bearer ".concat(_t.token)}}));case 4:case"end":return kt.stop()}},wt,this)})),function(wt){return $.apply(this,arguments)})}]),Gt}(j);function Se(Y,$){var J=Object.keys(Y);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(Y);$&&(X=X.filter(function(ct){return Object.getOwnPropertyDescriptor(Y,ct).enumerable})),J.push.apply(J,X)}return J}function _e(Y){for(var $=1;$<arguments.length;$++){var J=arguments[$]!=null?arguments[$]:{};$%2?Se(Object(J),!0).forEach(function(X){s()(Y,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(J)):Se(Object(J)).forEach(function(X){Object.defineProperty(Y,X,Object.getOwnPropertyDescriptor(J,X))})}return Y}function er(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}(function(Y){Y.APPLE_PAY_ON_WEB="apple pay on web",Y.GOOGLE_PAY_ON_WEB="google pay on web"})(pe||(pe={})),function(Y){Y.AMAZON="amazon",Y.APPLE="apple",Y.GOOGLE_PLAY="google-play",Y.ROKU="roku"}(we||(we={}));var rr=function(Y){S()(kt,Y);var $,J,X,ct,Et,Dt,Mt,qt,Rt,zt,jt,At,st,Ot,Lt,Gt,wt,bt,_t=er(kt);function kt(it,Q){return a()(this,kt),_t.call(this,it,Q)}return c()(kt,[{key:"getPaymentMethods",value:(bt=l()(t.a.mark(function it(){var Q;return t.a.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.request.getToken();case 2:return Q=pt.sent,pt.abrupt("return",this.request.authenticatedGet(Ht,{headers:{Authorization:"Bearer ".concat(Q.token)}}));case 4:case"end":return pt.stop()}},it,this)})),function(){return bt.apply(this,arguments)})},{key:"createPayment",value:(wt=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct,Ut,Ft,lt,nt,et,at,gt,St;return t.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return pt=Q.number,xt=Q.cardName,yt=Q.expMonth,Tt=Q.expYear,It=Q.cvv,Pt=Q.accessFee,Ct=Q.paymentMethod,Ut=Q.referrer,Ft=Q.voucherCode,lt=Q.brandingId,nt=Q.returnUrl,et=Q.receiverEmail,at=Q.isGift,gt={number:pt,card_name:xt,exp_month:yt,exp_year:Tt,cvv:It,access_fee:Pt,payment_method:Ct,referrer:Ut,branding_id:lt,return_url:se(nt,{ippwat:"ppv"})},Ft&&(gt.voucher_code=Ft),at&&(gt.is_gift=at,gt.receiver_email=et),Nt.next=6,this.request.getToken();case 6:return St=Nt.sent,Nt.abrupt("return",this.request.authenticatedPost(Yt,y.a.stringify(gt),{headers:{Authorization:"Bearer ".concat(St.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 8:case"end":return Nt.stop()}},it,this)})),function(it){return wt.apply(this,arguments)})},{key:"createDonationPayment",value:(Gt=l()(t.a.mark(function it(Q){var pt,xt;return t.a.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return pt={number:Q.number,card_name:Q.cardName,exp_month:Q.expMonth,exp_year:Q.expYear,cvv:Q.cvv,payment_method:Q.paymentMethod,referrer:Q.referrer,branding_id:Q.brandingId,currency_iso:Q.currency,amount:Q.amount,item_id:Q.assetId,donation_id:Q.donationId,return_url:se(Q.returnUrl,{ippwat:"ppv"})},yt.next=3,this.request.getToken();case 3:return xt=yt.sent,yt.abrupt("return",this.request.authenticatedPost(Ce,y.a.stringify(pt),{headers:{Authorization:"Bearer ".concat(xt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 5:case"end":return yt.stop()}},it,this)})),function(it){return Gt.apply(this,arguments)})},{key:"confirmPayment",value:(Lt=l()(t.a.mark(function it(Q){var pt,xt;return t.a.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(Q){yt.next=3;break}throw{response:{status:400,data:{code:400,message:"Payment Intend Id is a required parameter!"}}};case 3:return pt={pi_id:Q},yt.next=6,this.request.getToken();case 6:return xt=yt.sent,yt.abrupt("return",this.request.authenticatedPost(Yt,y.a.stringify(pt),{headers:{Authorization:"Bearer ".concat(xt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 8:case"end":return yt.stop()}},it,this)})),function(it){return Lt.apply(this,arguments)})},{key:"confirmDonationPayment",value:(Ot=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt;return t.a.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(pt=Q.paymentIntentId,xt=Q.brandingId,yt=Q.paymentMethod,Tt=Q.donationId,pt){Ct.next=4;break}throw{response:{status:400,data:{code:400,message:"Payment Intend Id is a required parameter!"}}};case 4:return It={pi_id:pt,branding_id:xt,payment_method:yt,donation_id:Tt},Ct.next=7,this.request.getToken();case 7:return Pt=Ct.sent,Ct.abrupt("return",this.request.authenticatedPost(Pe,y.a.stringify(It),{headers:{Authorization:"Bearer ".concat(Pt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 9:case"end":return Ct.stop()}},it,this)})),function(it){return Ot.apply(this,arguments)})},{key:"getPayPalParams",value:(st=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct;return t.a.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return pt=Q.origin,xt=Q.accessFeeId,yt=Q.paymentMethod,Tt=Q.voucherCode,It=Q.brandingId,(Pt=new FormData).append("origin",pt),Pt.append("access_fee",String(xt)),Pt.append("payment_method",String(yt)),Pt.append("branding_id",String(It)),Tt&&Pt.append("voucher_code",Tt),Ut.next=9,this.request.getToken();case 9:return Ct=Ut.sent,Ut.abrupt("return",this.request.authenticatedPost(ve,Pt,{headers:{Authorization:"Bearer ".concat(Ct.token)}}));case 11:case"end":return Ut.stop()}},it,this)})),function(it){return st.apply(this,arguments)})},{key:"getPurchaseHistory",value:(At=l()(t.a.mark(function it(){var Q,pt,xt,yt,Tt=arguments;return t.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return Q=Tt.length>0&&Tt[0]!==void 0?Tt[0]:"active",pt=Tt.length>1&&Tt[1]!==void 0?Tt[1]:0,xt=Tt.length>2&&Tt[2]!==void 0?Tt[2]:5,It.next=5,this.request.getToken();case 5:return yt=It.sent,It.abrupt("return",this.request.authenticatedGet(ie(Q,pt,xt),{headers:{Authorization:"Bearer ".concat(yt.token)}}));case 7:case"end":return It.stop()}},it,this)})),function(){return At.apply(this,arguments)})},{key:"getDefaultCreditCard",value:(jt=l()(t.a.mark(function it(){var Q;return t.a.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.request.getToken();case 2:return Q=pt.sent,pt.abrupt("return",this.request.authenticatedGet(ee,{headers:{Authorization:"Bearer ".concat(Q.token)}}));case 4:case"end":return pt.stop()}},it,this)})),function(){return jt.apply(this,arguments)})},{key:"setDefaultCreditCard",value:(zt=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct,Ut;return t.a.wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return pt=Q.cardNumber,xt=Q.cardName,yt=Q.cvc,Tt=Q.expMonth,It=Q.expYear,Pt=Q.currency,Ct={number:pt,card_name:xt,cvv:yt,exp_month:Tt,exp_year:It,currency_iso:Pt},Ft.next=4,this.request.getToken();case 4:return Ut=Ft.sent,Ft.abrupt("return",this.request.authenticatedPut(ae,y.a.stringify(Ct),{headers:{Authorization:"Bearer ".concat(Ut.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Ft.stop()}},it,this)})),function(it){return zt.apply(this,arguments)})},{key:"getDirectDebitMandate",value:(Rt=l()(t.a.mark(function it(){var Q;return t.a.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.request.getToken();case 2:return Q=pt.sent,pt.abrupt("return",this.request.authenticatedGet(fe,{headers:{Authorization:"Bearer ".concat(Q.token)}}));case 4:case"end":return pt.stop()}},it,this)})),function(){return Rt.apply(this,arguments)})},{key:"createDirectDebitMandate",value:(qt=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It;return t.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return pt=Q.name,xt=Q.iban,yt=Q.address,Tt=_e({name:pt,iban:xt},yt&&{address:yt}),Pt.next=4,this.request.getToken();case 4:return It=Pt.sent,Pt.abrupt("return",this.request.authenticatedPost(Ie,y.a.stringify(Tt),{headers:{Authorization:"Bearer ".concat(It.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Pt.stop()}},it,this)})),function(it){return qt.apply(this,arguments)})},{key:"directDebitCharge",value:(Mt=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct;return t.a.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return pt=Q.accessFeeId,xt=Q.assetId,yt=Q.voucherCode,Tt=Q.brandingId,It=Q.referrer,Pt={access_fee_id:pt,item_id:xt,voucher_code:yt,payment_method:"Direct Debit",branding_id:Tt,referrer:It},Ut.next=4,this.request.getToken();case 4:return Ct=Ut.sent,Ut.abrupt("return",this.request.authenticatedPost(Xt,y.a.stringify(Pt),{headers:{Authorization:"Bearer ".concat(Ct.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Ut.stop()}},it,this)})),function(it){return Mt.apply(this,arguments)})},{key:"directDebitSubscribe",value:(Dt=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct;return t.a.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return pt=Q.accessFeeId,xt=Q.assetId,yt=Q.voucherCode,Tt=Q.brandingId,It=Q.referrer,Pt={item_id:xt,access_fee_id:pt,voucher_code:yt,payment_method:"Direct Debit",branding_id:Tt,referrer:It},Ut.next=4,this.request.getToken();case 4:return Ct=Ut.sent,Ut.abrupt("return",this.request.authenticatedPost(le,y.a.stringify(Pt),{headers:{Authorization:"Bearer ".concat(Ct.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Ut.stop()}},it,this)})),function(it){return Dt.apply(this,arguments)})},{key:"idealPayment",value:(Et=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct,Ut;return t.a.wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return pt=Q.accessFeeId,xt=Q.bank,yt=Q.returnUrl,Tt=Q.referrer,It=Q.brandingId,Pt=Q.voucherCode,Ct={payment_method:"ideal",access_fee_id:pt,bank:xt,return_url:se(yt,{ippwat:"ppv"}),referrer:Tt},It&&(Ct.branding_id=It),Pt&&(Ct.voucher_code=Pt),Ft.next=6,this.request.getToken();case 6:return Ut=Ft.sent,Ft.abrupt("return",this.request.authenticatedPost(Xt,y.a.stringify(Ct),{headers:{Authorization:"Bearer ".concat(Ut.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 8:case"end":return Ft.stop()}},it,this)})),function(it){return Et.apply(this,arguments)})},{key:"idealSubscribe",value:(ct=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct,Ut;return t.a.wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return pt=Q.accessFeeId,xt=Q.bank,yt=Q.returnUrl,Tt=Q.referrer,It=Q.brandingId,Pt=Q.voucherCode,Ct={payment_method:"ideal",access_fee_id:pt,bank:xt,return_url:se(yt,{ippwat:"subscription"}),referrer:Tt},It&&(Ct.branding_id=It),Pt&&(Ct.voucher_code=Pt),Ft.next=6,this.request.getToken();case 6:return Ut=Ft.sent,Ft.abrupt("return",this.request.authenticatedPost(le,y.a.stringify(Ct),{headers:{Authorization:"Bearer ".concat(Ut.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 8:case"end":return Ft.stop()}},it,this)})),function(it){return ct.apply(this,arguments)})},{key:"googlePayPayment",value:(X=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt;return t.a.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return pt=Q.accessFeeId,xt=Q.referrer,yt=Q.brandingId,Tt=Q.voucherCode,It={payment_method:pe.GOOGLE_PAY_ON_WEB,access_fee_id:pt,voucher_code:Tt,branding_id:yt,referrer:xt},Ct.next=4,this.request.getToken();case 4:return Pt=Ct.sent,Ct.abrupt("return",this.request.authenticatedPost(Xt,y.a.stringify(It),{headers:{Authorization:"Bearer ".concat(Pt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Ct.stop()}},it,this)})),function(it){return X.apply(this,arguments)})},{key:"applePayPayment",value:(J=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt;return t.a.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return pt=Q.accessFeeId,xt=Q.referrer,yt=Q.brandingId,Tt=Q.voucherCode,It={payment_method:pe.APPLE_PAY_ON_WEB,access_fee_id:pt,voucher_code:Tt,branding_id:yt,referrer:xt},Ct.next=4,this.request.getToken();case 4:return Pt=Ct.sent,Ct.abrupt("return",this.request.authenticatedPost(Xt,y.a.stringify(It),{headers:{Authorization:"Bearer ".concat(Pt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Ct.stop()}},it,this)})),function(it){return J.apply(this,arguments)})},{key:"validateReceipt",value:($=l()(t.a.mark(function it(Q){var pt,xt,yt,Tt,It,Pt,Ct,Ut;return t.a.wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return pt=Q.platform,xt=Q.receipt,yt=Q.productName,Tt=Q.itemId,It=Q.accessFeeId,Pt=Q.amazonUserId,Ct=_e(_e({receipt:xt},yt?{product_name:yt}:{item_id:Tt,access_fee_id:It}),pt===we.AMAZON?{amazon_user_id:Pt}:{}),Ft.next=4,this.request.getToken();case 4:return Ut=Ft.sent,Ft.abrupt("return",this.request.authenticatedPost(Ne(String(pt)),y.a.stringify(Ct),{headers:{Authorization:"Bearer ".concat(Ut.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Ft.stop()}},it,this)})),function(it){return $.apply(this,arguments)})}]),kt}(j);function nr(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}var ir=function(Y){S()(jt,Y);var $,J,X,ct,Et,Dt,Mt,qt,Rt,zt=nr(jt);function jt(At,st){return a()(this,jt),zt.call(this,At,st)}return c()(jt,[{key:"getSubscriptions",value:(Rt=l()(t.a.mark(function At(){var st,Ot,Lt,Gt,wt=arguments;return t.a.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return st=wt.length>0&&wt[0]!==void 0?wt[0]:0,Ot=wt.length>1&&wt[1]!==void 0?wt[1]:15,Lt=wt.length>2&&wt[2]!==void 0?wt[2]:"",bt.next=5,this.request.getToken();case 5:return Gt=bt.sent,bt.abrupt("return",this.request.authenticatedGet(je(Ot,st,Lt),{headers:{Authorization:"Bearer ".concat(Gt.token)}}));case 7:case"end":return bt.stop()}},At,this)})),function(){return Rt.apply(this,arguments)})},{key:"getSubscription",value:(qt=l()(t.a.mark(function At(st){var Ot;return t.a.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.request.getToken();case 2:return Ot=Lt.sent,Lt.abrupt("return",this.request.authenticatedGet(Be(st),{headers:{Authorization:"Bearer ".concat(Ot.token)}}));case 4:case"end":return Lt.stop()}},At,this)})),function(At){return qt.apply(this,arguments)})},{key:"cancelSubscription",value:(Mt=l()(t.a.mark(function At(st){var Ot;return t.a.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.request.getToken();case 2:return Ot=Lt.sent,Lt.abrupt("return",this.request.authenticatedGet(Me(st),{headers:{Authorization:"Bearer ".concat(Ot.token)}}));case 4:case"end":return Lt.stop()}},At,this)})),function(At){return Mt.apply(this,arguments)})},{key:"createSubscription",value:(Dt=l()(t.a.mark(function At(st){var Ot,Lt,Gt,wt,bt,_t,kt,it,Q,pt,xt,yt,Tt;return t.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return Ot=st.number,Lt=st.cardName,Gt=st.expMonth,wt=st.expYear,bt=st.cvv,_t=st.accessFee,kt=st.paymentMethod,it=st.referrer,Q=st.voucherCode,pt=st.brandingId,xt=st.returnUrl,yt={number:Ot,card_name:Lt,exp_month:Gt,exp_year:wt,cvv:bt,access_fee:_t,payment_method:kt,referrer:it,branding_id:pt,return_url:xt},Q&&(yt.voucher_code=Q),It.next=5,this.request.getToken();case 5:return Tt=It.sent,It.abrupt("return",this.request.authenticatedPost(Le,y.a.stringify(yt),{headers:{Authorization:"Bearer ".concat(Tt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 7:case"end":return It.stop()}},At,this)})),function(At){return Dt.apply(this,arguments)})},{key:"changeSubscriptionPlan",value:(Et=l()(t.a.mark(function At(st){var Ot,Lt,Gt,wt;return t.a.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return Ot=st.access_fee_id,Lt=st.inplayer_token,Gt={access_fee_id:Ot,inplayer_token:Lt},bt.next=4,this.request.getToken();case 4:return wt=bt.sent,bt.abrupt("return",this.request.authenticatedPost(De,y.a.stringify(Gt),{headers:{Authorization:"Bearer ".concat(wt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return bt.stop()}},At,this)})),function(At){return Et.apply(this,arguments)})},{key:"directDebitSubscribe",value:(ct=l()(t.a.mark(function At(st){var Ot,Lt,Gt,wt,bt,_t,kt;return t.a.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return Ot=st.accessFeeId,Lt=st.assetId,Gt=st.voucherCode,wt=st.brandingId,bt=st.referrer,_t={item_id:Lt,access_fee_id:Ot,voucher_code:Gt,payment_method:"Direct Debit",branding_id:wt,referrer:bt},it.next=4,this.request.getToken();case 4:return kt=it.sent,it.abrupt("return",this.request.authenticatedPost(le,y.a.stringify(_t),{headers:{Authorization:"Bearer ".concat(kt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return it.stop()}},At,this)})),function(At){return ct.apply(this,arguments)})},{key:"idealSubscribe",value:(X=l()(t.a.mark(function At(st){var Ot,Lt,Gt,wt,bt,_t,kt,it;return t.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Ot=st.accessFeeId,Lt=st.bank,Gt=st.returnUrl,wt=st.referrer,bt=st.brandingId,_t=st.voucherCode,kt={payment_method:"ideal",access_fee_id:Ot,bank:Lt,return_url:se(Gt,{ippwat:"subscription"}),referrer:wt},bt&&(kt.branding_id=bt),_t&&(kt.voucher_code=_t),Q.next=6,this.request.getToken();case 6:return it=Q.sent,Q.abrupt("return",this.request.authenticatedPost(le,y.a.stringify(kt),{headers:{Authorization:"Bearer ".concat(it.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 8:case"end":return Q.stop()}},At,this)})),function(At){return X.apply(this,arguments)})},{key:"getDefaultCreditCard",value:(J=l()(t.a.mark(function At(){var st;return t.a.wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return Ot.next=2,this.request.getToken();case 2:return st=Ot.sent,Ot.abrupt("return",this.request.authenticatedGet(ee,{headers:{Authorization:"Bearer ".concat(st.token)}}));case 4:case"end":return Ot.stop()}},At,this)})),function(){return J.apply(this,arguments)})},{key:"setDefaultCreditCard",value:($=l()(t.a.mark(function At(st){var Ot,Lt,Gt,wt,bt,_t,kt,it;return t.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Ot=st.cardNumber,Lt=st.cardName,Gt=st.cvc,wt=st.expMonth,bt=st.expYear,_t=st.currency,kt={number:Ot,card_name:Lt,cvv:Gt,exp_month:wt,exp_year:bt,currency_iso:_t},Q.next=4,this.request.getToken();case 4:return it=Q.sent,Q.abrupt("return",this.request.authenticatedPut(ae,y.a.stringify(kt),{headers:{Authorization:"Bearer ".concat(it.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 6:case"end":return Q.stop()}},At,this)})),function(At){return $.apply(this,arguments)})}]),jt}(j);function or(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}var ar=function(Y){S()(X,Y);var $,J=or(X);function X(ct,Et){return a()(this,X),J.call(this,ct,Et)}return c()(X,[{key:"getBranding",value:($=l()(t.a.mark(function ct(Et){var Dt,Mt=arguments;return t.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return Dt=Mt.length>1&&Mt[1]!==void 0?Mt[1]:"default",qt.abrupt("return",this.request.get(Ue(Et,Dt)));case 2:case"end":return qt.stop()}},ct,this)})),function(ct){return $.apply(this,arguments)})}]),X}(j);function sr(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}var ur=function(Y){S()(X,Y);var $,J=sr(X);function X(ct,Et){return a()(this,X),J.call(this,ct,Et)}return c()(X,[{key:"getDiscount",value:($=l()(t.a.mark(function ct(Et){var Dt,Mt,qt,Rt,zt;return t.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Dt=Et.voucherCode,Mt=Et.accessFeeId,qt=Et.itemId,Rt={voucher_code:Dt},Mt&&(Rt.access_fee_id=Mt),qt&&(Rt.item_id=qt),jt.next=6,this.request.getToken();case 6:return zt=jt.sent,jt.abrupt("return",this.request.authenticatedPost(qe,y.a.stringify(Rt),{headers:{Authorization:"Bearer ".concat(zt.token),"Content-Type":"application/x-www-form-urlencoded"}}));case 8:case"end":return jt.stop()}},ct,this)})),function(ct){return $.apply(this,arguments)})}]),X}(j);function cr(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}var fr=function(Y){S()(qt,Y);var $,J,X,ct,Et,Dt,Mt=cr(qt);function qt(Rt,zt){return a()(this,qt),Mt.call(this,Rt,zt)}return c()(qt,[{key:"getMerchantMarketplace",value:(Dt=l()(t.a.mark(function Rt(zt){return t.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.abrupt("return",this.request.get(Fe(zt)));case 1:case"end":return jt.stop()}},Rt,this)})),function(Rt){return Dt.apply(this,arguments)})},{key:"getMerchantNFTList",value:(Et=l()(t.a.mark(function Rt(zt){var jt,At,st,Ot=arguments;return t.a.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return jt=Ot.length>1&&Ot[1]!==void 0?Ot[1]:1,At=Ot.length>2&&Ot[2]!==void 0?Ot[2]:50,st=Ot.length>3&&Ot[3]!==void 0?Ot[3]:"published",Lt.abrupt("return",this.request.get(ze(zt,jt,At,st)));case 4:case"end":return Lt.stop()}},Rt,this)})),function(Rt){return Et.apply(this,arguments)})},{key:"getMerchantNFT",value:(ct=l()(t.a.mark(function Rt(zt,jt){return t.a.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.abrupt("return",this.request.get(He(zt,jt)));case 1:case"end":return At.stop()}},Rt,this)})),function(Rt,zt){return ct.apply(this,arguments)})},{key:"getExchangeRates",value:(X=l()(t.a.mark(function Rt(zt){var jt,At=arguments;return t.a.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return jt=At.length>1&&At[1]!==void 0&&At[1],st.abrupt("return",this.request.get(Ve(zt,jt)));case 2:case"end":return st.stop()}},Rt,this)})),function(Rt){return X.apply(this,arguments)})},{key:"getUserBoughtNFTs",value:(J=l()(t.a.mark(function Rt(){var zt,jt,At,st=arguments;return t.a.wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return zt=st.length>0&&st[0]!==void 0?st[0]:1,jt=st.length>1&&st[1]!==void 0?st[1]:50,Ot.next=4,this.request.getToken();case 4:return At=Ot.sent,Ot.abrupt("return",this.request.authenticatedGet(We(zt,jt),{headers:{Authorization:"Bearer ".concat(At.token)}}));case 6:case"end":return Ot.stop()}},Rt,this)})),function(){return J.apply(this,arguments)})},{key:"makeReservation",value:($=l()(t.a.mark(function Rt(zt,jt){var At;return t.a.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,this.request.getToken();case 2:return At=st.sent,st.abrupt("return",this.request.authenticatedPost(Ge(zt,jt),{headers:{Authorization:"Bearer ".concat(At.token)}}));case 4:case"end":return st.stop()}},Rt,this)})),function(Rt,zt){return $.apply(this,arguments)})}]),qt}(j),lr=n(82),hr=n.n(lr);function Ee(Y,$){var J=Object.keys(Y);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(Y);$&&(X=X.filter(function(ct){return Object.getOwnPropertyDescriptor(Y,ct).enumerable})),J.push.apply(J,X)}return J}function de(Y){for(var $=1;$<arguments.length;$++){var J=arguments[$]!=null?arguments[$]:{};$%2?Ee(Object(J),!0).forEach(function(X){s()(Y,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(J)):Ee(Object(J)).forEach(function(X){Object.defineProperty(Y,X,Object.getOwnPropertyDescriptor(J,X))})}return Y}function pr(Y){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var J,X=u()(Y);if($){var ct=u()(this).constructor;J=Reflect.construct(X,arguments,ct)}else J=X.apply(this,arguments);return b()(this,J)}}var dr=18e5,gr=function(Y){S()(ct,Y);var $,J,X=pr(ct);function ct(Et,Dt){var Mt;return a()(this,ct),Mt=X.call(this,Et,Dt),s()(d()(Mt),"subscription",void 0),Mt.subscription=null,Mt}return c()(ct,[{key:"getIotToken",value:(J=l()(t.a.mark(function Et(){var Dt,Mt;return t.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return qt.next=2,this.request.getToken();case 2:return Dt=qt.sent,qt.next=5,this.request.authenticatedGet(this.config.AWS_IOT_URL,{headers:{Authorization:"Bearer ".concat(Dt.token)}});case 5:return Mt=qt.sent,qt.abrupt("return",de(de({},Mt.data),{},{iotEndpoint:this.config.IOT_NOTIF_URL}));case 7:case"end":return qt.stop()}},Et,this)})),function(){return J.apply(this,arguments)})},{key:"subscribe",value:($=l()(t.a.mark(function Et(){var Dt,Mt,qt,Rt,zt,jt,At=arguments;return t.a.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(Dt=At.length>0&&At[0]!==void 0?At[0]:"",Mt=At.length>1?At[1]:void 0,Dt||Dt!==""){st.next=4;break}return st.abrupt("return",!1);case 4:if(!Mt||!Mt.onMessage){st.next=10;break}if(typeof Mt.onMessage=="function"){st.next=8;break}return console.warn("[InPlayer Notifications] onMessage not defined"),st.abrupt("return",!1);case 8:st.next=11;break;case 10:Mt.onMessage=function(Ot){return console.log("Received message:",Ot)};case 11:if(!Mt||!Mt.onOpen){st.next=15;break}if(typeof Mt.onOpen=="function"){st.next=15;break}return console.warn("[InPlayer Notifications] onOpen not defined"),st.abrupt("return",!1);case 15:return st.next=17,te.getItem(this.config.INPLAYER_IOT_KEY);case 17:if((qt=st.sent)||console.warn("[InPlayer Notifications] Unable to fetch iot credentials"),Rt=JSON.parse(qt),zt=new Date().getTime(),!(Rt!=null&&Rt.expiresAt&&zt<Rt.expiresAt)){st.next=24;break}return this.handleSubscribe(Rt,Mt,Dt),st.abrupt("return",!0);case 24:return st.next=26,this.getIotToken();case 26:return jt=st.sent,st.next=29,te.setItem(this.config.INPLAYER_IOT_KEY,JSON.stringify(de(de({},jt),{},{expiresAt:new Date().getTime()+dr})));case 29:return this.handleSubscribe(jt,Mt,Dt),st.abrupt("return",!0);case 31:case"end":return st.stop()}},Et,this)})),function(){return $.apply(this,arguments)})},{key:"handleSubscribe",value:function(Et,Dt,Mt){var qt={region:Et.region,protocol:"wss",accessKeyId:Et.accessKey,secretKey:Et.secretKey,sessionToken:Et.sessionToken,port:443,host:Et.iotEndpoint},Rt=new hr.a.device(qt);Rt.on("connect",function(){Rt.subscribe(Mt),Dt.onOpen()}),Rt.on("message",function(zt,jt){Dt.onMessage(jt.toString())}),Rt.on("close",function(){Dt.onClose==="function"&&Dt.onClose()}),this.setClient(Rt)}},{key:"setClient",value:function(Et){this.subscription=Et}},{key:"isSubscribed",value:function(){return this.subscription!==null}},{key:"unsubscribe",value:function(){this.subscription&&(this.subscription.end(),this.subscription=null)}}]),ct}(j),mr=n(26),ge=n.n(mr),yr=function Y($){var J=this;a()(this,Y),s()(this,"config",void 0),s()(this,"basicInstance",void 0),s()(this,"authenticatedInstance",void 0),s()(this,"setInstanceConfig",function(X){J.config=P[X],J.basicInstance=ge.a.create({baseURL:J.config.BASE_URL}),J.authenticatedInstance=ge.a.create({baseURL:J.config.BASE_URL}),J.authenticatedInstance.interceptors.request.use(J.createAuthInterceptor)}),s()(this,"getToken",function(){var X=te.getItem(J.config.INPLAYER_TOKEN_KEY);return he(X)?X.then(function(ct){return ke(ct)}):ke(X)}),s()(this,"setToken",function(X,ct,Et){var Dt=new be({token:X,refreshToken:ct,expires:Et});return te.setItem(J.config.INPLAYER_TOKEN_KEY,JSON.stringify(Dt))}),s()(this,"removeToken",function(){var X=[te.removeItem(J.config.INPLAYER_TOKEN_KEY),te.removeItem(J.config.INPLAYER_IOT_KEY)];if(X.some(he))return Promise.all(X).then(function(){})}),s()(this,"isAuthenticated",function(){var X=J.getToken();if(he(X))return X.then(function(Et){return!Et.isExpired()&&!!Et.token});var ct=X;return!ct.isExpired()&&!!ct.token}),s()(this,"get",function(X,ct){return J.basicInstance.get(X,ct||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"post",function(X,ct,Et){return J.basicInstance.post(X,ct,Et||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"put",function(X,ct,Et){return J.basicInstance.put(X,ct,Et||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"patch",function(X,ct,Et){return J.basicInstance.patch(X,ct,Et||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"delete",function(X,ct){return J.basicInstance.delete(X,ct||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"authenticatedGet",function(X,ct){return J.authenticatedInstance.get(X,ct||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"authenticatedPatch",function(X,ct,Et){return J.authenticatedInstance.patch(X,ct,Et||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"authenticatedPost",function(X,ct,Et){return J.authenticatedInstance.post(X,ct,Et||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"authenticatedPut",function(X,ct,Et){return J.authenticatedInstance.put(X,ct,Et||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"authenticatedDelete",function(X,ct){return J.authenticatedInstance.delete(X,ct||{headers:{Accept:"application/json","Content-Type":"application/json"}})}),s()(this,"createAuthInterceptor",function(X){if(!J.isAuthenticated())throw{response:{status:401,data:{code:401,message:"The user is not authenticated."}}};return X}),this.config=$,this.basicInstance=ge.a.create({baseURL:this.config.BASE_URL}),this.authenticatedInstance=ge.a.create({baseURL:this.config.BASE_URL}),this.authenticatedInstance.interceptors.request.use(this.createAuthInterceptor)},Te=function(){function Y(){a()(this,Y),s()(this,"config",void 0),s()(this,"Account",void 0),s()(this,"Asset",void 0),s()(this,"Payment",void 0),s()(this,"Subscription",void 0),s()(this,"Voucher",void 0),s()(this,"NFTs",void 0),s()(this,"Branding",void 0),s()(this,"Notifications",void 0),s()(this,"request",void 0),s()(this,"tokenStorage",te),this.config=P.production,this.request=new yr(this.config),this.Account=new Ye(this.config,this.request),this.Asset=new tr(this.config,this.request),this.Payment=new rr(this.config,this.request),this.Subscription=new ir(this.config,this.request),this.Voucher=new ur(this.config,this.request),this.Branding=new ar(this.config,this.request),this.Notifications=new gr(this.config,this.request),this.NFTs=new fr(this.config,this.request)}return c()(Y,[{key:"subscribe",value:function($,J){this.request.isAuthenticated()&&this.Notifications.subscribe($,J).then(function(X){X||console.error("An error has occured while subscribing.")}).catch(function(X){X.response&&console.warn(X.response)})}},{key:"isSubscribed",value:function(){return this.Notifications.isSubscribed()}},{key:"unsubscribe",value:function(){this.Notifications.unsubscribe()}},{key:"setConfig",value:function($){this.config=P[$],this.request.setInstanceConfig($),this.Account.setConfig($),this.Asset.setConfig($),this.Branding.setConfig($),this.Notifications.setConfig($),this.Payment.setConfig($),this.Subscription.setConfig($),this.Voucher.setConfig($)}}]),Y}();I.default=new Te}]).default})})(Ae);const _r=vr(Ae.exports);export{_r as I};
